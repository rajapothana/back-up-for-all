/*
** Copyright Â© 2018 Apple Inc.
** All rights reserved.
*/

function ITSEvent(e,t){this.eventName=e,this.eventSource=t}function _itsdlogHasClientLogger(e){return window.its&&its.client&&its.client[e]&&typeof its.client[e]=="function"}function _itsdlogHasConsoleLogger(e){return window.console&&console[e]}function _itsdlogFunnel(e,t,n){t||(t="log");
if(_itsdlogHasClientLogger(t))return its.client[t](e,n);
if(_itsdlogHasConsoleLogger(t)&&!n)return console[t](e)}function itsdlog(e){return _itsdlogFunnel(e,"log")}function itsdinfo(e){return _itsdlogFunnel(e,"info")}function itsddebug(e){return _itsdlogFunnel(e,"debug")}function itsdslog(e,t){return _itsdlogFunnel(e,t,!0)}function itsdalert(e){return alert(e)}function bind(e,t){typeof t=="string"&&(t=e[t]);
var n=Array.prototype.slice,r=n.call(arguments,2);
return r.length>0?t.bind.apply(t,[e].concat(r)):t.bind(e)}function bindAsEventListener(e,t){typeof t=="string"&&(t=e[t]);
var n=Array.prototype.slice,r=n.call(arguments,2);
return function(i){return t.apply(e,[i].concat(r))}}function defer(e,t,n){return n||(n=0),setTimeout(bind(e,t),n)}function defined(e){return typeof window[e]!="undefined"}function getGlobalConst(e){return defined(e)?window[e]:null}function definedValue(e,t){return typeof e!="undefined"&&e!=null?e:t}function classNameForObject(e){if(e===null)return"null";
var t=typeof e;
if(t=="undefined")return"undefined";
if(t=="string"||e instanceof String)return"String";
if(t=="number"||e instanceof Number)return"Number";
if(e.constructor===Array)return"Array";
if(t=="object"||t=="function"){if(e.klassName)return e.klassName;
var n=e.toString();
n=="[object Object]"&&(n=e.constructor.toString());
if(n.indexOf("function ")===0)return n.replace("function ","").split("(")[0].toString();
if(n.indexOf("[object ")===0)return n.replace("[object ","").replace("]","");
if(n.indexOf("[object]")===0)return"object"}return"unknown"}function newElement(e,t,n){var e=document.createElement(e);
return t&&(typeof t=="string"?e.innerHTML=t:e.appendChild(t)),n&&(e.className=n),e}function isDomNode(e){return typeof e=="object"&&e.nodeType===1&&e.cloneNode}function clone(e,t,n){var r=null;
if(e==null||typeof e!="object")r=e;
!r&&isDomNode(e)&&(r=e.cloneNode(t),n&&(e.id=its.x.uniquifyId(e.id)));
if(!r&&e instanceof Object){var i={};
for(var s in e)e.hasOwnProperty(s)&&(i[s]=t?clone(e[s]):e[s]);
r=i}if(!r&&e instanceof Array){var i=[];
e.each(function(e){i.push(t?clone(e):e)}),r=i}if(!r&&e instanceof Date){var i=new Date;
i.setTime(e.getTime()),r=i}if(!r&&e)throw new Error("Clone failed.");
return r}function ITSLogger(e){e||(e=ITSLogger.Defaults.loggerName),this._loggerName=e,ITSLogger.loggers||(ITSLogger.loggers={}),ITSLogger.loggers[e]=this}function SFDelayedImageLoaderController(){}function iTSKitImageLoader(e,t,n,r){this.callback=bind(t,e),r||(r=9999),this.timeout=setTimeout(bind(this,"goOnTimeout"),r),this.images=new Array,this.addElements(n),this.numImages=0,this.images.each(function(e){its.ui.isImageComplete(e)||(this.numImages++,e.addEventListener("load",this,!1))},this),this.goOnReady()}function ITSParentalRating(e,t){this.ratingSystem=e,this.ratingValue=t}function ITSMetricsPageInfo(e,t,n,r){this.pageName=e,this.pageNameExtrasForBuyMetrics=t,this.channelName=n,this.location=r}function ITSPageMetricsUtil(){}function ITSLocationMetricsUtil(){}function ITSMetricsClickHandler(){}typeof its=="undefined"&&(its={}),its.sf||(its.sf={}),its.sf.DelayedCallQueue={},its.sf.DelayedCallQueue._queue={},its.sf.DelayedCallQueue._handlerObjectsCache={},its.sf.DelayedCallQueue.call=function(handlerObjectName,aFunction){var handlerObject=its.sf.DelayedCallQueue._handlerObjectsCache[handlerObject];
if(!handlerObject)try{handlerObject=eval(handlerObjectName),handlerObject&&typeof handlerObject!="undefined"&&(its.sf.DelayedCallQueue._handlerObjectsCache=handlerObject)}catch(anException){}var handlerObjectFunctionArray=its.sf.DelayedCallQueue._queue[handlerObjectName];
!handlerObject||typeof handlerObject=="undefined"?(handlerObjectFunctionArray||(handlerObjectFunctionArray=[],its.sf.DelayedCallQueue._queue[handlerObjectName]=handlerObjectFunctionArray),handlerObjectFunctionArray.push(aFunction)):(its.sf.DelayedCallQueue.objectReady(handlerObjectName),aFunction())},its.sf.DelayedCallQueue.objectReady=function(e){var t=its.sf.DelayedCallQueue._queue[e];
if(t){for(var n=0;
n<t.length;
n++)t[n]();
its.sf.DelayedCallQueue._queue[e]=null,delete its.sf.DelayedCallQueue._queue[e]}},window.its||(window.its={}),window.its.sf||(window.its.sf={}),its.sf.Platform={iPhone:function(){return its.sf.Platform.init(),its.sf.Platform._iPhone==1},iPhone5:function(){return its.sf.Platform.init(),its.sf.Platform._iPhone5==1},iPad:function(){return its.sf.Platform.init(),its.sf.Platform._iPad==1},iPadPro:function(){return typeof Device!="undefined"&&(Device.productType.indexOf("iPad6,7")!==-1||Device.productType.indexOf("iPad6,8")!==-1)},ATV:function(){return its.sf.Platform.init(),its.sf.Platform._ATV==1},iTunes11:function(){return its.sf.Platform.init(),its.sf.Platform._iTunes11==1},iTunes12:function(){return its.sf.Platform.init(),its.sf.Platform._iTunes12==1},iBooksMac:function(){return its.sf.Platform.init(),its.sf.Platform._iBooksMac==1},MacAppStore:function(){return its.sf.Platform.init(),its.sf.Platform._MacAppStore==1},desktop:function(){return this.iTunes11()||this.iTunes12()?!0:this.iBooksMac()?!0:this.MacAppStore()?!0:!1},device:function(){return this.iPhone()||this.iPad()},init:function(){if(its.sf.Platform._IS_INITIALIZED)return;if(its.serverData&&its.serverData.constants&&its.serverData.constants.platformCacheId)its.sf.Platform._platformCacheId=Number(its.serverData.constants.platformCacheId);
else{var e=document.querySelector("meta[name='platform-cache-id']");
its.sf.Platform._platformCacheId=e?Number(e.getAttribute("content")):null}switch(its.sf.Platform._platformCacheId){case 25:case 23:case 20:case 15:case 30:its.sf.Platform._iPad=!0;
break;case 26:case 24:case 21:case 16:case 29:its.sf.Platform._iPhone=!0;
break;case 19:case 27:case 33:its.sf.Platform._ATV=!0;
break;case 17:its.sf.Platform._iTunes11=!0;
break;case 28:case 32:its.sf.Platform._iTunes12=!0;
break;case 22:its.sf.Platform._iBooksMac=!0;
break;case 13:its.sf.Platform._MacAppStore=!0}its.sf.Platform._IS_INITIALIZED=!0},hiDPI:function(){return window.devicePixelRatio>1},isDark:function(){return typeof document!="undefined"&&typeof document.body!="undefined"&&typeof document.body.className!="undefined"&&document.body.className.match("dark")},isMavericksOrLater:function(){return this.iBooksMac()||typeof iTunes!="undefined"&&(iTunes.platform=="mac"||iTunes.platform=="Mac")&&iTunes.osBuildID&&its.string.compareNumerically(iTunes.osBuildID,"13A")>=0},platformCacheId:function(){return its.sf.Platform.init(),its.sf.Platform._platformCacheId},isITML:function(){var e=!1;
return its.serverData&&its.serverData.constants&&its.serverData.constants.usesITML&&typeof itms!="undefined"&&(e=!0),e},isProd:function(){if(!its.isDefinedNonNull(this._isProd)){var e=its.property("ITSServerEnvironment");
this._isProd=e&&e.indexOf("prod")!=-1}return this._isProd},isBadgeTextColoringSupported:function(){return Device&&its.string.compareNumerically(Device.systemVersion,"8.1")>=0},isReleaseDateInMovieLockup:function(){return its.sf.Platform.iPad()},isATV9OrGreater:function(){return this.ATV()&&this.platformCacheId()>=33},isIPhone6PlusScreenSize:function(){return this._screenSize().height==736&&this._screenSize().width==414||this._screenSize().height==414&&this._screenSize().width==736},isIPhone6ScreenSize:function(){return its.isDefinedNonNull(this._isIPhone6ScreenSize)||(this._isIPhone6ScreenSize=this._screenSize().height==667&&this._screenSize().width==375),this._isIPhone6ScreenSize},isIPhone5ScreenSize:function(){return its.isDefinedNonNull(this._isIPhone5ScreenSize)||(this._isIPhone5ScreenSize=this._screenSize().height==568&&this._screenSize().width==320),this._isIPhone5ScreenSize},isIPhone4ScreenSize:function(){return typeof Device!="undefined"&&!its.isDefinedNonNull(this._isIPhone4ScreenSize)&&(this._isIPhone4ScreenSize=Device.productType.indexOf("iPhone4")!=-1),this._isIPhone4ScreenSize},_screenSize:function(){var e={};
return typeof Settings!="undefined"&&(e=typeof Settings.screen!="undefined"?Settings.screen:Settings.Screen),e},isVersionSupported:function(t){if(Device.systemVersion===t)return!0;
var n=Device.systemVersion,r=n.split("."),i=t.split("."),s=Math.max(r.length,i.length),o=function(e,t,n){e+="";
for(var r=0;
r<t;
r++)e+=n;
return e};
i.length!==s&&(t=o(t,s-i.length,".0"),i=t.split(".")),r.length!==s&&(n=o(n,s-r.length,".0"),r=n.split("."));
if(n===t)return!0;
for(var u=0,a=i.length;
u<a;
u++){i[u]=+i[u],r[u]=+r[u];
if(i[u]<r[u])return!0;
if(i[u]>r[u])return!1}return!1}},its.sf.Platform._logger=its.Logger?its.Logger.named("its.sf.Platform"):null,window.its||(window.its={}),its.x||(its.x={}),its.x.util||(its.x.util={}),its.x.util.array||(its.x.util.array={}),its.x.uniqueGuid=1,its.x.attachGuid=function(t){t.__guid||(t.__guid=its.x.uniqueGuid++)},its.x.browserName=function(){return its.x.isOpera()?"opera":its.x.isKhtml()?"khtml":its.x.isSafari()?"safari":its.x.isChrome()?"chrome":its.x.isWebKit()?"webkit":its.x.isIE7()?"ie7":its.x.isIE8()?"ie8":its.x.isIE()?"ie":its.x.isFirefox()?"firefox":"unknown"},its.x.initBrowserDetect=function(){if(typeof its.x.initBrowserDetect.browser=="undefined"||!its.x.initBrowserDetect.browser){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r),s={};
s.isOpera=n.indexOf("Opera")>=0?i:undefined,s.isKhtml=r.indexOf("Konqueror")>=0?i:undefined,s.isWebKit=parseFloat(n.split("WebKit/")[1])||undefined,s.isChrome=parseFloat(n.split("Chrome/")[1])||undefined,s.isFirefox=/Firefox[\/\s](\d+\.\d+)/.test(n);
var o=Math.max(r.indexOf("WebKit"),r.indexOf("Safari"),0);
if(o&&!s.isChrome){s.isSafari=parseFloat(r.split("Version/")[1]);
if(!s.isSafari||parseFloat(r.substr(o+7))<=419.3)s.isSafari=2}if(document.all&&!s.isOpera){s.isIE=parseFloat(r.split("MSIE ")[1])||undefined;
var u=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),a=-1;
u.exec(n)!=null&&(a=parseFloat(RegExp.$1)),s.isIE7=a>=7&&a<8,s.isIE8=a>=8&&a<9}its.x.initBrowserDetect.browser=s}return its.x.initBrowserDetect.browser},its.x.isIE=function(){return its.x.initBrowserDetect().isIE},its.x.isIE7=function(){return its.x.initBrowserDetect().isIE7},its.x.isIE8=function(){return its.x.initBrowserDetect().isIE8},its.x.isOpera=function(){return its.x.initBrowserDetect().isOpera},its.x.isKhtml=function(){return its.x.initBrowserDetect().isKhtml},its.x.isWebKit=function(){return its.x.initBrowserDetect().isWebKit},its.x.isChrome=function(){return its.x.initBrowserDetect().isChrome},its.x.isSafari=function(){return its.x.initBrowserDetect().isSafari},its.x.isFirefox=function(){return its.x.initBrowserDetect().isFirefox},its.x.PLATFORMS||(its.x.PLATFORMS={}),its.x.PLATFORMS.Windows="Windows",its.x.PLATFORMS.MacOS="MacOS",its.x.PLATFORMS.Linux="Linux",its.x.PLATFORMS.Unix="Unix",its.x.PLATFORMS.iOS="iOS",its.x.PLATFORMS.Android="Android",its.x.__detectOS=function(){var t=undefined;
return navigator.appVersion.indexOf("Win")!=-1?t=its.x.PLATFORMS.Windows:navigator.appVersion.indexOf("Mac")!=-1?t=its.x.PLATFORMS.MacOS:navigator.appVersion.indexOf("X11")!=-1?t=its.x.PLATFORMS.Unix:navigator.appVersion.indexOf("Linux")!=-1?t=its.x.PLATFORMS.Linux:navigator.appVersion.indexOf("iOS")!=-1?t=its.x.PLATFORMS.iOS:navigator.appVersion.indexOf("Android")!=-1&&(t=its.x.PLATFORMS.Android),t},its.x.isWindows=function(){return its.x.__detectOS()==its.x.PLATFORMS.Windows},its.x.isMacOS=function(){return its.x.__detectOS()==its.x.PLATFORMS.MacOS},its.x.isIOS=function(){return its.x.__detectOS()==its.x.PLATFORMS.iOS},its.x.isAndroid=function(){return its.x.__detectOS()==its.x.PLATFORMS.Android},its.x.util.array.indexOf=function(t,n){var r=-1;
if(t.indexOf)r=t.indexOf(n);
else for(var i=0;
i<t.length&&r==-1;
i++)t[i]==n&&(r=i);
return r},its.x.util.array.shallowCopy=function(t){return t.slice(0)},its.x.notifyOfDOMContentLoaded=function(t){var n=!0;
return its.x.isIE()?n=window.attachEvent("onload",t):document.addEventListener("DOMContentLoaded",t,!1),n},its.x.addEventListener=function(t,n,r){t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&t.attachEvent("on"+n,function(e){r.call(t,e)})},ITSEvent.prototype.preventDefault=function(){this._preventDefaultFlag=!0},ITSEvent.prototype.shouldPreventDefault=function(){return this._preventDefaultFlag},its.x.extendWithEventDispatching=function(t){t.__eventToListenersMap||(t.__eventToListenersMap={},t.__additionalDispatchers=new Array,Class.extend(t,its.x._ITSEventDispatcher))},its.x._ITSEventDispatcher=function(){},its.x._ITSEventDispatcher.itsAddEventListener=function(t,n){var r=!1;
if(typeof n=="function"){var i=this.__eventToListenersMap[t];
i||(i=new Array,this.__eventToListenersMap[t]=i),its.x.util.array.indexOf(i,n)==-1&&(i.push(n),r=!0)}return r},its.x._ITSEventDispatcher.itsRemoveEventListener=function(t,n){var r=this.__eventToListenersMap[t];
if(r){var i=its.x.util.array.indexOf(r,n);
i>=0&&r.splice(i,1)}},its.x._ITSEventDispatcher.itsHasEventListeners=function(t){if(!t)throw new Error("itsHasEventListeners called with null event");
var n=this.__eventToListenersMap[t.eventName];
return n&&n.length||this.__additionalDispatchers&&this.__additionalDispatchers.length},its.x._ITSEventDispatcher.itsDispatchEvent=function(t){var n=this.__eventToListenersMap[t.eventName];
if(n)for(var r=0;
r<n.length;
r++)try{n[r].apply(this,arguments)}catch(i){console&&console.error&&i.line&&i.sourceURL&&console.error(i+"    See line "+i.line+" of "+i.sourceURL)}if(this.__additionalDispatchers.length>0)for(var r=0;
r<this.__additionalDispatchers.length;
r++)try{this.__additionalDispatchers[r].itsDispatchEvent(t)}catch(i){console&&console.error&&i.line&&i.sourceURL&&console.error(i+"    See line "+i.line+" of "+i.sourceURL)}},its.x._ITSEventDispatcher.itsDelegateEvents=function(t){its.x.extendWithEventDispatching(t),this.__additionalDispatchers.push(t)},its.x.dynaLoadResourceFile=function(t,n){var r=!1;
if(its&&its.property&&its.property("DynaLoader.allowDynaLoading")){its._dynaLoadedFiles||(its._dynaLoadedFiles=[]);
if(t&&!its.contains(its._dynaLoadedFiles,t)){var i=null,s=null,o=null,i=document.getElementsByTagName("head");
i&&(s=i[0]),s&&(o=s.firstChild);
if(o){its._dynaLoadedFiles.push(t);
var u=its.contains(t,".js")||its.contains(t,".jsz")?"js":"css",a=u=="js"?"SCRIPT":"LINK",f=u=="js"?"text/javascript":"text/css",l=document.createElement(a);
l.onload=l.onreadystatechange=n,l.type=f,u=="css"?(l.rel="stylesheet",l.href=t):(l.charset="utf-8",l.src=t),its.x.element.insertBeforeElement(o,l),r=!0}else window.console&&console.log&&(console.log("its.x.dynaLoadResourceFile: Waiting for DOM <head> section to be created before fetching resource: "+t),window.setTimeout(function(){its.x.dynaLoadResourceFile(t,n)},200))}else t&&(r=!0)}return r},window.its||(window.its={}),its.files||(its.files={}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=n.call(arguments,1);
return function(){return t.apply(e,r.concat(n.call(arguments)))}}),Class={create:function(e,t){return Class._create(e,t)},createSubclass:function(e,t,n){if(!t)throw new Error("Undefined base class when creating subclass: "+e);
return Class._create(e,n,t)},_create:function(e,t,n){function r(){this.initialize.apply(this,arguments)}function i(e,t,n){var r=e[n];
e[n]=function(){var i=t[n],s=this.base,o=arguments;
this.base=function(){return arguments.length&&(o=arguments),i.apply(this,o)};
try{return r.apply(this,o)}finally{this.base=s}}}if(n){var s=function(){};
s.prototype=n.prototype,r.prototype=new s}Class.extend(r.prototype,t);
if(n)for(var o in n.prototype)r.prototype.hasOwnProperty(o)&&typeof r.prototype[o]=="function"&&typeof n.prototype[o]=="function"&&i(r.prototype,n.prototype,o);
return r.prototype.initialize||(r.prototype.initialize=its.emptyFunction),r.prototype.constructor=r,r.klassName=e,r},extend:function(e,t){e=e||{},t=t||{};
for(var n in t)e[n]=t[n];
return e},shallowClone:function(e){return Class.extend({},e)}},function(e,t){e.its||(e.its={});
var n=e.its;
if(n.kit)return;n.kit={_domContentLoaded:!1,_pageLoaded:!1,_afterPageLoaded:!1,_preloadListeners:[],_domReadyListeners:[],_loadListeners:[],_afterLoadListeners:[],_domInsertedListeners:null,preload:function(){s.preload()},onPreload:function(e){this._preloadListeners.push(e)},onDomReady:function(e){this._domContentLoaded?e():this._domReadyListeners.push(e)},onLoad:function(e){this._pageLoaded?e():this._loadListeners.push(e)},onAfterLoad:function(e){this._afterPageLoaded?e():this._afterLoadListeners.push(e)},onDomInserted:function(e){var t=this._domInsertedListeners=this._domInsertedListeners||[];
t.push(e)},createController:function(e,t){r._debug.isEnabled()&&r._debug.controllerNameMatchesFilter(e)&&console.log("Creating controller matching filterControllerNameSubstring: "+e);
var n=this._util.newController(e,t),i=n.newClass();
return this._controllers[n.name]=i,this._domContentLoaded&&(r._debug.isEnabled()&&r._debug.controllerNameMatchesFilter(e)&&console.log("Controller created after DOMContentLoaded... initting manually: "+e),i._init(),i._bindOnRootElement(document),i.domReady&&i.domReady()),i.init&&i.init(),i},createMixin:function(e,t){var n=this._util.newMixin(e,t);
this._mixins[n.name]=n.newClass()},preventBinding:function(e){e[r._util.preventItsKitBinding]=!0},sendToController:function(e,t){i.typeOfObject(e)=="String"&&(e=r._util.massageControllerName(e));
var n=i.argumentsToArray(arguments,2);
e=this._controllers[e];
if(e&&t in e)return e[t].apply(e,n)},disableBinding:function(){s.ignoreDOMNodeInserted=!0},enableBinding:function(t){delete s.ignoreDOMNodeInserted,t&&n.kit.rebind()},rebind:function(t){s.bindAndInitOnElement(document.documentElement),t||s._notifyOfDomInserted(null)},bindAfter:function(t,n){this.disableBinding(),t&&(n=n||null,t.call(n)),this.enableBinding(!0)},domLoaded:function(){return n.kit._domContentLoaded},pageLoaded:function(){return n.kit._pageLoaded},afterPageLoaded:function(){return n.kit._afterPageLoaded},debug:function(e,t){e=i.optionalBooleanArg(e,!0);
var n=!1;
sessionStorage&&(sessionStorage["its.kit.debug.enabled"]=e.toString(),t?sessionStorage["its.kit.debug.filterControllerNameSubstring"]=t:sessionStorage.removeItem("its.kit.debug.filterControllerNameSubstring")),e&&(n=r._debug.printAll(),n||(t?console.log("WARNING: No controllers found matching: "+t):console.log("WARNING: No controllers found."))),r._debug.isEnabled=r._debug._isEnabled},isDebugEnabled:function(){return r._debug.isEnabled()},util:{extend:function(e,t,n){function o(t){for(var r in t){var i=t.__lookupGetter__(r),s=t.__lookupSetter__(r);
if(n||!(r in e))i||s?(i&&e.__defineGetter__(r,i),s&&e.__defineSetter__(r,s)):e[r]=t[r]}}var r;
t=this.arrayify(t);
if(t)for(var i=0,s=t.length;
i<s;
i++)o(t[i]);
return e},optionalArg:function(e,t){return e?e:t},optionalTypedArg:function(e,t,n){return i.typeOfObject(t)===e?t:n},optionalBooleanArg:function(e,t){return i.optionalTypedArg("Boolean",e,t)},optionalStringArg:function(e,t){return i.optionalTypedArg("String",e,t)},optionalNumberArg:function(e,t){return i.optionalTypedArg("Number",e,t)},optionalObjectArg:function(e,t){return i.optionalTypedArg("Object",e,t)},appendAttribute:function(e,t,n,r){var s=e.hasAttribute(t)?e.getAttribute(t)+i.optionalStringArg(r," ")+n:n;
e.setAttribute(t,s)},typeOfObject:function(t){if(t===null)return"null";
var n=typeof t;
switch(n){case"undefined":break;case"string":n="String";
break;case"number":n="Number";
break;case"object":n=t.constructor.name||t.toString().slice(8,-1);
break;case"function":n=t.name||t.constructor.name;
break;case"boolean":n="Boolean";
break;default:n="unknown"}return n},objectIsA:function(t,n){var r=i.typeOfObject(t);
return typeof n=="string"?r===n:r===i.typeOfObject(n)},arrayify:function(t){return i.objectIsA(t,Array)?t:[t]},pickFirstNonNull:function(){var t=i.argumentsToArray(arguments),n;
for(var r=0,s=t.length;
r<s;
r++){n=t[r];
switch(i.typeOfObject(n)){case"String":return n;
case"Function":var o=n();
if(o)return o}}return null},argumentsToArray:function(t,n){return Array.prototype.slice.call(t||[],i.optionalNumberArg(n,0))},apply:function(t,n,r){var s=null;
return n=i.objectIsA(n,"String")?t[n]:n,r=r||[],n&&(s=n.apply(t,i.argumentsToArray(r))),s},applyToCollection:function(t,n,r){var s=null,o=i.typeOfObject(t),u,a,f;
if(o==="Array")for(u=0,a=t.length;
u<a;
u++)f=i.apply(t[u],n,r),f&&!s&&(s=f);
if(o==="Object")for(u in t)t.hasOwnProperty(u)&&(f=i.apply(t[u],n,r)),f&&!s&&(s=f);
return s},bind:function(t,n){var r=i.argumentsToArray(arguments,2);
return function(){i.apply(t,n,r.concat(i.argumentsToArray(arguments)))}},defer:function(){var t=i.argumentsToArray(arguments),n=typeof t[0]=="number"?t.shift():0;
setTimeout(i.bind.apply(i,t),n)}},_controllers:{},_mixins:{},_init:{handleEvent:function(e){s[e.type]?s[e.type](e):s.applyToControllers(e.type,e),i.applyToCollection(r._mixins,e.type,arguments)},preload:function(){ITSStopwatch.named("ITSLoadTimes").markElapsedTimeNamed("itsKitDispatchPreloadStart",!0),ITSStopwatch.named("ITSLoadTimes").startSplitTimeNamed("itsKitDispatchPreloadDuration"),s.applyToControllers("preload"),n.kit._preloadListeners.forEach(function(e){e()}),ITSStopwatch.named("ITSLoadTimes").stopSplitTimeNamed("itsKitDispatchPreloadDuration",!0)},load:function(e){n.kit._pageLoaded=!0,i.defer(s,"afterPageLoadAction",e),ITSStopwatch.named("ITSLoadTimes").markElapsedTimeNamed("itsKitDispatchLoadStart",!0),ITSStopwatch.named("ITSLoadTimes").startSplitTimeNamed("itsKitDispatchLoadDuration"),n.kit._loadListeners.forEach(function(e){e()}),s.applyToControllers("load",e),ITSStopwatch.named("ITSLoadTimes").stopSplitTimeNamed("itsKitDispatchLoadDuration",!0)},afterPageLoadAction:function(e){n.kit._afterPageLoaded=!0,ITSStopwatch.named("ITSLoadTimes").markElapsedTimeNamed("itsKitDispatchAfterLoadStart",!0),ITSStopwatch.named("ITSLoadTimes").startSplitTimeNamed("itsKitDispatchAfterLoadDuration"),this.applyToControllers("afterLoad",e),n.kit._afterLoadListeners.forEach(function(e){e()}),ITSStopwatch.named("ITSLoadTimes").stopSplitTimeNamed("itsKitDispatchAfterLoadDuration",!0),ITSStopwatch.named("ITSLoadTimes").logToServer()},DOMContentLoaded:function(e){n.kit._domContentLoaded=!0,ITSStopwatch.named("ITSLoadTimes").markElapsedTimeNamed("itsKitDispatchInitStart",!0),ITSStopwatch.named("ITSLoadTimes").startSplitTimeNamed("itsKitDispatchInitDuration"),s.applyToControllers("_init"),ITSStopwatch.named("ITSLoadTimes").stopSplitTimeNamed("itsKitDispatchInitDuration",!0),s.bindAndInitOnElement(e.srcElement),ITSStopwatch.named("ITSLoadTimes").markElapsedTimeNamed("itsKitDispatchDomReadyStart",!0),ITSStopwatch.named("ITSLoadTimes").startSplitTimeNamed("itsKitDispatchDomReadyDuration"),s.applyToControllers("domReady",e),document.addEventListener("DOMNodeInserted",s,!1),n.kit._domReadyListeners.forEach(function(e){e()}),ITSStopwatch.named("ITSLoadTimes").stopSplitTimeNamed("itsKitDispatchDomReadyDuration",!0)},DOMNodeInserted:function(e){var t=e.srcElement;
if(s.ignoreDOMNodeInserted)return;if(t.nodeType!=1||t.tagName=="SCRIPT"||t.tagName=="LINK")return;if(t[r._util.preventItsKitBinding]||t.hasAttribute(r._util.preventItsKitBinding))return;s.bindAndInitOnElement(e.srcElement.parentNode),s._notifyOfDomInserted(e)},_notifyOfDomInserted:function(e){i.defer(s,"afterDomInsertedAction",e),n.kit._domInsertedListeners&&n.kit._domInsertedListeners.forEach(function(t){t(e)}),s.applyToControllers("domInserted",e)},afterDomInsertedAction:function(e){n.kit._afterDomInserted=!0,this.applyToControllers("afterInserted",e)},bindAndInitOnElement:function(t){s.applyToControllers("_bindOnRootElement",t)},applyToControllers:function(e){function a(){if(this.className in u)return t;
u[this.className]=!0;
var n=this._factory.options.initAfter;
return n&&(n=n.replace(o,"")+"Controller",n in r._controllers&&a.call(r._controllers[n])),i.apply(this,e,s)}var t=null,s=i.argumentsToArray(arguments,1),o=n.kit._util.controllerNameRegExp,u={};
return t=i.applyToCollection(r._controllers,a),t}},_util:{controllerNameRegExp:/Controller$/g,preventItsKitBinding:"prevent-its-kit-binding",createClass:function(t,n){var r=e;
return r[t]||(r[t]=(new Function("","return function "+t+"(){};"))()),n&&this.extendClass(r[t],n),r[t]},extendClass:function(e,t){t=i.arrayify(t);
var n;
for(var s=0,o=t.length;
s<o;
s++)n=t[s],t[s]=i.objectIsA(n,"String")?r._extensions[n]:n;
return i.extend(e.prototype,t)},newComponent:function(e,t){return this.newObject(e.replace(this.controllerNameRegExp,""),t)},newController:function(e,t){var n=!t;
e=this.massageControllerName(e),t=i.optionalObjectArg(t,{});
if(n||t.binding||t.component)t.newComponent=this.newComponent(e,[t.component||{},"all"]);
return this.newObject(e,[t.controller,"controller","all"],{_components:[]},t)},newMixin:function(e,t){return this.newObject(e+"Mixin",[t,"mixin","all"],{_controllers:[],_rawName:e})},newObject:function(e,t,n,r){return{name:e,klass:this.createClass(e,t),options:i.optionalObjectArg(r,{}),extend:function(e,t){var n=this.klass.prototype;
t&&(this.klass.prototype[t]={},n=n[t]),i.extend(n,e)},newClass:function(e){return i.extend(new this.klass,[{className:this.name,_factory:this},n,e])}}},massageControllerName:function(e){return e.replace(this.controllerNameRegExp,""),e.lastIndexOf("Controller")==-1&&(e+="Controller"),e}},_extensions:{all:{listen:function(e,t,n){return this._listen(i.argumentsToArray(arguments),!1)},capture:function(e,t,n){return this._listen(i.argumentsToArray(arguments),!0)},_listen:function(e,t){var n=this,r,s,o;
return e.length==1?(r=n.element||document,s=e[0],o=s+"Event"):e.length==2?typeof e[0]=="string"?(r=n.element||document,s=e[0],o=e[1]):(r=e[0],s=e[1],o=s+"Event"):(r=e[0],s=e[1],o=e[2]),typeof o!="object"&&(o=i.bind(n,o)),r.addEventListener(s,o,t),{remove:function(){r.removeEventListener(s,o,t)}}},handleEvent:function(e){var t=e.type+"Event";
this[t]&&this[t].call(this,e)},dispatchCustomEvent:function(e,t,n,r,s){r=i.optionalBooleanArg(r,!0),s=i.optionalBooleanArg(s,!0);
var o=document.createEvent("Events");
o.initEvent(t,r,s),o._customEvent=!0,i.extend(o,n),e.dispatchEvent(o)}},controller:{shouldBindToElement:function(e){return!0},rebind:function(){this.applyToComponents("init")},applyToComponents:function(e){i.applyToCollection(this._components,e,i.argumentsToArray(arguments,1))},getComponents:function(){return[].concat(this._components)},bindToElements:function(e,t){if(!e)return null;
typeof e=="string"&&(t=e,e=document.querySelectorAll(e));
var n=[],s;
for(var o=0,u=e.length;
o<u;
o++)s=this._bindToElement(e[o]),s&&n.push(s);
return i.applyToCollection(n,"bound"),i.applyToCollection(n,"init"),r._debug.isEnabled()&&r._debug.print(this,n,t),n},bindToElement:function(e){var t=this._bindToElement(e);
return t&&(i.apply(t,"bound"),i.apply(t,"init"),r._debug.isEnabled()&&r._debug.print(this,[t])),t},_init:function(){if(!this.binding){var e=this._factory.options.binding;
typeof e=="string"?(this._bindingSelector=e,this.binding=this._binding):typeof e=="function"&&(this.binding=e)}if(this._factory.options.mixins){var t=i.arrayify(this._factory.options.mixins),n,s;
for(var o=0,u=t.length;
o<u;
o++)n=t[o],s=r._mixins[n+"Mixin"],s&&(s.methods&&(this._factory.extend(s.methods),this._factory.options.newComponent&&this._factory.options.newComponent.extend(s.methods,n)),s._controllers.push(this))}},_binding:function(e){return this._bindingSelector&&e&&e.querySelectorAll?e.querySelectorAll(this._bindingSelector):[]},_bindOnRootElement:function(e){this.binding?this.bindToElements(this.binding(e),this._bindingSelector):r._debug.isEnabled()&&r._debug.controllerNameMatchesFilter(this._factory.name)&&console.log('WARNING: No "binding" specification found for matching controller: '+this._factory.name)},_bindToElement:function(e){var t=this._factory.options.newComponent;
if(t&&!(t.name in e)&&!e[r._util.preventItsKitBinding]&&!e.hasAttribute(r._util.preventItsKitBinding)){var n=null;
return this.shouldBindToElement(e)&&(n=t.newClass({element:e,controller:this}),this._factory.options.unbind!==!1&&e.addEventListener("DOMNodeRemovedFromDocument",i.bind(this,"_unbindFromElement",n)),this._components.push(n),e[t.name]=n),n}return null},_unbindFromElement:function(e){var t=this._components.indexOf(e);
t&&(i.apply(e,"unbound"),this._components.splice(t,1))},pagehide:function(e){this.unload&&(console.log("pagehide event called, but unload existed instead. Please replace unload with pagehide!"),this.unload(e))}},mixin:{sendCallback:function(e){arguments[0]=this._rawName+"_"+arguments[0],i.applyToCollection(this._controllers,"applyToComponents",arguments),i.applyToCollection(this._controllers,arguments[0],i.argumentsToArray(arguments,1))}}},_debug:{_isEnabled:function(){var t=/(\?|&)its.kit.debug.enabled=true(&|$)/.test(e.location.search)||sessionStorage&&sessionStorage["its.kit.debug.enabled"]=="true";
return this.isEnabled=function(){return t},t},isEnabled:function(){return this._isEnabled()},hasFilter:function(){return this.filterName()?!0:!1},filterName:function(){return sessionStorage["its.kit.debug.filterControllerNameSubstring"]},controllerNameMatchesFilter:function(e){var t=this.filterName();
return t=="all"||t&&e.toLowerCase().indexOf(t.toLowerCase())!=-1},print:function(e,t,n){var s=!1,o=e.className,u=this.filterName();
if(this.controllerNameMatchesFilter(o)){t||(t=e._components);
var a=!t.length&&u;
if(t.length||a){var f="its.kit.debug: "+o,l=t.length;
a?f+=" FAILED to bind to any elements":(f+=" SUCCESSFULLY bound to "+l+(l>1?" elements":" element"),s=!0),n&&(f+=' matching the selector: "'+n+'".'),t.length==1?console.log(f,"Component:",t[0]):t.length>5?console.log(f,"First 5 components:",t.slice(0,5)):console.log(f,"Components:",t)}}return r._debug.isEnabled()&&r._debug.controllerNameMatchesFilter(name)&&e.applyToComponents(function(){var e=this.element,t=this._factory.name,n=(e.getAttribute("its-kit-bound")||"").split(" ");
n.indexOf(t)==-1&&i.appendAttribute(e,"its-kit-bound",t)}),s},printAll:function(e){var t=this;
return s.applyToControllers(function(){return t.print(this,this._components,this._bindingSelector)})}},_go:function(e){e.document.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1),e.addEventListener("pagehide",s,!1)}};
var r=n.kit,i=r.util,s=r._init;
r._go(e)}(window),typeof window=="undefined"&&(window=this),typeof location=="undefined"&&(location={},location.search=""),window.its||(window.its={}),its.sf||(its.sf={}),its.currentTime=function(){return(new Date).getTime()},its.isDefined=function(t){return typeof t!="undefined"},its.isDefinedNonNull=function(t){return its.isDefined(t)&&t!=null},its.isDefinedNonNullNonEmpty=function(t){return its.isDefined(t)&&t!=null&&t!=""},its.isFunction=function(t){return typeof t=="function"},its.isNumber=function(t){return typeof t=="number"},its.isString=function(t){return typeof t=="string"||t instanceof String},its.isElement=function(t){return t&&t.nodeType==1},its.isArray=function(t){return t&&t.constructor===Array},its.isObject=function(t){return t&&t.constructor===Object},its.createObjectPath=function(e,t){return its.objectAtPath(e,t,!0)},its.objectAtPath=function(e,t,n){var r=definedValue(t,window);
if(e){var i=e.split(".");
for(var s=0;
r&&s<i.length;
s++){var o=i[s];
!r[o]&&n&&(r[o]={}),r[o]?r=r[o]:r=null}}return r},its.toArray=function(t){var n;
if(its.isString(t))t=its.string.trim(t,"(){}[]"),n=t.split(",");
else{var n=[];
if(t&&its.isDefinedNonNull(t.length))for(var r=0;
r<t.length;
r++)n[r]=t[r]}return n},its.arrayToMap=function(e){var t={};
e=its.toArray(e);
for(var n=0;
n<e.length;
n++)t[e[n]]=!0;
return t},its.toBoolean=function(t){return t?t=="0"||t=="false"?!1:!0:!1},its.isEmpty=function(t){var n=!0;
if(its.isDefinedNonNull(t))if(its.isString(t)&&t!="")n=!1;
else if(its.isArray(t)&&t.length>0)n=!1;
else for(var r in t)if(t.hasOwnProperty(r)){n=!1;
break}return n},its.contains=function(t,n){var r=!1;
return its.isDefinedNonNull(t)&&its.isDefinedNonNull(n)&&(its.isString(t)&&its.isString(n)&&t.indexOf(n)!=-1||its.isArray(t)&&t.indexOf(n)!=-1||its.isDefinedNonNull(t[n]))&&(r=!0),r},its.webkitVersion=function(){var t=navigator.userAgent,n=/AppleWebKit\/([\d.]+)/,r=n.exec(t),i;
if(r)i=r[1];
else{var s=/^iTunes\/10\.4 \(Windows;.+AppleWebKit\/$/;
s.exec(t)?i="533.21.1":(window.console&&console.warn("Unable to determine WebKit version from user agent: "+t),i="0")}return i},its.webkitVersionCompare=function(t,n){var r=0,i=0,s=t.split("."),o=n.split(".");
while((s[i]||o[i])&&r==0){var u=s[i]?its.string.toInt(s[i]):0,a=o[i]?its.string.toInt(o[i]):0;
u<a?r=-1:u>a&&(r=1),i++}return r},its.poseAs=function(e,t,n){var r=e[t];
e[t]=function(){var e=[r,arguments];
return n.apply(this,e)}},its.emptyFunction=function(){},its.swallowEventFunction=function(t){t.preventDefault(),t.stopPropagation()},window.its.element||(window.its.element={}),its.element.createDocumentFragmentFromString=function(t){var n=document.createDocumentFragment(),r;
if(!its.sf.Platform.isITML()){var i=document.createElement("div");
i.innerHTML=t,r=i.children;
var s=r.length;
for(var o=0;
o<s;
o++)n.appendChild(r[0])}else if(its.string.compareNumerically(its.sf.Client.version(),"8.0")>=0)n.innerXML=t;
else{t="<placeholder>"+t+"</placeholder>",i=(new DOMParser).parseFromString(t,"text/xml"),r=i.firstChild.children;
for(var o=0;
o<r.length;
o++){var u=r.item(o);
document.adoptNode(u),n.appendChild(u)}}return its&&its.Template&&its.sf.Platform.isITML()&&its.Template.queryForITSElements(n),n},its.element.createElementFromString=function(t){var n=its.element.createDocumentFragmentFromString(t),r=n.childNodes;
return r.length>0?(r.length>1&&window.console&&console.warn("its.element.createElementFromString: multiple elements were created, but only the first will be returned"),r.item(0)):null},its.element.setAttributes=function(t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&t.setAttribute(r,n[r])},its.element.getScrollTop=function(e){return e==window?window.scrollY:e.scrollTop},its.element.getScrollLeft=function(e){return e==window?window.scrollX:e.scrollLeft},its.element.getClientHeight=function(e){return e==window?window.innerHeight:e.clientHeight},its.element.getClientWidth=function(e){return e==window?window.innerWidth:e.clientWidth},its.element.getScrollHeight=function(e){return e==window?window.pageYOffset:e.scrollHeight},its.element.getScrollWidth=function(e){return e==window?window.pageXOffset:e.scrollWidth},its.element.getOffsetHeight=function(e){return e==window?document.body.offsetHeight:e.offsetHeight},its.element.getOffsetWidth=function(e){return e==window?document.body.offsetWidth:e.offsetWidth},window.its.geometry||(window.its.geometry={}),its.geometry.doesRectIntersectRect=function(t,n){var r=!0;
return t.right<n.left?r=!1:t.left>n.right?r=!1:t.bottom<n.top?r=!1:t.top>n.bottom&&(r=!1),r},its.geometry.Orientation={VERTICAL:1,HORIZONTAL:2},window.its.array||(window.its.array={}),its.array.arrayOfPrimitivesAsSet=function(t){if(t==null)return null;
var n={};
for(var r=0;
r<t.length;
r++){var i=t[r];
switch(typeof i){case"boolean":case"number":case"string":n[i]=!0;
break;default:throw"its.array.asSet: array contains non primitive element"}}return n},its.array.pushAll=function(t,n){t.push.apply(t,n)},its.array.insertArray=function(e,t,n,r){var i=e[n];
return e[n]="temp",e[n]=i,r&&e.splice(n,t.length),e.splice.apply(e,[n,0].concat(t)),e},window.its.string||(window.its.string={}),its.string.startsWith=function(t,n,r){var i=!1;
return t&&n&&(t=t.substr(0,n.length),r&&(t=t.toLowerCase(),n=n.toLowerCase()),i=t.indexOf(n)===0),i},its.string.endsWith=function(t,n,r){var i=!1;
if(t){r&&(t=t.toLowerCase(),n=n.toLowerCase());
var s=t.length-n.length;
i=s>=0&&t.lastIndexOf(n)===s}return i},its.string.pad=function(t,n,r){var i=t+="";
r=r||"0";
if(i.length<n){var s=n-i.length,o=[];
for(var u=s;
u>0;
u--)o.push(r);
i=o.join("")+i}return i},its.string.replace=function(e,t,n){return e?(typeof e!="string"&&(e+=""),e.split(t).join(n)):e},its.string.whitespace="	\n\f\r Â âââââââââââã\u2028\u2029â",its.string._whitespaceTrimStartRegex=new RegExp("^["+its.string.whitespace+"]+"),its.string._whitespaceTrimEndRegex=new RegExp("["+its.string.whitespace+"]+$"),its.string.trim=function(t,n,r){var i=null;
if(t)if(!r&&(!n||n==its.string.whitespace)&&t.trim)i=t.trim();
else{var s=null,o=null,u=null;
its.isDefinedNonNull(n)?(n=n.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1"),s="["+n+"]",o=new RegExp("^"+s+"+"),u=new RegExp(s+"+$")):(s=its.string.whitespace,o=its.string._whitespaceTrimStartRegex,u=its.string._whitespaceTrimEndRegex);
var a=t.replace(o,"");
i=a.replace(u,"")}return i},its.string.splitTrimmed=function(t,n,r){var i=t.split(n);
if(i)for(var s=0;
s<i.length;
s++)i[s]=its.string.trim(i[s],r);
return i},its.string.xmlEscape=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};
return function(t){var n=t;
return n&&(n+="",n=n.replace(/[&<>"']/g,function(t){return e[t]})),n}}(),its.string.xmlUnescape=function(t){return t.replace(/&apos;/g,String.fromCharCode(39)).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},its.string.htmlUnescape=function(t){var n=document.createElement("textarea");
n.innerHTML=t.replace(/</g,"&lt;").replace(/>/g,"&gt;");
var r=n.value;
return n.remove(),r},its.string.contains=function(t,n){return t&&t.indexOf(n)>-1},its.string.urlDecode=function(t){var n=t;
return t&&(n=t.replace(/\+/g," "),n=decodeURIComponent(n)),n};
var _dateExpression=new RegExp("^([0-9]{4}/[0-9]{2}/[0-9]{2})/(.*)");
its.string.compare=function(t,n,r,i){var s=null,o=1;
r&&(o=-1);
var u=_dateExpression.exec(t),a=_dateExpression.exec(n);
u&&a&&(u[1]==a[1]?(t=u[2],n=a[2]):(s=u[1]>a[1]?1:-1,i&&(o=-1)));
if(!s){var f=parseFloat(t),l=parseFloat(n);
if(!isNaN(f)&&!isNaN(l)&&f!=l)s=f-l;
else{var c=t.toLowerCase(),h=n.toLowerCase();
if(c<h)s=-1;
else if(c>h)s=1;
else{s=0;
for(var p=0;
!s&&p<t.length;
p++){var d=t.charAt(p),v=n.charAt(p);
d<v?s=1:d>v&&(s=-1)}}}}return s*=o,s},its.string.compareNumerically=function(e,t){if(!e&&!t)return 0;
if(!e)return-1;
if(!t)return 1;
var n="0123456789",r=0,i=0;
while(r<e.length||i<t.length){var s=e[r],o=t[i];
if(!o)return 1;
if(!s)return-1;
var u=n.indexOf(s)>=0,a=n.indexOf(o)>=0;
if(u&&a){var f=its.string._getNumberFromBeginningOfString(e,r),l=its.string._getNumberFromBeginningOfString(t,i);
if(parseInt(f,10)<parseInt(l,10))return-1;
if(parseInt(f,10)>parseInt(l,10))return 1;
r+=f.length,i+=l.length}else{if(s<o)return-1;
if(s>o)return 1;
r++,i++}}return 0},its.string._getNumberFromBeginningOfString=function(e,t){var n="0123456789";
for(var r=t;
r<e.length;
r++)if(n.indexOf(e[r])<0)break;return e.substring(t,r)},its.string.toInt=function(t){return parseInt(t,10)},its.string.isJson=function(t){var n=!1;
if(!its.isEmpty(t)){var r=t.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");
n=/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(r)}return n},its.string.evalJson=function itsStringEvalJson(aString){try{if(its.string.isJson(aString))return eval("("+aString+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+aString)},its.string.allAlphaNumerics="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",its.string.randomAlphaNumericString=function(t){var n="";
for(var r=0;
r<t;
r++)n+=its.string.allAlphaNumerics[Math.floor(its.string.allAlphaNumerics.length*Math.random())];
return n},its.string.generateUuid=function(t,n){var r=null,i=(new Date).getTime()+"";
n||(n=6),t||(t=i.length+n);
if(n>t)throw new Error("its.string.generateUuid cannot generate a string with more random numbers than the max requested string length");
var s=t-n;
return s<i.length&&(i=i.substring(i.length-s)),r=i+its.string.randomAlphaNumericString(n),r},its.string.UUIDv4=function b(e){return e?(e^Math.random()*16>>e/4).toString(16):([1e7]+ -1e3+ -4e3+ -8e3+ -1e11).replace(/[018]/g,b)},its.string.unstringify=function(t){var n=t;
return t!=null&&its.isDefined(t)&&(n=="false"?n=!1:n=="true"?n=!0:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/.test(n)&&(isFinite(parsedNumber=parseFloat(n))?n=parsedNumber:isFinite(parsedNumber=parseInt(n,10))&&(n=parsedNumber))),n},its.string.capitalizeString=function(e){if(e&&e.length>0)return e.charAt(0).toUpperCase()+e.substr(1)},window.its.reflect||(window.its.reflect={}),its.reflect.keys=function keys(e){var keys=[];
for(var t in e)e.hasOwnProperty(t)&&!its.isFunction(e[t])&&keys.push(t);
return keys},its.reflect.hasAnyKeys=function(t){for(var n in t)if(t.hasOwnProperty(n))return!0},its.reflect.hasAnyNonNullKeys=function(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!0},its.reflect.values=function values(e){var values=[];
for(var t in e){var n=e[t];
e.hasOwnProperty(t)&&!its.isFunction(n)&&values.push(n)}return values},its.reflect.methods=function methods(e){var methods=[];
for(var t in e){var n=e[t];
e.hasOwnProperty(t)&&its.isFunction(n)&&methods.push(n)}return methods},its.reflect.copyKeysAndValues=function(t,n){if(t)for(var r in t){var i=t[r];
t.hasOwnProperty&&t.hasOwnProperty(r)&&!its.isFunction(i)&&(n[r]=i)}},its.reflect.invert=function(e){var t={};
for(var n in e)e.hasOwnProperty(n)&&!its.isFunction(e[n])&&(t[e[n]]=n);
return t},window.its.url||(window.its.url={}),its.url.parentDomainWithNumComponents=function(t,n){var r=t;
if(t&&t!=""){var i=t.split("."),s=i.length;
if(s>=n){r="";
while(n)r+=i[s-n],n--,n&&(r+=".")}}return r},its.url.queryParamsDict=function(t){var n=null,r=null;
if(!t)r=window.location.search;
else{var i=t.indexOf("?");
i>=0&&(r=t.substring(i))}return r?n=its.url.parseQueryParams(r):n={},n},its.url.queryParamValue=function(t,n){var r=its.url.queryParamsDict(n);
return r[t]},its.url.parseQueryParams=function(t,n){var r={};
if(t!=null&&t.length>0){t.charAt(0)==="?"&&(t=t.substr(1));
var i=t.indexOf("#");
i!==-1&&(t=t.substr(0,i));
var s=t.split("&");
for(var o=0;
o<s.length;
o++){var u=s[o].split("=");
if(u.length==2){var a=u[1];
n||(a=its.string.urlDecode(a)),r[u[0]]=a}}}return r},its.url.hashParamValue=function(t,n){var r=its.url.hashAnchorParamsDict(n);
return r[t]},its.url.hashAnchorParamsDict=function(t){var n,r={};
if(!t)n=window.location.hash;
else{var i=t.indexOf("#");
i>=0&&(n=t.substring(i))}return n&&(r=its.url.parseHashAnchorParams(n)),r},its.url.parseHashAnchorParams=function(t){var n={};
t||(t=window.location.hash);
if(t!=null&&t.length>0){t.charAt(0)==="#"&&(t=t.substr(1));
var r=t.split(";");
for(var i=0;
i<r.length;
i++){var s=r[i].split("=");
if(s.length==2){var o=its.string.urlDecode(s[1]);
n[s[0]]=o}else n[r[i]]=""}}return n},its.url.parseHostname=function(t){var n="";
if(t){t=t.toString();
if(t&&t.indexOf("://")>0){var r=t.indexOf("://")+3,i=t.indexOf("/",r);
i===-1&&(i=t.length),n=t.substring(r,i)}}return n},its.url.parseUrlScheme=function(t){var n="";
if(t){t=t.toString();
if(t&&t.indexOf("://")>0){var r=t.indexOf("://");
r===-1&&(r=t.length),n=t.substring(0,r)}}return n},its.url.changeUrlScheme=function(t,n){var r="";
if(t&&n){t=t.toString();
if(t){var i=its.url.parseUrlScheme(t);
r=t.replace(i,n)}}return r},its.url.finalPathComponent=function(t){var n="";
if(t){t=t.toString();
if(t&&t!=""){var r=t.lastIndexOf("/");
if(r==t.length-1&&r>0)var r=t.lastIndexOf(r-1);
r!=t.length-1&&(n=t.substring(r+1)),(r=n.lastIndexOf("/"))!=-1&&(n=n.substring(0,r)),(r=n.lastIndexOf("?"))!=-1&&(n=n.substring(0,r))}}return n},its.url.buildUrlFromMap=function(e){var t=[];
for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];
typeof r!="undefined"&&r!=null&&t.push(n+"="+encodeURIComponent(r))}return t.join("&")},its.url.appendUrlParameter=function(t,n,r){var i={};
return i[n]=r,its.url.appendUrlParameters(t,i)},its.url.appendUrlParameters=function(t,n){if(!n)return t;
var r=its.url.queryParamsDict(t);
for(var i in n)r[i]=n[i];
var s=its.url.buildUrlFromMap(r);
return its.url.appendUrlParametersString(its.url.baseUrl(t),s)},its.url.appendUrlParametersString=function(t,n){t||(t="");
if(!n)return t;
var r=t.indexOf("?")===-1?"?":"&";
return t+=r+n,t},its.url.encodeURIAndComponents=function(e){var t=its.url.queryParamsDict(e),n=encodeURI(its.url.baseUrl(e)),r=[];
for(var i in t)r.push(encodeURIComponent(i+"="+t[i]));
return its.url.appendUrlParametersString(n,r.join("&"))},its.url.baseUrl=function(t){if(typeof t=="string"){var n=t.indexOf("?");
if(n===-1){n=t.indexOf("#");
if(n===-1)return t}return t.substring(0,n)}},its.url.originalLocationQueryParams=its.url.queryParamsDict(),its.url.originalLocationHashAnchorParams=its.url.parseHashAnchorParams(),its.url.formRedirect=function(t,n,r){var i=document.createElement("form");
i.method=r?"post":"get",i.target=t,i.action=n,document.body.appendChild(i),i.submit()},its.url.openExternalUrl=function(t,n){var r=document.createElement("a");
r.setAttribute("href",t),n=="main"?r.setAttribute("target",n):r.setAttribute("target","_blank");
var i=document.createEvent("MouseEvents");
i.initMouseEvent("click",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(i)},window.its.cookies||(window.its.cookies={}),its.cookies.EXPIRE_NOW=-1,its.cookies.EXPIRE_SESSION=null,its.cookies.EXPIRE_ONE_SECOND=1,its.cookies.EXPIRE_ONE_MINUTE=its.cookies.EXPIRE_ONE_SECOND*60,its.cookies.EXPIRE_ONE_HOUR=its.cookies.EXPIRE_ONE_MINUTE*60,its.cookies.EXPIRE_ONE_DAY=its.cookies.EXPIRE_ONE_HOUR*24,its.cookies.EXPIRE_ONE_WEEK=its.cookies.EXPIRE_ONE_DAY*7,its.cookies.EXPIRE_ONE_MONTH=its.cookies.EXPIRE_ONE_DAY*31,its.cookies.EXPIRE_SIX_MONTHS=its.cookies.EXPIRE_ONE_MONTH*6-5,its.cookies.EXPIRE_ONE_YEAR=its.cookies.EXPIRE_ONE_DAY*365,its.cookies.EXPIRE_ONE_SIDEREAL_YEAR=its.cookies.EXPIRE_ONE_DAY*365.25,its.cookies.EXPIRE_SIX_MONTHS=its.cookies.EXPIRE_ONE_DAY*180,its.cookies.set=function(t,n,r,i,s){return n&&(n=escape(n)),its.cookies.setUnescaped(t,n,r,i,s)},its.cookies.get=function(t){var n=its.cookies.getUnescaped(t);
return n&&(n=unescape(n)),n},its.cookies.setUnescaped=function(t,n,r,i,s){var o;
i||(i="/");
var u=null;
r&&(u=new Date,u.setTime(u.getTime()+r*1e3));
if(its.sf.Platform&&its.sf.Platform.isITML()){var a={name:t,value:n,path:i,domain:s?s:"",expires:u};
o=its.cookies._setRaw(a)}else{var f=u?u.toUTCString():"",l=s?" domain="+s:"",c=t+"="+n+"; expires="+f+"; path="+i+";"+l;
its.cookies._debugAndUnitTestLastRawSetCookieString=c;
var h=r==void 0||r==its.cookies.EXPIRE_SESSION||r==0,p="sf6"in its&&"Platform"in its.sf6&&its.sf.Platform.device();
if(p&&(h||r<0)){var d=document.cookie=c;
if(h)return d}o=its.cookies._setRaw(c)}return o},its.cookies.getUnescaped=function(t){var n=null,r=its.cookies._debugAndUnitTestCookieGetterWithRawCookieStringOverride||its.cookies._getRaw();
if(r&&t){its.cookies._debugAndUnitTestCookieGetterWithRawCookieStringOverride=null;
var i=r.split(";");
for(var s=i.length-1;
!n&&s>=0;
s--){var o=i[s],u=o.indexOf("=");
if(u>0)if(u+1==o.length)n="";
else{var a=its.string.trim(o.substring(0,u));
a==t&&(its.cookies._debugAndUnitTestLastRawGetCookieString=o,n=its.string.trim(o.substring(u+1)))}}}return n},its.cookies.remove=function(t,n){return its.cookies.setUnescaped(t,".",its.cookies.EXPIRE_NOW,null,n)},"iTunes"in window&&"cookie"in iTunes?its.cookies._cookieOwner="iTunes":typeof itms!="undefined"&&typeof itms.cookie!="undefined"?its.cookies._cookieOwner="itms":its.cookies._cookieOwner="document",its.cookies._setRaw=function(e){return window[this._cookieOwner].cookie=e},its.cookies._getRaw=function(){return window[this._cookieOwner].cookie||""},window.iTSLocalization||(iTSLocalization={}),window.iTSLocalization._strings||(iTSLocalization._strings={}),iTSLocalization.hasLocalizedValue=function(t){var n=iTSLocalization._strings[t];
return its.isDefined(n)},its.loc=function(e,t){var n=iTSLocalization._strings[e];
return typeof n=="undefined"&&(n=e),t&&(n=iTSLocalization.replaceTokens(n,t)),typeof itms=="undefined"&&(n=iTSLocalization.replaceMarkupTokens(n,t)),n},its.locDate=function(e){if(!e)return"";
var t=e.length,n;
if(t>10)n=new Date(e);
else{var r=t>=4?e.slice(0,4):0,i=t>=7?e.slice(5,7):1,s=t>=10?e.slice(8,10):1;
n=new Date(r,i-1,s)}return formatDate(n)},its.locTimeAgo=function(e){if(!e)return"";
var t=e.length,n;
if(t>10)n=new Date(e);
else{var r=t>=4?e.slice(0,4):0,i=t>=7?e.slice(5,7):1,s=t>=10?e.slice(8,10):1;
n=new Date(r,i-1,s)}var o=Math.floor((new Date-n)/1e3),u=Math.floor(o/31536e3);
if(u>1)return its.loc("DV14.TimeAgo.YearsAgo",{time:u});
if(u==1)return its.loc("DV14.TimeAgo.YearAgo",{time:u});
u=Math.floor(o/86400);
if(u>=7){var a=its.locMonthFormatsShort();
return its.loc(a[n.getMonth()],{day:n.getDate()})}if(u>1){var f=its.locWeekdaysShort();
return its.loc(f[n.getDay()])}return u=Math.floor(o/3600),u==1?its.loc("DV14.TimeAgo.HourAgo",{time:u}):u>1?its.loc("DV14.TimeAgo.HoursAgo",{time:u}):its.loc("DV14.TimeAgo.JustNow")},its.secondsAgo=function(e){if(!e)return 0;
var t=e.length,n;
if(t>10)n=new Date(e);
else{var r=t>=4?e.slice(0,4):0,i=t>=7?e.slice(5,7):1,s=t>=10?e.slice(8,10):1;
n=new Date(r,i-1,s)}var o=Math.floor((new Date-n)/1e3);
return o},its.locWeekdaysShort=function(){var e=["DV14.Weekday.Short.Sunday","DV14.Weekday.Short.Monday","DV14.Weekday.Short.Tuesday","DV14.Weekday.Short.Wednesday","DV14.Weekday.Short.Thursday","DV14.Weekday.Short.Friday","DV14.Weekday.Short.Saturday"];
return e},its.locMonthFormatsShort=function(){var e=["DV14.MonthFormat.Short.January","DV14.MonthFormat.Short.February","DV14.MonthFormat.Short.March","DV14.MonthFormat.Short.April","DV14.MonthFormat.Short.May","DV14.MonthFormat.Short.June","DV14.MonthFormat.Short.July","DV14.MonthFormat.Short.August","DV14.MonthFormat.Short.September","DV14.MonthFormat.Short.October","DV14.MonthFormat.Short.November","DV14.MonthFormat.Short.December"];
return e},its.locWithMarkupTokens=function(e,t){return iTSLocalization.replaceMarkupTokens(its.loc(e,t),t)},iTSLocalization._strings._showLocKeys&&(its.loc=function(e){return"+"+e+"+"}),its.locWithCount=function(e,t,n){var r=null,i,s;
return t==0&&(i=e+"."+"zero",iTSLocalization.hasLocalizedValue(i)&&(r=i)),r===null&&(r=e,s=iTSLocalization.pluralCategory(t),s!=="other"&&(i=e+"."+s,iTSLocalization.hasLocalizedValue(i)&&(r=i))),n||(n={}),its.isDefined(n.count)||(n.count=its.formatNumber(t)),its.loc(r,n)},iTSLocalization.replaceTokens=function(t,n){if(n)for(var r in n)if(n.hasOwnProperty(r)){var i="@@"+r+"@@";
t=its.string.replace(t,i,n[r])}return t},iTSLocalization.markupParams={nbsp:"&nbsp;",gt:"&gt;",lt:"&lt;",copy:"Â©"},iTSLocalization.replaceMarkupTokens=function(t,n){if(t.indexOf("##")>-1){if(n)for(var r in n)iTSLocalization.markupParams[r.toString()]=n[r];
for(var i in iTSLocalization.markupParams){var s="##"+i+"##";
t=t.replace(new RegExp(s,"gi"),iTSLocalization.markupParams[i])}t=t.replace(/##([^##]+)##/gi,"<$1>")}return t},iTSLocalization.localizedResourceUrlForPathKey=function(t,n){n===undefined&&(n=/https:/.test(window.location.protocol));
var r=n?"https://s.mzstatic.com":"http://r.mzstatic.com";
return r+its.loc(t)},typeof itms!="undefined"&&typeof formatNumber!="undefined"?its.formatNumber=function(e){return formatNumber(Number(e))}:its.formatNumber=function(e){if(typeof iTSLocalization.decimalSeparator=="undefined"){var t=iTSLocalization._strings._decimalSeparator;
typeof t=="undefined"&&(t="."),iTSLocalization.decimalSeparator=t,t=iTSLocalization._strings._thousandsSeparator,typeof t=="undefined"&&(t=","),iTSLocalization.thousandsSeparator=t}var n=parseFloat(e).toString().split("."),r=iTSLocalization.thousandsSeparator,i=n[0].split("");
for(var s=i.length-3;
s>0;
s-=3)i.splice(s,0,r);
n[0]=i.join("");
var o=n.join(iTSLocalization.decimalSeparator);
return o},iTSLocalization._pluralCategoryDefault=function(e){return"other"},iTSLocalization._pluralCategoryOne=function(e){return e==1?"one":"other"},iTSLocalization._pluralCategoryArabic=function(e){var t=e>>0;
if(t!=e)return"other";
if(t===0)return"zero";
if(t===1)return"one";
if(t===2)return"two";
var n=t%100;
return n>=11?"many":n>=3?"few":"other"},iTSLocalization._pluralCategoryFrench=function(e){return e<2&&e>=0?"one":"other"},iTSLocalization._pluralCategoryHebrew=function(e){var t=e>>0;
if(t!=e)return"other";
if(t===1)return"one";
if(t===2)return"two";
var n=t%10;
return n==0&&t>10?"many":"other"},iTSLocalization._pluralCategoryPolish=function(e){var t=e>>0;
if(t!=e)return"other";
if(t===1)return"one";
var n=t%10;
if(n<=4&&n>=2){var r=t%100;
if(r>14||r<12)return"few"}return"many"},iTSLocalization._pluralCategoryRomanian=function(e){var t=e>>0;
if(t!=e)return"few";
if(t===0)return"few";
if(t===1)return"one";
var n=e%100;
return n<=19&&n>=1?"few":"other"},iTSLocalization._pluralCategoryRussian=function(e){var t=e>>0;
if(t!=e)return"other";
var n=t%10;
if(n>=5||n==0)return"many";
var r=t%100;
return r<=14&&r>=11?"many":n==1?"one":"few"},iTSLocalization._pluralCategoryFnByLanguage={zh:iTSLocalization._pluralCategoryDefault,id:iTSLocalization._pluralCategoryDefault,ja:iTSLocalization._pluralCategoryDefault,ko:iTSLocalization._pluralCategoryDefault,ms:iTSLocalization._pluralCategoryDefault,th:iTSLocalization._pluralCategoryDefault,vi:iTSLocalization._pluralCategoryDefault,en:iTSLocalization._pluralCategoryOne,ca:iTSLocalization._pluralCategoryOne,da:iTSLocalization._pluralCategoryOne,nl:iTSLocalization._pluralCategoryOne,de:iTSLocalization._pluralCategoryOne,el:iTSLocalization._pluralCategoryOne,fi:iTSLocalization._pluralCategoryOne,hu:iTSLocalization._pluralCategoryOne,it:iTSLocalization._pluralCategoryOne,nb:iTSLocalization._pluralCategoryOne,no:iTSLocalization._pluralCategoryOne,pt:iTSLocalization._pluralCategoryOne,es:iTSLocalization._pluralCategoryOne,sv:iTSLocalization._pluralCategoryOne,tr:iTSLocalization._pluralCategoryOne,ar:iTSLocalization._pluralCategoryArabic,fr:iTSLocalization._pluralCategoryFrench,iw:iTSLocalization._pluralCategoryHebrew,pl:iTSLocalization._pluralCategoryPolish,ro:iTSLocalization._pluralCategoryRomanian,ru:iTSLocalization._pluralCategoryRussian},iTSLocalization.pluralCategory=function(e){if(its.serverData&&its.serverData.constants){var t=iTSLocalization._pluralCategoryFnByLanguage[its.serverData.constants.languageCode];
if(t)return t(e);
if(its.Logger){var n=its.Logger.named("its-base-util");
n.error("missing plural category function for: "+its.serverData.constants.languageCode,!0)}}return"other"},its.isXMLResponse=function(e){var t,n="content-type";
try{t=e&&e.getResponseHeader(n)}catch(r){t=""}return t&&its.string.startsWith(t,"text/xml")},its.plistDictGetValue=function(t,n){if(!t)return;var r=t.childNodes.length,i=null;
for(var s=0;
s<r;
s++){var o=t.childNodes[s];
if(o.nodeType===Node.ELEMENT_NODE){if(i)return o.nodeName==="array"||o.nodeName==="dict"?o:o.textContent;
o.nodeName==="key"&&o.textContent===n&&(i=o)}}},its.plistDictRemoveValue=function(t,n){if(!t)return;var r=t.childNodes.length,i=null,s=null;
for(var o=0;
o<r;
o++){var u=t.childNodes[o];
if(u.nodeType===Node.ELEMENT_NODE){if(i){s=u;
break}u.nodeName==="key"&&u.textContent===n&&(i=u)}}i&&s&&(t.removeChild(i),t.removeChild(s))},its.plistDictAddDict=function(t,n,r){if(!t)return;var i=document.createElement("key");
i.textContent=n;
var s=document.createElement("dict");
if(r&&Array.isArray(r))for(var o=0;
o<r.length;
o++)s.appendChild(r[o]);
t.appendChild(i),t.appendChild(s)},its.plistDictAddKeyValue=function(t,n,r){if(!t)return;var i=document.createElement("key");
i.textContent=n;
var s=document.createElement("string");
s.textContent=r,t.appendChild(i),t.appendChild(s)},its.plistDictAddKeyValuePairs=function(t,n){if(!t)return;for(var r in n){if(!n.hasOwnProperty(r))continue;its.plistDictAddKeyValue(t,r,n[r])}},its._dataCache={},its.property=function(e,t){return t||(returnValue=its._dataCache[e]),returnValue==undefined&&(returnValue=its.value("its.serverData.properties",e,!0,t)),returnValue},its.pageData=function(e,t){return t||(returnValue=its._dataCache[e]),returnValue==undefined&&(returnValue=its.value("its.serverData.pageData",e,!0,t)),returnValue},its.valueOverride=function(e,t){var n;
return e&&(t||(n=its._dataCache[e]),n==undefined&&(n=its.string.unstringify(its.url.originalLocationQueryParams[e])),n==undefined&&(n=its.string.unstringify(sessionStorage.getItem(e)),n===null&&(n=undefined)),n==undefined&&(n=its.string.unstringify(localStorage.getItem(e)),n===null&&(n=undefined)),n==undefined&&window.itsv&&(n=window.itsv[e]),!t&&its.isDefined(e)&&its.isDefined(n)&&(its._dataCache[e]=n)),n},its.value=function(dataPath,key,useOverrideIfAvailable,noCache){its.value.totalCount++;
var returnValue,keyIsDefined=its.isDefined(key),cacheKey=keyIsDefined?key:dataPath;
if(its.isDefined(cacheKey)){useOverrideIfAvailable&&keyIsDefined&&(returnValue=its.valueOverride(key,noCache));
if(returnValue==undefined){its.value.cacheMissCount++,noCache||(returnValue=its._dataCache[cacheKey]);
if(returnValue==undefined){var objectAtDataPath;
try{objectAtDataPath=eval(dataPath)}catch(anException){}if(objectAtDataPath!=undefined)if(keyIsDefined){returnValue=objectAtDataPath[key];
if(returnValue==undefined)try{returnValue=eval(dataPath+"."+key)}catch(anException){}}else returnValue=objectAtDataPath}}!noCache&&its.isDefined(returnValue)&&(its._dataCache[cacheKey]=returnValue)}return returnValue},its.setPropertyOverride=function(e,t,n){return its.setValueOverride(e,t,n)},its.setPageDataOverride=function(e,t,n){return its.setValueOverride(e,t,n)},its.setValueOverride=function(e,t,n){var r=null;
e?its.isDefined(t)||(r="Invalid value"):r="Invalid key";
if(r)throw new Error(r+". Usage: set[Property|Value]Override(key, value, usePermanentStorage)");
var i=null;
delete its._dataCache[e],its.removeValueOverride(e);
var s=null;
return n?s=localStorage:s=sessionStorage,s.setItem(e,t),i=s[e],i},its.removePropertyOverride=function(e){return its.removeValueOverride(e)},its.removePageDataOverride=function(e){return its.removeValueOverride(e)},its.removeValueOverride=function(key){delete its._dataCache[key],sessionStorage.removeItem(key),localStorage.removeItem(key);
try{returnValue=eval("delete window.itsv."+key)}catch(anException){}return key},its.value.totalCount=0,its.value.cacheMissCount=0,its.flushDataCache=function(){its._dataCache={}},its.screenReaderRunning=function(){if(typeof iTunes!="undefined"){if(iTunes.hasOwnProperty("screenReaderRunning"))return iTunes.screenReaderRunning;
if(iTunes.screenReaderRunning&&typeof iTunes.screenReaderRunning=="function")return iTunes.screenReaderRunning()}return!1}(),its.sf.Events={PAGE_LOAD:"its.sf.Events.PAGE_LOAD",PAGE_UNLOAD:"its.sf.Events.PAGE_UNLOAD"},window.its||(window.its={}),its.sf||(its.sf={}),its.notifications={_subscribers:{},_unboundSubscribers:{},subscribe:function(e,t,n,r,i,s){var o=this.senderId(n)||r;
i&&(t.filter=i),s&&(t.eventGroupId=s),o?(this._subscribers[e]||(this._subscribers[e]={}),this._subscribers[e][o]||(this._subscribers[e][o]=[]),this._subscribers[e][o].push(t)):(this._unboundSubscribers[e]||(this._unboundSubscribers[e]=[]),this._unboundSubscribers[e].push(t))},senderId:function(e){var t=null;
return e&&(e.__senderId||(e.__senderId=its.notifications.createSenderId()),t=e.__senderId),t},subscribeToSender:function(e,t,n,r,i){this.subscribe(e,t,n,null,r,i)},subscribeToTarget:function(e,t,n,r,i){this.subscribe(e,t,null,n,r,i)},unsubscribe:function(e,t,n,r){var i=this.senderId(n)||r;
if(this._subscribers[e]&&this._subscribers[e][i]){var s=this._subscribers[e][i].indexOf(t);
s>=0&&this._subscribers[e][i].splice(s,1)}if(this._unboundSubscribers[e]){var s=this._unboundSubscribers[e].indexOf(t);
s>=0&&this._unboundSubscribers[e].splice(s,1)}},publish:function(e,t,n,r,i){var s=this.senderId(n)||r,o=t||{};
o.eventInfo={name:e,sender:n,targetId:r};
var u=function(e){return e.eventGroupId==i};
if(this._subscribers[e]){var a=i&&this._subscribers[e][s]?this._subscribers[e][s].filter(u):this._subscribers[e][s];
this._sendNotification(e,a,o)}var f=i&&this._unboundSubscribers[e]?this._unboundSubscribers[e].filter(u):this._unboundSubscribers[e];
this._sendNotification(e,f,o)},publishToSender:function(e,t,n){this.publish(e,t,n,null)},publishToTarget:function(e,t,n){this.publish(e,t,null,n)},publishToEventGroup:function(e,t,n){this.publish(e,t,null,null,n)},remove:function(e){this._subscribers[e]&&delete this._subscribers[e],this._unboundSubscribers[e]&&delete this._unboundSubscribers[e]},removeEventGroup:function(e){var t=function(t){return t.eventGroupId!=e};
for(var n in this._subscribers){var r=this._subscribers[n];
for(var i in r){var s=r[i],o=s.filter(t);
o.length?this._subscribers[n][i]=o:delete this._subscribers[n][i]}}for(var n in this._unboundSubscribers){var u=this._unboundSubscribers[n],o=u.filter(t);
o.length?this._unboundSubscribers[n]=o:delete this._unboundSubscribers[n]}},getEventGroupSubscribers:function(e){var t={},n={};
for(var r in this._subscribers){var i=this._subscribers[r];
for(var s in i){var o=i[s];
for(var u in o){var a=o[u];
a.eventGroupId==e&&(t[r]||(t[r]={}),t[r][s]||(t[r][s]=[]),t[r][s].push(a))}}}for(var r in this._unboundSubscribers){var f=this._unboundSubscribers[r];
for(var u in f){var a=f[u];
a.eventGroupId==e&&(n[r]||(n[r]=[]),n[r].push(a))}}return{bound:t,unbound:n}},addEventGroupSubscribers:function(e,t){if(t&&t.bound&&t.unbound){var n=t.bound,r=t.unbound;
for(var i in n){var s=n[i];
for(var o in s){var u=s[o];
for(var a in u){var f=u[a];
this.subscribeToTarget(i,f,o,f.filter,e)}}}for(var i in r){var l=r[i];
for(var a in l){var f=l[a];
this.subscribe(i,f,null,null,null,e)}}}},totalSubscriberCount:function(){var e=0;
for(var t in this._subscribers){var n=this._subscribers[t];
for(var r in n)e+=n[r].length}for(var t in this._unboundSubscribers)e+=this._unboundSubscribers[t].length;
return e},totalSubscriberCountForGroupId:function(e){var t=function(t){return t.eventGroupId==e},n=0;
for(var r in this._subscribers){var i=this._subscribers[r];
for(var s in i){var o=i[s],u=o.filter(t);
n+=u.length}}for(var r in this._unboundSubscribers){var a=this._unboundSubscribers[r],u=a.filter(t);
n+=u.length}return n},hasListeners:function(e,t,n){var r=this.senderId(t)||n;
return this._subscribers[e]&&this._subscribers[e][r]||this._unboundSubscribers[e]?!0:!1},_sendNotification:function(e,t,n){if(t)for(var r=0,i=t.length;
r<i;
r++){var s=t[r];
if(s){var o=s.filter;
(!o||o(n))&&s(n)}}}},its.notifications.createSenderId=function(){var e=0;
return function(){var t="senderId"+e;
return e++,t}}(),its.sf.DelayedCallQueue.objectReady("its.notifications"),window.its||(window.its={}),window.its.ui||(window.its.ui={}),its.ui.Constants={},its.ui.Constants.SRC_ATTRIBUTE_KEY="src",its.ui.Constants.SRC_SWAP_ATTRIBUTE_KEY_PREFIX="src-swap-",its.ui.Attributes={},its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY="src-swap",its.ui.Attributes.SRC_LOAD_MANUAL_ON_DEMAND_MODIFIER_ATTRIBUTE_KEY="src-load-manual-on-demand",its.ui.Attributes.SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY="src-load-auto-after-dom-load",its.ui.Attributes.SRC_LOAD_AUTO_AT_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY="src-load-auto-at-page-load",its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY="src-load-auto-after-page-load",its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_IF_NOT_ONSCREEN_MODIFIER_ATTRIBUTE_KEY="src-load-auto-after-page-load-if-not-onscreen",its.ui.Selectors={},its.ui.Selectors.SRC_SWAP_SELECTOR="img["+its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY+"]",its.ui.Debug={},its.ui.Debug.SRC_WAS_FORCED_ATTRIBUTE_KEY="src-was-force-unhidden",its.ui.Debug.SRC_WAS_DELAYED_ATTRIBUTE_KEY="src-was-delayed",its.ui.Debug.SRC_WAS_INTENTIONALLY_LEFT_UNSET="src-was-intentionally-left-unset",its.ui.Debug.SRC_WAS_AUTO_DELAYED_ATTRIBUTE_KEY="src-was-auto-delayed-with-onscreen-test",its.ui.Debug.SRC_WAS_DELAYED_FOR_SWAPPING_ATTRIBUTE_KEY="src-was-delayed-for-swapping",its.ui.Debug.SRC_WAS_SWAPPED_ATTRIBUTE_KEY="src-was-swapped",its.ui.setDebugAttribute=function(t,n,r){its.kit&&its.kit.isDebugEnabled()&&t.setAttribute(n,r)},its.ui.isImageComplete=function(t){var n=t.complete&&t.src&&!its.contains(t.src,"/p.png");
return n=t.complete&&t.src,n},its.ui.hiddenImagesWithAncestor=function(t){var n=null;
return!t||!t.querySelectorAll?its.client.log("error calling its.ui.hiddenImagesWithAncestor for element: "+t):n=t.querySelectorAll(its.ui.Selectors.SRC_SWAP_SELECTOR),n},its.ui.unhideImages=function(t,n,r){t&&t.each(function(t){var i=t.getAttribute(its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY),s=i&&(n||t.getAttribute(its.ui.Attributes.SRC_LOAD_MANUAL_ON_DEMAND_MODIFIER_ATTRIBUTE_KEY)!=null||its.kit.domLoaded()&&t.getAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY)!=null||its.kit.pageLoaded()&&t.getAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AT_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY)!=null||its.kit.afterPageLoaded()&&t.getAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY)!=null);
if(s){var o=null;
for(var u in its.ui.Attributes){var a=its.ui.Attributes[u];
!o&&a!=its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY&&t.getAttribute(a)!=null&&(o=a),t.removeAttribute(a)}o||(o="true"),its.ui.setDebugAttribute(t,its.ui.Debug.SRC_WAS_DELAYED_ATTRIBUTE_KEY,o);
var f=!1;
if(its.property("sfdImageLeaveSrcBlankForTimingTestsForLoadType")){var l=its.propertys("sfdImageLeaveSrcBlankForTimingTestsForLoadType");
f=l&&l.toLowerCase()=="all",f||(f=l==o);
if(!f){var c=its.property("sfdImageLeaveSrcBlankForTimingTestsForLoadType")==its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_IF_NOT_ONSCREEN_MODIFIER_ATTRIBUTE_KEY;
f=t.getAttribute(its.ui.Debug.SRC_WAS_AUTO_DELAYED_ATTRIBUTE_KEY)&&c&&o==its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY}}f?(its.client.log("image src is null"),its.ui.setDebugAttribute(t,its.ui.Debug.SRC_WAS_INTENTIONALLY_LEFT_UNSET,"true")):(its.ui.markImageCompleteAfterLoad(t),t.src=i),n&&its.ui.setDebugAttribute(t,its.ui.Debug.SRC_WAS_FORCED_ATTRIBUTE_KEY,"true"),r&&r(t)}})},its.ui.unhideImagesWithAncestor=function(t,n,r){its.ui.unhideImages(its.ui.hiddenImagesWithAncestor(t),n,r)},its.ui.markImageCompleteAfterLoad=function(t){if(!its.ui.isImageComplete(t)){var n=function(){this.addClassName("complete")};
t.addEventListener("load",n),t.addEventListener("error",n),t.addEventListener("abort",n)}else t.addClassName("complete")},its.ui.markImagesCompleteAfterLoad=function(t){t.each(function(e){its.ui.markImageCompleteAfterLoad(e)})},its.ui.markImagesWithAncestorCompleteAfterLoad=function(t){if(!t||!t.querySelectorAll){its.client.log("error calling its.ui.markImagesWithAncestorCompleteAfterLoad for rootElement");
return}var n=t.querySelectorAll("img[src]:not(.complete)");
its.ui.markImagesCompleteAfterLoad(n)},its.ui.baseImagePath=function(t){var n=document.querySelector("meta[name='resource-image-path']");
if(n){var r=n.getAttribute("content");
return t&&r.indexOf("/"+t+"/")==-1&&(r=r.replace(/\/[^\/]+\/images\//,"/"+t+"/images/")),r}return null},its.ui.pathForImage=function(t,n){var r=its.ui.baseImagePath(t);
return r!=null?r+n:n},its.ui.fadeOutAndRemoveFromDom=function(e){e&&(e.style.webkitTransitionProperty="opacity",e.style.webkitTransitionDuration="0.5s",setTimeout(function(){e.style.opacity="0"},0),setTimeout(function(){e.parentElement.removeChild(e)},500))},window.its||(window.its={}),its.x||(its.x={}),its.x.element||(its.x.element={}),its.x.element.logger=function(){return its.x.element.loggerInstance?its.x.element.loggerInstance:(window.ITSLogger&&ITSLogger.level?its.x.element.loggerInstance=new ITSLogger("ITSXBaseElement"):its.Logger&&(its.x.element.loggerInstance=its.Logger.named("ITSXBaseElement")),its.x.element.loggerInstance)},its.rootResourcesPathFromCssFilename=function(t){var n=null;
for(var r=0;
!n&&r<document.styleSheets.length;
r++){var i=document.styleSheets[r];
if(i.href){var s=i.href.indexOf("stylesheets/"+t);
s==-1&&(s=i.href.indexOf(t)),s!=-1&&(n=i.href.substring(0,s))}}return n},its.imagesPath=function(t){var n=null,r=its.rootResourcesPathFromCssFilename(t);
return r&&(n=r+"images/"),n},its.x.uniquifyId=function(t){var n=t,r=100;
do n=t+"-"+r++;
while(document.getElementById(n));
return n},its.x.removeClassNames=function(t,n){for(var r=0;
r<t.length;
r++)its.x.element.removeClassName(t[r],n)},its.x.element._printAll=function(){for(var t in its.x.element){var n=its.x.element[t],r=its.dev.parseFunctionArgsToArray(n),i=r.shift(),s=r.join(", ");
console.log("Element.prototype."+t+"("+s+")")}},its.x.element.altTag=function(t){return t.getAttribute("alt")},its.x.element.isOverflowing=function(t){var n=its.x.element.getComputedStyleProperty(t,"overflow");
if(!n||n==="visible")t.style.overflow="hidden";
var r=t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight;
return r},its.x.element.isShowingEllipsis=function(t){var n=its.x.element.isOverflowing(t),r="ellipsis",i="532",s=its.webkitVersion();
its.webkitVersionCompare(s,i)>0&&(r=its.x.element.getComputedStyleProperty(t,"text-overflow"));
var o=r=="ellipsis";
return n&&o},its.x.element.getAttributesStartingWith=function(t,n){var r=null;
for(var i=0;
i<t.attributes.length;
i++){var s=t.attributes.item(i).nodeName;
its.string.startsWith(s,n)&&(r==null&&(r=[]),r.push(s))}return r},its.x.element.removeAttributes=function(t,n){if(n)for(var r=0;
r<n.length;
r++)t.removeAttribute(n[r])},its.x.element.removeAttributesStartingWith=function(t,n){var r=its.x.element.getAttributesStartingWith(t,n);
its.x.element.removeAttributes(t,r)},its.x.element.getIntAttribute=function(t,n){var r=t.getAttribute(n);
return r!=null&&(r=its.string.toInt(r)),r},its.x.element.getBooleanAttribute=function(t,n){var r=t.getAttribute(n);
return r!=null?"true"==r:!1},its.x.element.getAttributeWithDefault=function(t,n,r){var i=t.getAttribute(n);
if(i===null||i===undefined)i=r;
return i},its.x.element.getAttributeOfElementOrAncestor=function(e,t){return its.x.element.elementOrAncestorByFunction(e,function(e){return e.hasAttribute(t)})},its.x.element.getAttributeValuesOfChildren=function(t,n){var r=[];
for(var i=0;
i<t.children.length;
i++){var s=t.children[i].getAttribute(n);
s&&r.push(s)}return r},its.x.element.hasClassName=function(t,n){return(new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)")).test(t.className)},its.x.element.hasClassNames=function(t,n){for(var r=0;
r<n.length;
r++)if(!its.x.element.hasClassName(t,n[r]))return!1;
return!0},its.x.element.addClassName=function(t,n){its.isEmpty(its.string.trim(n))||its.x.element.hasClassName(t,n)||(t.className&&t.className!=""?t.className=t.className+" "+n:t.className=n)},its.x.element.classNameStartingWith=function(t,n){var r=its.x.element.classNamesStartingWith(t,n),i=r.length?r[0]:null;
return i},its.x.element.classNamesStartingWith=function(t,n){var r=t.className.split(" "),i=[];
for(var s=0;
s<r.length;
s++)its.string.startsWith(r[s],n)&&i.push(r[s]);
return i},its.x.element.removeClassNamesStartingWith=function(t,n){var r=its.x.element.classNamesStartingWith(t,n);
if(r&&r.length)for(var i=0;
i<r.length;
i++)its.x.element.removeClassName(t,r[i])},its.x.element.removeClassName=function(t,n){if(its.x.element.hasClassName(t,n)){var r=t.className;
t.className=its.string.trim(r.replace(new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)","g")," "))}},its.x.removeClassNames=function(t,n,r){for(var i=0;
i<t.length;
i++)(!r||t[i]!=r)&&its.x.element.removeClassName(t[i],n)},its.x.element.toggleClassName=function(t,n){its.x.element[its.x.element.hasClassName(t,n)?"removeClassName":"addClassName"](t,n)},its.x.element.replaceClassName=function(t,n,r){its.x.element.removeClassName(t,n),its.x.element.addClassName(t,r)},its.x.element.getComputedStyleProperty=function(t,n){return getComputedStyle(t).getPropertyValue(n)},its.x.element.getPosition=function(t){var n=t,r=new Object;
r.left=r.top=0;
if(n.offsetParent)do r.left+=n.offsetLeft,r.top+=n.offsetTop;
while(n=n.offsetParent);
n=t;
do{if(n===document.body)break;r.left-=n.scrollLeft!=undefined?n.scrollLeft:0,r.top-=n.scrollTop!=undefined?n.scrollTop:0}while(n=n.parentNode);
return r.right=r.left+t.offsetWidth,r.bottom=r.top+t.offsetHeight,r},its.x.element.center=function(t,n){n=="fixed"?t.style.position="fixed":t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.marginTop=0,t.style.marginTop=-(its.x.element.offsetHeightPlusMargin(t)/2)+"px",t.style.marginLeft=0,t.style.marginLeft=-(its.x.element.offsetWidthPlusMargin(t)/2)+"px"},its.x.element.offsetWidthPlusMargin=function(t){return t.offsetWidth+its.x.element.marginWidth(t)},its.x.element.offsetWidthLessPadding=function(t){return t.offsetWidth-its.x.element.paddingWidth(t)},its.x.element.usableContentWidth=function(t){return t.clientWidth-its.x.element.paddingWidth(t)},its.x.element.marginWidth=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"margin-left"))+its.string.toInt(its.x.element.getComputedStyleProperty(t,"margin-right"))},its.x.element.paddingWidth=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"padding-left"))+its.string.toInt(its.x.element.getComputedStyleProperty(t,"padding-right"))},its.x.element.offsetHeightPlusMargin=function(t){return t.offsetHeight+its.x.element.marginHeight(t)},its.x.element.offsetHeightLessPadding=function(t){return t.offsetHeight+its.x.element.paddingHeight(t)},its.x.element.marginHeight=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"margin-top"))+its.string.toInt(its.x.element.getComputedStyleProperty(t,"margin-bottom"))},its.x.element.paddingHeight=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"padding-top"))+its.string.toInt(its.x.element.getComputedStyleProperty(t,"padding-bottom"))},its.x.element.lineCount=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"height"))/its.string.toInt(its.x.element.getComputedStyleProperty(t,"line-height"))},its.x.element.webkitLineClamp=function(t){return its.string.toInt(its.x.element.getComputedStyleProperty(t,"-webkit-line-clamp"))},its.x.element.isMultiLineTruncated=function(t){return its.x.element.webkitLineClamp(t)!=null&&t.clientHeight<t.scrollHeight},its.x.element.isMultiLineTruncatedK2=function(t){return its.x.element.webkitLineClamp(t)!=null&&t.clientHeight<t.scrollHeight},its.x.element.isVisible=function(t,n){var r=t,i=!0,s=null,o=null,u=null,a=null,f=its.x.element.logger(),l=!1,c=null,h=r===document;
while(i&&r&&!h){c=null,s=getComputedStyle(r);
if(s){o=s.getPropertyValue("display"),u=s.getPropertyValue("visibility"),a=s.getPropertyValue("opacity"),o==="none"?c="display":u==="hidden"?c="visibility":a=="0"&&(c="opacity");
if(c){i=!1;
var p=window.ITSLogger&&ITSLogger.level?ITSLogger.level()==ITSLogger.DEBUG:its.Logger&&f.isAnyDebugLevel?f.isAnyDebugLevel():!1;
if(p){var d=l?"ancestor.":"element.";
f.debug("isVisible: "+d+"notVisible due to "+c)}}}r=n?r.parentNode:null,r&&(l=!0)}return i},its.x.element.isOnscreen=function(t){var n=its.x.element.isVisible(t),r=its.x.element.logger();
if(n){var i=!1,s=t.getBoundingClientRect(),o={top:s.top,bottom:s.bottom,left:s.left,right:s.right,width:s.width,height:s.height},u=t.parentNode,a=parseInt(t.getAttribute("width"),10),f=parseInt(t.getAttribute("height"),10);
a&&(o.width=a,o.right=o.left+a),f&&(o.height=f,o.bottom=o.top+f);
while(u!==document&&n&&u&&!i&&its.x.element.isVisible(u)){var l=getComputedStyle(u);
if(l&&l.getPropertyValue("position")=="absolute")i=!0;
else{var c=u.getBoundingClientRect?u.getBoundingClientRect():null;
if(c){var h=!its.geometry.doesRectIntersectRect(o,c);
h&&u.style.overflow=="hidden"&&(n=!1),n||r.debug("isOnscreen: elementIsOnscreen = false due to child out of overflow:hidden ancestor")}u=u.parentNode}}if(n){var p={top:0,bottom:window.innerHeight,left:0,right:window.innerWidth};
n=its.geometry.doesRectIntersectRect(o,p),n||r.debug("isOnscreen: elementIsOnscreen = false due to element being outside of window bounds")}}else r.debug("isOnscreen: image.isVisible() = false");
return n},its.x.element.rectString=function(t,n){var r=t.getBoundingClientRect();
return n?n+=". ":n="",n+t.tagName+" - left:"+r.left+", right:"+r.right+", top:"+r.top+", bottom:"+r.bottom},its.x.element.show=function(t,n){t.style.display=n||"block";
var r=t;
setTimeout(function(){r.style.opacity="1"},0)},its.x.element.hide=function(t){var n=function(e){e.target.style.display="none",e.target.removeEventListener("webkitTransitionEnd",n,!1)};
t.style.opacity="0",its.x.element.getComputedStyleProperty(t,"-webkit-transition-duration")!=="0s"?t.addEventListener("webkitTransitionEnd",n,!1):t.style.display="none"},its.x.element.toggle=function(t,n){var r=t.style.display=="none";
return r?its.x.element.show(t,n):its.x.element.hide(t),r},its.x.element.moveToBottom=function(t){var n=t.parentNode;
n&&(its.x.element.remove(t),n.appendChild(t))},its.x.element.insertBeforeElement=function(t,n){n&&t.parentNode&&t.parentNode.insertBefore(n,t)},its.x.element.insertAfter=function(t,n){n&&t.parentNode&&t.parentNode.insertBefore(n,t.nextSibling)},its.x.element.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)},its.x.element.clear=function(t){t.innerHTML=""},its.x.element.replace=function(t,n){if(t.parentNode)return t.parentNode.replaceChild(n,t)},its.x.element.localSearch=function(t,n){var r=t,i;
do i=r.querySelectorAll(n),r=r.parentNode;
while(r&&r!=document&&i.length<1);
return i},its.x.element.elementOrAncestorByFunction=function(t,n){while(t&&t!=document){if(n(t))return t;
t=t.parentNode}return null},its.x.element.parentByAttributeName=function(t,n){return its.x.element.elementOrAncestorByFunction(t.parentNode,function(e){return e.hasAttribute(n)})},its.x.element.parentByClassName=function(t,n){return its.x.element.elementOrAncestorByFunction(t.parentNode,function(e){return its.x.element.hasClassName(e,n)})},its.x.element.parentByTagName=function(t,n){return its.x.element.elementOrAncestorByFunction(t.parentNode,function(e){return e.tagName.toLowerCase()===n.toLowerCase()})},its.x.element.parentBySelector=function(t,n){var r=document.querySelectorAll(n),s=r.length;
return its.x.element.elementOrAncestorByFunction(t,function(e){for(i=0;
i<s;
i++)if(r[i]===e)return!0;
return!1})},its.x.element.containsElement=function(t,n){return its.x.element.elementOrAncestorByFunction(n,function(e){return e===t})||!1},its.x.element.itsInnerText=function(t,n){var r=t.innerText;
return its.isEmpty(r)&&typeof t.textContent!="undefined"&&(r=t.textContent,n||(r=its.string.trim(r))),r},window.its||(window.its={}),its.files||(its.files={}),its.files["its-base-element.js"]=!0,String.prototype.toInt=function(){return its.string.toInt(this)},Number.prototype.addWithLoopingMax=function(t,n){var r=(this+t)%(n+1);
return r<0&&(r=n+r+1),r},Number.prototype.times=function(t,n){for(var r=0;
r<this;
r++)t.call(n,r)};
var EachLoopBreak="break",EachLoopContinue="continue";
(function(){var e=[NodeList,HTMLCollection,Array],t=e.length;
for(var n=0;
n<t;
n++){var r=e[n];
r.prototype.each=function i(i,e){var t=this.length;
for(var n=0;
n<t;
n++){var r=i.call(e,this[n],n);
if(r!=undefined){if(r==EachLoopBreak)break;if(r==EachLoopContinue)continue}}return this},r.prototype.except=function(t,n,r){var i=this.length;
for(var s=0;
s<i;
s++)this[s]!==t&&n.call(r,this[s],s)},r.prototype.first=function(){if(this[0])return this[0]},r.prototype.last=function(){var t=this.length-1;
if(this[t])return this[t]},r.prototype.empty=function(){return this.length==0},r.prototype.includes=function s(e){var s=!1;
return this.each(function(t){e===t&&(s=!0)}),s},r.prototype.index=function o(e){var t=this.length,o=-1;
for(var n=0;
n<t;
n++)if(this[n]===e){o=n;
break}return o},r.prototype.map||(r.prototype.map=function(t){var n=new Array;
return this.each(function(e){n.push(t(e))}),n}),r.prototype.mapAttribute=function(t){return this.map(function(e){return e[t]})},r.prototype.select=function(t){var n=new Array;
return this.each(function(e){var r=t(e);
r&&n.push(e)}),n},r.prototype.remove=function(t){if(t.each)return t.each(function(e){this.remove(e)},this),this;
var n=this.index(t);
return n>=0&&this.splice(n,1),this},r.prototype.addEventListeners=function(t,n,r){this.each(function(e){e.addEventListener(t,n,r)})},r.prototype.removeEventListeners=function(t,n,r){this.each(function(e){e.removeEventListener(t,n,r)})},r.prototype.hide=function(){this.each(function(e){e.hide()})},r.prototype.show=function(){this.each(function(e){e.show()})},r.prototype.max=function(){return Math.max.apply(Math,this)},r.prototype.min=function(){return Math.min.apply(Math,this)},r.prototype.sum=function u(){var u=0;
return this.each(function(e){u+=e}),u},r.prototype.toArray=function(){var t=new Array;
return this.each(function(e){t.push(e)}),t},r.prototype.addClassNames=function(t){this.each(function(e){e.addClassName(t)})},r.prototype.removeClassNames=function(t){this.each(function(e){e.removeClassName(t)})}}})(),Array.prototype.pushEach=function(e){var t=e.length;
for(var n=0;
n<t;
n++)this.push(e[n])},CSSStyleDeclaration.prototype.animation_transition=function(e,t,n){e=="transform"&&(e="-webkit-transform"),this.webkitTransition=e+" "+t/1e3+"s "+n},CSSStyleDeclaration.prototype.clear_animation_transition=function(e){this.animation_transition(e,0,"")},CSSStyleDeclaration.prototype.animation_translateY=function(e){this.webkitTransform="translate3d(0,"+e+",0)"},CSSStyleDeclaration.prototype.animation_translateX=function(e){this.webkitTransform="translate3d("+e+",0,0)"},CSSStyleDeclaration.prototype.topInPx=function(e){this.top=e+"px"},CSSStyleDeclaration.prototype.bottomInPx=function(e){this.bottom=e+"px"},function(){for(var e in its.x.element)Element.prototype[e]=function(e){return function(){var t=its.toArray(arguments);
return t.unshift(this),e.apply(this,t)}}(its.x.element[e])}(),window.its||(window.its={}),window.its.sf||(window.its.sf={}),its.sf.Client={_iTunesObject:function(){var e=null;
return typeof iTunes!="undefined"?e=iTunes:typeof itms!="undefined"&&(e=itms),e},_deviceObject:function(){var e=null;
return typeof Device!="undefined"&&(e=Device),e},_isRunning:function(){return its.isDefinedNonNull(this._iTunesObject())},version:function(){var e=null;
return this._iTunesObject()&&(this._iTunesObject().version?e=this._iTunesObject().version:this._iTunesObject().systemVersion&&(e=this._iTunesObject().systemVersion())),!e&&this._deviceObject()&&this._deviceObject().systemVersion&&(e=this._deviceObject().systemVersion),e},isVersion:function(e){return its.string.compareNumerically(its.sf.Client.version(),e)>=0},dsId:function(){var e=null;
return this._iTunesObject()&&(this._iTunesObject().primaryAccount?e=iTunes.primaryAccount.dsID:this._iTunesObject().getUserDSID?(e=this._iTunesObject().getUserDSID(),e=="0"&&(e=null)):its.isDefinedNonNull(this._iTunesObject().DSID)&&(e=this._iTunesObject().DSID,e=="0"&&(e=null))),e},iCloudDsid:function(){var e=null;
return this._iTunesObject()&&this._iTunesObject().appleAccountStore&&this._iTunesObject().appleAccountStore.primaryAppleAccount&&(e=this._iTunesObject().appleAccountStore.primaryAppleAccount.dsID),e},isXMLResponse:function(e){return e&&its.string.startsWith(e.getResponseHeader("content-type"),"text/xml")},findChildElementNodeAtPosition:function(e,t){if(!e)return;var n=e.childNodes.length;
if(t>=n)return;var r=0;
for(var i=0;
i<n;
i++){var s=e.childNodes[i];
if(s.nodeType===Node.ELEMENT_NODE){if(r===t)return s;
r+=1}}return null},findPositionChildElementNodeNamed:function(e,t){if(!e)return;var n=e.childNodes.length;
if(n===0)return;var r=0;
for(var i=0;
i<n;
i++){var s=e.childNodes[i];
if(s.nodeType===Node.ELEMENT_NODE){if(s.lastChild&&s.lastChild.textContent==t)return r;
r++}}return}},its.client||(its.client={}),its.client.version||(its.client.version=function(){return its.sf.Client.version()}),window.its||(window.its={}),window.its.client||(window.its.client={}),its.client.isRunning=defined("iTunes"),its.client.isTouchSupported="createTouch"in document,its.client.getPlistStringValueForKey=function(e,t){var n=e.getElementsByTagName("key");
for(var r=0;
n!=null&&r<n.length;
r++)if(n[r].textContent==t&&n[r].nextElementSibling!=null&&n[r].nextElementSibling.nodeName=="string")return n[r].nextElementSibling.textContent;
return null},its.client.isAuthDialog=function(e){return"authorization"==its.client.getPlistStringValueForKey(e,"kind")},its.client.isClientGreaterThanOrEqualToSpecifiedVersion=function(e){if(!its.client.isRunning)return!0;
var t=its.client.version();
return!t||!e?"undefined":its.string.compareNumerically(t,e)>=0},its.client.onscreenConsole=function(){return window.ITSOnScreenConsole?ITSOnScreenConsole.onScreenConsoleForObject("ITSClient"):null},its.client._logFunnel=function(t,n,r){n||(n="log");
if((r||its.x&&its.x.isIE&&its.x.isIE())&&window.ITSOnScreenConsole)its.client.onscreenConsole().log(t,n);
else if(window.console){if(console[n])return console[n](t);
var i="Error: Attempt to log with unknown level: "+n+" with message: "+t;
console.error?console.error(i):console.log&&console.log(i)}},its.client.log=function(t,n){its.client._logFunnel(t,"log",n)},its.client.error=function(t,n){its.client._logFunnel(t,"error",n)},its.client.warn=function(t,n){its.client._logFunnel(t,"warn",n)},its.client.info=function(t,n){its.client._logFunnel(t,"info",n)},its.client.debug=function(t,n,r){(r||its.dev)&&its.client._logFunnel(t,"debug",n)},its.client.findChildElementNodeAtPosition=function(e,t){if(!e)return;var n=e.childNodes.length;
if(t>=n)return;var r=0;
for(var i=0;
i<n;
i++){var s=e.childNodes[i];
if(s.nodeType===Node.ELEMENT_NODE){if(r===t)return s;
r+=1}}return null},its.client.findPositionChildElementNodeNamed=function(e,t){if(!e)return;var n=e.childNodes.length;
if(n==0)return;var r=0;
for(var i=0;
i<n;
i++){var s=e.childNodes[i];
if(s.nodeType===Node.ELEMENT_NODE){if(s.lastChild&&s.lastChild.textContent==t)return r;
r++}}return},its.client.platformIsDesktop=!0,its.client.platformIsDV=!1,its.client.getBag=function(){return its.client._bag||(its.client._bag=iTunes.getBag()),its.client._bag},its.client.showDialog=function(e,t){var n=its.client.createDialogDict(e);
its.client.doDialogWithDict(n,t)},its.client.showAlert=function(e,t){var n={message:e,explanation:t,defaultButton:"ok",okButtonString:its.loc("OK")};
its.client.showDialog(n)},its.client.showGenericErrorAlertWithErrorCode=function(e){its.client.showAlert(its.loc("Js.iTunesStoreError.Message",{errorNum:e}),its.loc("Js.iTunesStoreError.Explanation",{errorNum:e}))},its.client.showGenericErrorAlert=function(){its.client.showGenericErrorAlertWithErrorCode(3131)},its.client.showPlistErrorDialog=function(e){var t=null;
its.isDefinedNonNull(e)&&(t=its.client.getDialogDict(e.responseXML)),t!==null?its.client.doDialogWithDict(t):its.client.showGenericErrorAlert()},its.client.getDialogDict=function(e){var t=null,n=e.getElementsByTagName("key");
for(var r=0;
n!=null&&r<n.length;
r++)if(n[r].textContent=="dialog"&&n[r].nextElementSibling!=null&&n[r].nextElementSibling.nodeName=="dict"){t=n[r].nextElementSibling;
break}return t},its.client.showConfirm=function(e,t,n,r,i,s){var o={message:e,explanation:t,defaultButton:"ok",okButtonString:i||its.loc("OK"),cancelButtonString:s||its.loc("Cancel")},u={okButtonAction:n||its.emptyFunction,cancelButtonAction:r||its.emptyFunction};
its.client.showDialog(o,u)},its.client.createDialogDict=function(e){var t=document.implementation.createDocument(null,"",null),n=t.createElement("dict"),r=function(e,n,r){var i=null;
its.isString(r)?(i=t.createElement("string"),i.textContent=r):its.isElement(r)?i=r:typeof r=="boolean"&&(i=t.createElement(r.toString()));
if(i!=null){var s=t.createElement("key");
s.textContent=n,e.appendChild(s),e.appendChild(i)}},i=function(t){return e[t]!=null?(r(n,t,e[t]),!0):!1},s=function(s){if(i(s+"ButtonString")){var o=e[s+"ButtonAction"];
if(o!=null){var u=t.createElement("dict");
r(u,"kind",o),r(u,"url",e[s+"ButtonUrl"]),r(n,s+"ButtonAction",u)}}},o=function(i){var s=e[i];
if(s!=null&&typeof s=="object"){var o=t.createElement("dict");
for(var u in s)r(o,u,s[u]);
r(n,i,o)}};
return i("kind"),i("windowTitle"),i("message"),i("explanation"),i("errorMessage"),i("checkboxString")&&i("initialCheckboxValue"),i("defaultButton"),s("ok"),s("cancel"),s("other"),e["kind"]=="authorization"&&(i("lockUserName"),i("noAOLAccounts")),o("additional-parameters"),n},its.client.startProgressSpinner=function(){its.client.isRunning&&its.client.platformShortName=="DA"&&(its.client._progressSpinnerCount?its.client._progressSpinnerCount++:its.client._progressSpinnerCount=1,iTunes.startProgressSpinner())},its.client.stopProgressSpinner=function(e){if(its.client.isRunning&&its.client.platformShortName=="DA"){its.client._progressSpinnerCount?its.client._progressSpinnerCount--:console.log("its.client.stopProgressSpinner: you should call startProgressSpinner first");
if(its.client._progressSpinnerCount<1||e)iTunes.stopProgressSpinner(),its.client._progressSpinnerCount=0}},its.client.goBackOrGoHome=function(){if(iTunes.getHistory().length>1)iTunes.getHistory().back();
else if(typeof its.client.dismissSheet!="undefined"&&its.client.isPresentedInSheet===!0)its.client.dismissSheet();
else{var e=its.client.getBag().storeFront;
e&&(window.location.href=e)}},its.client.Platform={iTunes11:function(){return its.client.Platform.init(),its.client.Platform._iTunes11==1},iTunes12:function(){return its.client.Platform.init(),its.client.Platform._iTunes12==1},iBooksMac:function(){return its.client.Platform.init(),its.client.Platform._iBooksMac==1},MacAppStore:function(){return its.client.Platform.init(),its.client.Platform._MacAppStore==1},init:function(){if(its.client.Platform._IS_INITIALIZED)return;var e=document.querySelector("meta[name='platform-cache-id']"),t=Number(e.getAttribute("content"));
switch(t){case 17:its.client.Platform._iTunes11=!0;
break;case 28:case 32:its.client.Platform._iTunes12=!0;
break;case 22:its.client.Platform._iBooksMac=!0;
break;case 13:its.client.Platform._MacAppStore=!0}its.client.Platform._IS_INITIALIZED=!0}},its.client.platformShortName="DA",its.client.platformIsDT=!1,its.client.platformIsDA=!0,its.client.platformIsK2=!1,its.client.platformIsP2=!1,its.client.isPresentedInSheet=its.client.isRunning&&iTunes.isPresentedInSheet,its.client.screenReaderRunning=function(){return its.screenReaderRunning},its.client.getUserDSID=function(){if(its.client.isRunning){var e=iTunes.primaryAccount;
if(e!=null)return e.dsID}return null},its.client.doDialogWithDict=function(e,t){var n=e.cloneNode(!0),r=document.implementation.createDocument(null,"",null);
r.appendChild(n);
var i=(new XMLSerializer).serializeToString(r);
if(its.client.isClientGreaterThanOrEqualToSpecifiedVersion("1.0.1")){var s=function(e){var n=!1;
return t&&(e.clickedButton=="1"?t.okButtonAction&&(n=t.okButtonAction(e)):e.clickedButton=="2"?t.cancelButtonAction&&(n=t.cancelButtonAction(e)):e.clickedButton=="3"?t.otherButtonAction&&(n=t.otherButtonAction(e)):e.clickedButton=="4"),n};
iTunes.doDialogXML(i,s)}else t&&(t.okButtonAction||t.cancelButtonAction||t.otherButtonAction)&&its.client.debug("dialog callbacks are not supported in App Store 1.0 !!"),i="<dict><key>dialog</key>"+i+"</dict>",iTunes.addProtocol(i)},its.client.putURLOnPasteboard=function(e){iTunes.putTextOnPasteboard(e)},its.client.startProgressSpinner=function(){its.client.isRunning&&(its.client._progressSpinnerCount?its.client._progressSpinnerCount++:its.client._progressSpinnerCount=1,iTunes.startProgressSpinner())},its.client.stopProgressSpinner=function(e){if(its.client.isRunning){its.client._progressSpinnerCount?its.client._progressSpinnerCount--:console.log("its.client.stopProgressSpinner: you should call startProgressSpinner first");
if(its.client._progressSpinnerCount<1||e)iTunes.stopProgressSpinner(),its.client._progressSpinnerCount=0}},its.client.appIsEligibleForAdoption=function(e){return!its.client.isRunning||!iTunes.appIsEligibleForAdoption?(its.client.showAlert("App adoption is not supported in this version."),!1):iTunes.appIsEligibleForAdoption(e)},its.client.adoptionCompleted=function(e){return!its.client.isRunning||!iTunes.adoptionCompleted?(its.client.showAlert("App adoption is not supported in this version."),!1):iTunes.adoptionCompleted(e)},its.client.adopt=function(e,t){if(!(!its.client.isRunning||its.string.compareNumerically(its.client.version(),"1.1.1")<0))return iTunes.adopt(e,t);
its.client.showAlert("App adoption is not supported in this version."),t()},its.client.claimAllEligibleApps=function(e){if(its.client.isRunning&&its.isFunction(iTunes.claimUpToDateApps)){var t=iTunes.eligibleUpToDateApps();
return iTunes.claimUpToDateApps(t,t,e)}},its.client.appIsEligibleForAdoption=function(e){var t=!1;
return its.client.isRunning&&its.isFunction(iTunes.appIsEligibleForAdoption)&&(t=iTunes.appIsEligibleForAdoption(e),t&&its.string.compareNumerically(its.client.version(),"1.2")<0&&iTunes.adoptionCompleted(e)&&(t=!1)),t},its.client.appIsEligibleForGratis=function(e){var t=!1;
return its.client.isRunning&&its.isFunction(iTunes.eligibleUpToDateApps)&&(t=iTunes.eligibleUpToDateApps().indexOf(e)!=-1),t},its.client.authenticate=function(e,t,n,r,i){var s=function(t){if(!e)return;t.result=="success"&&typeof e=="function"?e.apply({},[t]):t.result=="success"&&typeof e.onSuccess=="function"?e.onSuccess.apply({},[t]):t.result=="cancel"&&typeof e.onCancel=="function"&&e.onCancel.apply({},[t])};
console.log("authenticating "+iTunes.primaryAccount.dsID),optionObject={completionCallback:s,dialog:{message:t,explanation:n,okButtonString:its.loc("SignIn"),cancelButtonString:its.loc("Cancel")}},r&&(optionObject.additionalQueryParameters="createSession=true"),i&&(optionObject.forced=i),console.dir(optionObject),iTunes.authenticateForAccount(iTunes.primaryAccount,optionObject)},its.client.version=function(){var e=iTunes.version;
return e===undefined&&(e="1.0"),e},its.client.osVersion=function(){var e=iTunes.systemVersion();
return e===undefined&&(e="10.6.7"),e},its.client.switchStorefront=function(e){its.client.log("Switching to storefront: "+e),iTunes.signOut(),iTunes.setStorefront(e),iTunes.reset()},its.client.dismissSheet=function(){iTunes.dismissSheet()},its.client.platformIsWindows=function(){return!1},its.Logger=function(e){e||(e="default"),this._name=e,its.Logger._loggers||(its.Logger._loggers={}),its.Logger._loggers[e]=this},its.Logger.DEBUG=1,its.Logger.INFO=2,its.Logger.WARN=3,its.Logger.ERROR=4,its.Logger.STATS=5,its.Logger._loggingMethods=typeof console!="undefined"?[console.debug,console.info,console.warn,console.error]:null,its.Logger._version="3.1",its.Logger._intraFieldSeparator="|",its.Logger._visitorIdVersion="v6",its.Logger._undefinedValue="undefined",its.Logger._levelsAsText={},its.Logger._levelsAsText[its.Logger.DEBUG]="debug",its.Logger._levelsAsText[its.Logger.INFO]="info",its.Logger._levelsAsText[its.Logger.WARN]="warn",its.Logger._levelsAsText[its.Logger.ERROR]="error",its.Logger._levelsAsText[its.Logger.STATS]="stats",its.Logger.Defaults={},its.Logger.Defaults.loggerName="Logger",its.Logger.Defaults.level=its.Logger.ERROR,its.Logger._loggingEnabledToConsole=function(){return!its.property("ITSLogger.DisableLoggingToConsole")},its.Logger._loggingEnabledToServer=function(){return its.serverData&&!its.property("ITSLogger.DisableLogging")},its.Logger.setLevel=function(e){its.Logger._level=e},its.Logger.named=function(e){var t=null;
return e||(e=its.Logger.Defaults.loggerName),its.Logger._loggers&&(t=its.Logger._loggers[e]),t||(t=new its.Logger(e)),t},its.Logger.prototype={name:function(){return this._name},setLevel:function(e){this._level=e},level:function(){var e=its.property(this.name()+".LoggerLevel");
return e||(e=its.property("LoggerLevel")),e||(e=this._level),e||(e=its.Logger._level),e||(e=its.Logger.Defaults.level),e=its.Logger._levelToInt(e),e},isAnyDebugLevel:function(){return its.isDefinedNonNull(this._anyDebugLevel)?returnValue=this._anyDebugLevel:(this._anyDebugLevel=this.level()<its.Logger.ERROR?!0:!1,returnValue=this._anyDebugLevel),returnValue},levelText:function(){returnAsInt||(returnLevel=its.Logger._levelToText(returnLevel))},debug:function(e,t,n,r){return this._funnelLogger(its.Logger.DEBUG,!1,e,t,n,r)},info:function(e,t,n,r){return this._funnelLogger(its.Logger.INFO,!1,e,t,n,r)},warn:function(e,t,n,r){return this._funnelLogger(its.Logger.WARN,!1,e,t,n,r)},error:function(e,t,n,r){typeof n=="undefined"&&its.property("ITSLogger.mirrorToServerByDefaultOnErrors")&&(n=!0);
try{undefined.intentionallyCauseError()}catch(i){i.stack&&(t||(t={}),t.callstack=i.stack)}return this._funnelLogger(its.Logger.ERROR,!1,e,t,n,r)},stats:function(e,t,n){return this._funnelLogger(its.Logger.STATS,!1,e,t,n)},_funnelLogger:function(e,t,n,r,i,s){var o=null;
if(n){var u=this.level(),a=e;
a==its.Logger.STATS&&(e=its.Logger.INFO);
var f=e-1,l=(e>=u||e==its.Logger.ERROR)&&its.Logger._loggingMethods&&its.Logger._loggingMethods[f]?!0:!1;
if(l){var c=its.property("LoggerFilter");
if(!its.isDefined(c)||c=="")c=null;
c&&c!=this._cachedloggerFilterString&&(this._cachedloggerFilterString=c,this._cachedloggerFilter=new RegExp(this._cachedloggerFilterString));
var h="";
e==its.Logger.WARN?h+="WARN: ":e==its.Logger.ERROR&&(h+="ERROR: "),h+=this.name()+":",o=h+" "+n,!s&&(e==its.Logger.ERROR||e==its.Logger.WARN||its.Logger._passesRegexFilterTest(this._cachedloggerFilter,o))&&its.Logger._loggingMethods[f].apply(console,[h].concat(n));
if(e==its.Logger.ERROR&&window.iTunes&&iTunes.log){var p=h+" "+n.toString();
iTunes.log(p)}}return i&&its.Logger._notifyServer(n,this.name(),r,a),o}}},its.Logger._levelToInt=function(e){if(e!=null&&e.toUpperCase){var t=its.string.toInt(e);
if(isNaN(t)){var n=e?e.toUpperCase():"";
n=="DEBUG"?e=its.Logger.DEBUG:n=="INFO"?e=its.Logger.INFO:n=="WARN"?e=its.Logger.WARN:n=="ERROR"?e=its.Logger.ERROR:e=its.Logger.Defaults.level}else e=t}return e},its.Logger._levelToText=function(e){return its.Logger._levelsAsText[e]},its.Logger._passesRegexFilterTest=function(e,t){var n=!1;
if(!e||t.search(e)!=-1)n=!0;
return n},its.Logger._notifyServer=function(e,t,n,r){var i=null;
if(its.Logger._loggingEnabledToServer()){var s,o,u;
its.Logger._useLegacyLogFormat()?(s=its.Logger._legacyLogEvent(e,t,n,r),o=its.Logger._legacyLogUrl(t),u=its.Logger._serializedJSON(s)):(s=its.Logger._logEvent(e,t,n,r),o=its.Logger._logUrl(),u=its.Logger._enrichedAndSerializedEvent(s)),u&&(i=its.Logger._sendToServer(o,u))}return i},its.Logger._useLegacyLogFormat=function(){var e=!0,t=its.sf.Metrics.bagMetrics().useLegacyLogFormat;
if(its.isDefined(t))e=t;
else{var n=its.property("ITSLogger.UseLegacyLogFormat");
its.isDefined(n)&&(e=n)}return e},its.Logger._logUrl=function(){var e=null,t=its.sf.Metrics.bagMetrics().metricsUrl,n=2,r="xp_amp_legacy_log";
return t&&n&&r&&(e=t+"/"+n+"/"+r),e},its.Logger._legacyLogUrl=function(e){var t="",n=its.property("ITSLogger.ServerReportingProtocol"),r=its.property("ITSLogger.ServerReportingDomain"),i=its.property("ITSLogger.ServerReportingApp"),s="/WebObjects/"+i+".woa/wa/";
return t=n+"://"+r,t+=s,t+=its.property("ITSLogger.RecordStatsAction"),t+="?eventType="+e,t+="&version="+its.Logger._version,t},its.Logger._logEvent=function(e,t,n,r){var i=its.Logger._baseLogEvent(e,t,n,r);
return i.eventType="log",i.eventTime=Date.now(),i=its.Logger._removeBlacklistedFields(i,["ITSLogger_dsid"]),i},its.Logger._legacyLogEvent=function(e,t,n,r){var i=its.Logger._baseLogEvent(e,t,n,r);
return i=its.Logger._removeBlacklistedFields(i),i},its.Logger._baseLogEvent=function(e,t,n,r){n=n||{};
var i={},s={};
e||(e=its.Logger._undefinedValue),i.messageParam=e,n.message||(n.message=e),i.loggerName=t,r||(r=its.Logger._undefinedValue),i.loggingThreshold=r;
var o=(new Date).getTime(),u=o-its.markupLoadStartTime,a=null;
document&&document.body&&document.body.className?a=document.body.className:a=its.Logger._undefinedValue;
for(var f in n)s[t+"_"+f]=n[f];
i.version=its.Logger._version,i.iTunesVersion=its.Logger._cleanValue(its.sf.Client.version()),i.eventType=i.loggerName,i.serverEnvironment=its.Logger._cleanValue(its.property("ITSServerEnvironment")),i.serverEnvironmentDetailsString=its.Logger._cleanValue(window.status),its.reflect.copyKeysAndValues(window.statusData,i),i.serverInstance=its.Logger._cleanValue(its.property("ITSServerInstance"));
var l=its.Logger._cleanValue(its.Logger._dsid());
i.dsid=l;
var c=its.Logger._locallyStoredVisitorIdMap(l),h=c[l];
i.visitorId=h;
var p=its.reflect.values(c);
i.visitorIds=JSON.stringify(p);
var d=1;
c.unknown?p.length>=3&&(d=p.length-1):d=p.length,i.visitorCount=d,i.omnitureVisitorId=its.Logger._cleanValue(its.cookies.get("s_vi")),i.metricsClientId=its.Logger._cleanValue(its.cookies.get("xp_ci")),i.vip=its.property("vip"),i.resourceRevNum=its.property("ITSResourceRevNum"),i.windowLocationHref=window&&window.location&&window.location.href?window.location.href:"undefined",i.timeOfLog=o,i.markupLoadStartTime=its.markupLoadStartTime,i.markupLoadEndTime=its.Logger._cleanValue(its.markupLoadEndTime),i.markupLoadTotalTime=its.markupLoadStartTime&&its.markupLoadEndTime?its.markupLoadEndTime-its.markupLoadStartTime:"undefined",i.timeElapsedFromLoadStart=u,i.pageName=its.Logger._omnitureValue("omniturePageName"),i.pageChannel=its.Logger._omnitureValue("omnitureChannel"),i.pageClassName=a,i.allowDeferJsLoad=its.property("MZHtmlResourcesUtil.allowDeferJsLoad")?!0:!1,i.clientForceServerNotifications=its.property("ITSLogger.clientForceServerNotifications")?!0:!1;
for(var f in i)s["ITSLogger_"+f]=i[f];
return s.sender=its.property("ITSLogger.SenderName"),s},its.Logger._removeBlacklistedFields=function(e,t){t=t||[];
var n=its.property("ITSLogger.blacklistedServerNotificationsFields")||[];
n=n.concat(t);
if(n.length>0)for(var r=0;
r<n.length;
r++){var i=n[r];
delete e[i]}return e},its.Logger._serializedJSON=function(e){var t=null;
try{t=JSON.stringify(e)}catch(n){its.Logger.named().error("Error stringifying data as JSON: "+n)}return t},its.Logger._enrichedAndSerializedEvent=function(e){var t={deliveryVersion:"1.0",postTime:Date.now(),events:[e]};
return its.Logger._serializedJSON(t)},its.Logger._sendToServer=function(e,t){var n=null;
if(e&&t){var r=new XMLHttpRequest;
r.open("POST",e,!0),r.setRequestHeader("Content-type","application/json"),r.send(t),n=t}return n},its.Logger._omnitureValue=function(e){var t=its.Logger._undefinedValue;
if(window.ITSMetrics){var n=ITSMetrics[e]();
n&&(t=n)}return t},its.Logger._cleanValue=function(e){if(!e||e=="")e=its.Logger._undefinedValue;
return e},its.Logger._createVisitorId=function(e){var t=null,n="[LS]",r=e?"1":"0",i=its.string.generateUuid(23,10),s="[LE]",o=[n,its.Logger._visitorIdVersion,r,i,s];
return t=o.join(its.Logger._intraFieldSeparator),t},its.Logger._visitorMapVersionAdjustments=function(e){var t=its.reflect.values(e);
if(t&&t.length){var n=t[0],r=n.split(its.Logger._intraFieldSeparator);
r[1]!=its.Logger._visitorIdVersion&&(e={})}return e},its.Logger._locallyStoredVisitorIdMap=function(e){var t={},n=null,r="ITSLogger.visitorIds",i=its.sf.LocalStorage.getItem(r);
return i&&(t=JSON.parse(i),t=its.Logger._visitorMapVersionAdjustments(t),n=t[e]),n||(t[e]=its.Logger._createVisitorId(e!=its.Logger._undefinedValue),its.sf.LocalStorage.setItem(r,JSON.stringify(t))),t},its.Logger._dsid=function(){var e=0;
return its&&its.sf6&&its.sf.Client?e=its.sf.Client.dsId():typeof itms!="undefined"&&(e=itms.DSID),e},window.SF_EXCEPTION_LOGGER_NAME="ITSExceptionHandler",window._sf_itsComposeErrorMessage=function(e,t,n,r){var i="unknown (might be html-embedded script?)",s="unknown";
its.isDefinedNonNull(t)&&t!=""&&t!="undefined"&&(i=t),its.isDefinedNonNull(n)&&n!=""&&(s=n);
var o='{message:"'+e+'", url:"'+i+'", lineNumber:"'+s+'"}';
return o},window._sf_itsOnErrorCallback=function(e,t,n){if(e&&e instanceof Event){var r=e.target;
r&&(e="Error attempting to load a script: id="+r.id+" src="+r.src+" type="+r.type+", contents:"+r.innerHTML)}var i={message:e,url:t,lineNumber:n};
fullMessage=window._sf_itsComposeErrorMessage(e,t,n,window.SF_EXCEPTION_LOGGER_NAME),its.Logger.named(window.SF_EXCEPTION_LOGGER_NAME).error(fullMessage,i,!0,!0)},window._earlyOnerrorException&&(window._sf_itsOnErrorCallback(window._earlyOnerrorException.message,window._earlyOnerrorException.url,window._earlyOnerrorException.lineNumber),window._earlyOnerrorException=null),window.onerror=window._sf_itsOnErrorCallback,ITSLogger=function(e){return this._logger=its.Logger.named(e),this._logger},ITSLogger.named=function(e){return this._logger=its.Logger.named(e),this._logger},ITSLogger.prototype={debug:function(e,t,n,r){this._logger.debug(e,t,n)},info:function(e,t,n,r){this._logger.info(e,t,n)},warn:function(e,t,n,r){this._logger.warn(e,t,n)},error:function(e,t,n,r){this._logger.error(e,t,n)}},its.sf.DelayedCallQueue.objectReady("its.Logger"),its.sf.DelayedCallQueue.objectReady("ITSLogger"),ITSLogger.constants={_version:"2.1",_intraFieldSeparator:"|",_visitorIdVersion:"v5",_undefinedValue:"undefined"},ITSLogger.isLoaded=!0;
for(var key in window.earlyLoadITSLogger)ITSLogger[key]=window.earlyLoadITSLogger[key];
ITSLogger._processQueuedMessages=function(){if(ITSLogger._loggingEnabledToServer()){if(ITSLogger._queuedMessages&&ITSLogger._queuedMessages.length){var t=its.x.util.array.shallowCopy(ITSLogger._queuedMessages);
ITSLogger._queuedMessages=[];
var n=10;
t.length&&(new Date).getTime()-its.markupLoadStartTime>n*1e3&&(ITSLogger.setUseOnScreenConsole(!1),ITSLogger.named()._funnelLogger(ITSLogger.ERROR,!0,"Failed to load requested ITSOnscreenConsole after "+n+" seconds... reverting to stdout"));
for(var r=0;
r<t.length;
r++){var i=t[r];
ITSLogger.named(i.loggerName)._funnelLogger(i.loggingThreshold,!0,i.message,i.serverDataDict,i.mirrorToServer)}}ITSLogger.possiblyWaitForQueueMessages()}},ITSLogger.REQUEST=0,ITSLogger.SESSION=1,ITSLogger.PERM=2,ITSLogger.DOMAIN_NAME_COMPONENTS=3,ITSLogger.STORAGE_KEY="jsLogValues",ITSLogger.Defaults={},ITSLogger.Defaults.loggerName="ITSLogger",ITSLogger.Defaults.level=ITSLogger.ERROR,ITSLogger.Defaults.useOnScreenConsole=!1,ITSLogger.Defaults.regexFilterString=null,ITSLogger.Defaults.persistence=ITSLogger.SESSION,ITSLogger.Defaults.regexFilterObject=null,ITSLogger.named=function(t){var n=null;
return t||(t=ITSLogger.Defaults.loggerName),ITSLogger.loggers&&(n=ITSLogger.loggers[t]),n||(n=new ITSLogger(t)),n},ITSLogger.stringify=function(t){var n="";
for(var r=0;
r<arguments.length;
r++){var i=arguments[r];
if(typeof arguments[r]=="object")try{i=JSON.stringify(arguments[r])}catch(s){i=arguments[r]}n+=i,r<arguments.length-1&&(n+=" ")}return n},ITSLogger._omnitureValue=function(t){var n=ITSLogger.constants._undefinedValue;
if(window.ITSMetrics){var r=ITSMetrics[t]();
r&&(n=r)}return n},ITSLogger._cleanValue=function(t){if(!t||t=="")t=ITSLogger.constants._undefinedValue;
return t},ITSLogger._createVisitorId=function(t){var n=null,r="[LS]",i=t?"1":"0",s=its.string.generateUuid(23,10),o="[LE]",u=[r,ITSLogger.constants._visitorIdVersion,i,s,o];
return n=u.join(ITSLogger.constants._intraFieldSeparator),n},ITSLogger._visitorMapVersionAdjustments=function(t){var n=its.reflect.values(t);
if(n&&n.length){var r=n[0],i=r.split(ITSLogger.constants._intraFieldSeparator);
i[1]!=ITSLogger.constants._visitorIdVersion&&(t={})}return t},ITSLogger._locallyStoredVisitorIdMap=function(t){if(typeof JSON=="undefined")return;var n=null,r="ITSLogger.visitorIds",i=localStorage[r],s={};
return i&&(s=JSON.parse(i),s=ITSLogger._visitorMapVersionAdjustments(s),n=s[t]),n||(s[t]=ITSLogger._createVisitorId(t!=ITSLogger.constants._undefinedValue),localStorage[r]=JSON.stringify(s)),s},ITSLogger._notifyServer=function(t,n,r,i,s,o){var u=null;
if(ITSLogger._loggingEnabledToServer()&&!its.property("ITSLogger.disableClientNotificationSends")){var a={};
t||(t=ITSLogger.constants._undefinedValue),a.messageParam=t;
if(!r||!r.message)r||(r={}),r.message=t;
a.loggerName=n,i||(i=ITSLogger.constants._undefinedValue),a.loggingThreshold=i;
var f={};
a||(a={});
var l="",c=null,h=its.property("ITSLogger.ServerReportingProtocol"),p=its.property("ITSLogger.ServerReportingDomain"),d=its.property("ITSLogger.ServerReportingApp"),v="/WebObjects/"+d+".woa/wa/";
s?its.string.startsWith(s,"http",!0)||(its.string.startsWith(s,"//")||(l="//"),l=h+l):s=h+"://"+p,l=s,o?(its.string.startsWith(o,"/")||(o="/"+o),its.string.endsWith(o,"/")||(o+="/")):o=v,l+=o,l+=its.property("ITSLogger.RecordStatsAction"),l+="?eventType="+n,l+="&version="+ITSLogger.constants._version;
var m=(new Date).getTime(),g=m-its.markupLoadStartTime,y=ITSLogger.constants._undefinedValue;
document&&document.body&&document.body.className&&(y=document.body.className);
if(!r)r={};
else for(var b in r)f[n+"_"+b]=r[b];
a.version=ITSLogger.constants._version,a.eventType=a.loggerName,a.serverEnvironment=ITSLogger._cleanValue(its.property("ITSServerEnvironment")),a.serverEnvironmentDetailsString=ITSLogger._cleanValue(window.status),its.kit.util.extend(a,window.statusData),a.serverInstance=ITSLogger._cleanValue(its.property("ITSServerInstance"));
var w=ITSLogger._cleanValue(its.client.getUserDSID());
a.dsid=w;
var E=ITSLogger._locallyStoredVisitorIdMap(w),S=E[w];
a.visitorId=S;
var x=its.reflect.values(E);
a.visitorIds=JSON.stringify(x);
var T=1;
E.unknown?x.length>=3&&(T=x.length-1):T=x.length,a.visitorCount=T,a.omnitureVisitorId=ITSLogger._cleanValue(its.cookies.get("s_vi")),a.vip=its.property("vip"),a.resourceRevNum=its.property("ITSResourceRevNum"),a.windowLocationHref=window&&window.location&&window.location.href?window.location.href:"undefined",a.timeOfLog=m,a.markupLoadStartTime=its.markupLoadStartTime,a.markupLoadEndTime=ITSLogger._cleanValue(its.markupLoadEndTime),a.markupLoadTotalTime=its.markupLoadStartTime&&its.markupLoadEndTime?its.markupLoadEndTime-its.markupLoadStartTime:"undefined",a.timeElapsedFromLoadStart=g,a.pageName=ITSLogger._omnitureValue("omniturePageName"),a.pageChannel=ITSLogger._omnitureValue("omnitureChannel"),a.pageClassName=y,a.allowDeferJsLoad=its.property("MZHtmlResourcesUtil.allowDeferJsLoad")?!0:!1,a.clientForceServerNotifications=its.property("ITSLogger.clientForceServerNotifications")?!0:!1;
for(var b in a)f["ITSLogger_"+b]=a[b];
f.sender=its.property("ITSLogger.SenderName");
var N=its.property("ITSLogger.blacklistedServerNotificationsFields");
if(N!=null)for(var C=0;
C<N.length;
C++){var k=N[C];
delete f[k]}c=JSON.stringify(f);
var L=new XMLHttpRequest;
L.open("POST",l,!0),L.setRequestHeader("Content-type","application/json"),L.send(c),u=c}return u},ITSLogger.prototype.loggerName=function(){return this._loggerName},ITSLogger.prototype.debug=function(t,n,r){this._funnelLogger(ITSLogger.DEBUG,!1,t,n,r)},ITSLogger.prototype.info=function(t,n,r){this._funnelLogger(ITSLogger.INFO,!1,t,n,r)},ITSLogger.prototype.warn=function(t,n,r){this._funnelLogger(ITSLogger.WARN,!1,t,n,r)},ITSLogger.prototype.error=function(t,n,r){this._funnelLogger(ITSLogger.ERROR,!1,t,n,r)},ITSLogger.prototype.stats=function(t,n,r){this._funnelLogger(ITSLogger.STATS,!1,t,n,r)},ITSLogger.prototype.queueMessage=function(t,n,r,i){ITSLogger._loggingEnabledToServer()&&ITSLogger.queueMessage(this.loggerName(),t,n,i,r)},ITSLogger.prototype.setMirrorToServer=function(t){this._mirrorToServer=t},ITSLogger.prototype.mirrorToServer=function(t){return t||this._mirrorToServer},ITSLogger.prototype._funnelLogger=function(t,n,r,i,s){if(ITSLogger._loggingEnabledToServer()){n||ITSLogger._processQueuedMessages();
var o=t;
o==ITSLogger.STATS&&(t=ITSLogger.INFO);
var u=null;
switch(t){case ITSLogger.DEBUG:u=its.client.debug;
break;case ITSLogger.INFO:u=its.client.info;
break;case ITSLogger.WARN:u=its.client.warn;
break;case ITSLogger.ERROR:u=its.client.error}var a=u&&t>=ITSLogger.level()||t==ITSLogger.ERROR,s=this.mirrorToServer(s);
if(a||s){if(r){var f=this.loggerName()+":",l=ITSLogger._omnitureValue("omniturePageName");
l!="undefined"&&(f+=l+":"),f+=" "+r;
if(t==ITSLogger.ERROR||a&&ITSLogger._passesRegexFilterTest(f)){var c=ITSLogger.useOnScreenConsole()&&window.ITSOnScreenConsole?!0:!1,h=ITSLogger.useOnScreenConsole()&&!window.ITSOnScreenConsole?!0:!1;
h&&a?(ITSLogger._loadOnscreenConsoleIfNeeded(),this.queueMessage(t,r,i,!1)):a&&u(f,c)}}s&&ITSLogger._notifyServer(r,this.loggerName(),i,o)}}},ITSLogger.level=function(){return ITSLogger.loggingPreferences().level},ITSLogger.setLevel=function(t,n,r,i){var s=null;
if(t==null||t==""){if(t==null){var o=ITSLogger._loggingPreferencesDisplayString();
s="Clearing previous settings of: ITSLogger.setLevel("+ITSLogger._loggingPreferencesDisplayString()+")"+'\nUsage: ITSLogger.setLevel(level["debug"[1]|"info"[2]|"warn"[3]|"error"[4], regexFilterString, useOnScreenConsole[true|false], persistence["REQUEST"[0]|"SESSION"[1]|"PERM"[2])'}ITSLogger.clearLoggingPreferences()}else logevel=ITSLogger._parseLogLevel(t),r||(r=ITSLogger.useOnScreenConsole()),ITSLogger.setLoggingPreferences(t,r,n,i),s=ITSLogger._loggingPreferencesDisplayString();
return s},ITSLogger.useOnScreenConsole=function(){var t=!1;
return ITSLogger.loggingPreferences().useOnScreenConsole&&(window.ITSOnScreenConsole||its.property("itsLoggerJsUrlForOnscreenConsole")&&its.property("itsLoggerCssUrlForOnscreenConsole"))&&(t=!0),t},ITSLogger.setUseOnScreenConsole=function(t){return ITSLogger._cachedPreferences.useOnScreenConsole=t,t},ITSLogger.regexFilterString=function(){return ITSLogger.loggingPreferences().regexFilterString},ITSLogger.setRegexFilterString=function(t){return ITSLogger._cachedPreferences.regexFilterString=t,t},ITSLogger.regexFilterObject=function(){return ITSLogger.loggingPreferences().regexFilterObject},ITSLogger.persistence=function(){return ITSLogger.loggingPreferences().persistence},ITSLogger.setPersistence=function(t){return t=ITSLogger._parseLogPersistence(t),ITSLogger.setLoggingPreferences(ITSLogger.loggingPreferences().level,ITSLogger.loggingPreferences().useOnScreenConsole,ITSLogger.loggingPreferences().regexFilterString,ITSLogger.loggingPreferences().persistence),t},ITSLogger._passesRegexFilterTest=function(t){var n=!1,r=ITSLogger.regexFilterObject();
if(!r||t.search(r)!=-1)n=!0;
return n},ITSLogger.clearLoggingPreferences=function(){ITSLogger.setLoggingPreferences(null)},ITSLogger._parseLogLevel=function(t){if(t!=null&&t.toUpperCase){var n=its.string.toInt(t);
if(isNaN(n)){var r=t?t.toUpperCase():"";
r=="DEBUG"?t=ITSLogger.DEBUG:r=="INFO"?t=ITSLogger.INFO:r=="WARN"?t=ITSLogger.WARN:r=="ERROR"?t=ITSLogger.ERROR:t=ITSLogger.Defaults.level}else t=n}return t},ITSLogger._parseLogPersistence=function(t){if(t!=null&&t.toUpperCase){var n=its.string.toInt(t);
if(isNaN(n)){var r=t?t.toUpperCase():"";
r=="REQUEST"?t=ITSLogger.REQUEST:r=="SESSION"?t=ITSLogger.SESSION:r=="PERM"?t=ITSLogger.PERM:t=ITSLogger.Defaults.persistence}else t=n}return t},ITSLogger._setDefaultLoggingPreferences=function(){ITSLogger._cachedPreferences={level:ITSLogger.Defaults.level,useOnScreenConsole:ITSLogger.Defaults.useOnScreenConsole,regexFilterString:ITSLogger.Defaults.regexFilterString,regexFilterObject:ITSLogger.Defaults.regexFilterObject,persistence:ITSLogger.Defaults.persistence}},ITSLogger.loggingPreferences=function(){if(!ITSLogger._cachedPreferences){var t=null;
ITSLogger._setDefaultLoggingPreferences(),localStorage&&localStorage.getItem(ITSLogger.STORAGE_KEY)?t=localStorage.getItem(ITSLogger.STORAGE_KEY):sessionStorage&&sessionStorage.getItem(ITSLogger.STORAGE_KEY)?t=sessionStorage.getItem(ITSLogger.STORAGE_KEY):t=its.cookies.get(ITSLogger.STORAGE_KEY);
if(t){var n=t.split("-");
n.length>0&&n[0].length>0&&(ITSLogger._cachedPreferences.level=n[0]),n.length>1&&n[1].length>0&&(ITSLogger._cachedPreferences.useOnScreenConsole=n[1]=="1"?!0:!1),n.length>2&&n[2].length>0&&(ITSLogger._cachedPreferences.regexFilterString=n[2],ITSLogger._cachedPreferences.regexFilterString!=ITSLogger._previousRegexFilterString&&(ITSLogger._previousRegexFilterString=ITSLogger._cachedPreferences.regexFilterString,ITSLogger._cachedPreferences.regexFilterObject=new RegExp(ITSLogger._cachedPreferences.regexFilterString))),n.length>3&&n[3].length>0&&(ITSLogger._cachedPreferences.persistence=n[3])}ITSLogger._queryParams=its.url.queryParamsDict();
var r=!1,i=ITSLogger._queryParams.jsLogLevel,s=ITSLogger._queryParams.jsLogReset;
if(i==""||s!=null)ITSLogger.clearLoggingPreferences();
else{var o=ITSLogger._queryParams.jsLogUseOnScreenConsole,u=ITSLogger._queryParams.jsLogRegexFilterString,a=ITSLogger._queryParams.jsLogPersistence;
if(o&&o.toUpperCase){var f=o.toUpperCase();
f=="TRUE"?o=1:f=="FALSE"&&(o=0)}a&&a.toUpperCase&&(a=a.toUpperCase()),i!=null&&(r=!0,ITSLogger._cachedPreferences.level=ITSLogger._parseLogLevel(i)),o!=null&&(o==""&&(o=ITSLogger.Defaults.useOnScreenConsole),ITSLogger._cachedPreferences.useOnScreenConsole=o),u!=null&&(u==""&&(u=ITSLogger.Defaults.regexFilterString),ITSLogger._cachedPreferences.regexFilterString=u),a!=null&&(a=ITSLogger._parseLogPersistence(a),ITSLogger._cachedPreferences.persistence=a),r&&a!=null&&ITSLogger.setLoggingPreferences(ITSLogger._cachedPreferences.level,ITSLogger._cachedPreferences.useOnScreenConsole,ITSLogger._cachedPreferences.regexFilterString,a)}}return ITSLogger._cachedPreferences},ITSLogger._loggingPreferencesDisplayString=function(){var t=ITSLogger.loggingPreferences();
return t.level+", "+t.regexFilterString+", "+t.useOnScreenConsole+", "+t.persistence},ITSLogger._loadOnscreenConsoleIfNeeded=function(t,n){!window.ITSOnScreenConsole&&(t||ITSLogger.useOnScreenConsole())&&(n||(n=ITSLogger._onscreenConsoleFinishedLoadingCb),its.x.dynaLoadResourceFile(its.property("itsLoggerCssUrlForOnscreenConsole")),its.x.dynaLoadResourceFile(its.property("itsLoggerJsUrlForOnscreenConsole"),n))},ITSLogger._onscreenConsoleFinishedLoadingCb=function(){ITSLogger._processQueuedMessages()},ITSLogger.showErrorIndicator=function(t){window.ITSOnScreenConsole?(ITSOnScreenConsole.showErrorIndicator(t),ITSLogger._processQueuedMessages()):ITSLogger._loadOnscreenConsoleIfNeeded(!0,function(){ITSLogger.showErrorIndicator(t)})},ITSLogger.setLoggingPreferences=function(t,n,r,i){ITSLogger._loadOnscreenConsoleIfNeeded(),t=ITSLogger._parseLogLevel(t),i=ITSLogger._parseLogPersistence(i);
var s=its.url.parentDomainWithNumComponents(document.domain,ITSLogger.DOMAIN_NAME_COMPONENTS);
if(t==null||t=="")ITSLogger._setDefaultLoggingPreferences(),its.cookies.remove(ITSLogger.STORAGE_KEY,s),sessionStorage&&sessionStorage.removeItem(ITSLogger.STORAGE_KEY),localStorage&&localStorage.removeItem(ITSLogger.STORAGE_KEY);
else{var o="";
t!=undefined&&(o+=t,ITSLogger._cachedPreferences.level=t),o+="-",n!=undefined&&(o+=n?"1":"0",ITSLogger._cachedPreferences.useOnScreenConsole=n),o+="-",r&&(o+=r,ITSLogger._cachedPreferences.regexFilterString=r,ITSLogger._cachedPreferences.regexFilterObject=new RegExp(ITSLogger._cachedPreferences.regexFilterString)),o+="-",i!=undefined&&(o+=i,ITSLogger._cachedPreferences.persistence=i);
var u=null;
i==ITSLogger.SESSION?sessionStorage?(localStorage.removeItem(ITSLogger.STORAGE_KEY),sessionStorage.setItem(ITSLogger.STORAGE_KEY,o)):u=its.cookies.EXPIRE_SESSION:i==ITSLogger.PERM&&(localStorage?(sessionStorage.removeItem(ITSLogger.STORAGE_KEY),localStorage.setItem(ITSLogger.STORAGE_KEY,o)):u=its.cookies.its.cookies.EXPIRE_ONE_YEAR),u&&its.cookies.set(ITSLogger.STORAGE_KEY,o,u,"/",s)}},ITSLogger._loggingEnabledToServer=function(){return its.serverData&&!its.property("ITSLogger.DisableLogging")&&typeof JSON!="undefined"},ITSLogger._omnitureEventHandler=function(t){t.omnitureQueryParams.eventName=t.eventName,ITSLogger.named("ITSOmniture").stats(null,t.omnitureQueryParams,!0)},ITSLogger.ITSMetrics={},ITSLogger.ITSMetrics.Events={},window.ITSMetrics?(ITSLogger.ITSMetrics.Events.CLICK=ITSMetrics.Events.CLICK,ITSLogger.ITSMetrics.Events.PAGE=ITSMetrics.Events.PAGE):(ITSLogger.ITSMetrics.Events.CLICK="ITSMetrics.Events.CLICK",ITSLogger.ITSMetrics.Events.PAGE="ITSMetrics.Events.PAGE"),its.notifications.subscribe(ITSLogger.ITSMetrics.Events.CLICK,ITSLogger._omnitureEventHandler),its.notifications.subscribe(ITSLogger.ITSMetrics.Events.PAGE,ITSLogger._omnitureEventHandler),ITSLogger._loadOnscreenConsoleIfNeeded(),ITSLogger._processQueuedMessages(),its.x.dynaLoadResourceFile(its.property("ITSLogger.jsUrlForLoggerSettingsPanel")),its.x.dynaLoadResourceFile(its.property("ITSLogger.cssUrlForLoggerSettingsPanel")),window.its||(window.its={}),window.its.sf||(window.its.sf={}),its.sf.LocalStorage={};
if(its.sf.Client._isRunning()){its.sf.LocalStorage.isSupported=!0;
var isITunesObjectAvailable=typeof iTunes!="undefined",isITMSObjectAvailable=typeof itms!="undefined";
if(isITunesObjectAvailable&&iTunes.deviceLocalStorage)its.sf.LocalStorage.setItem=function(){return iTunes.deviceLocalStorage.setValue.apply(iTunes.deviceLocalStorage,arguments)},its.sf.LocalStorage.getItem=function(){return iTunes.deviceLocalStorage.valueForKey.apply(iTunes.deviceLocalStorage,arguments)},its.sf.LocalStorage.removeItem=function(){return iTunes.deviceLocalStorage.removeValue.apply(iTunes.deviceLocalStorage,arguments)},its.sf.LocalStorage.clear=function(){return iTunes.deviceLocalStorage.removeAllItems.apply(iTunes.deviceLocalStorage,arguments)};
else if(isITunesObjectAvailable&&iTunes.localStorage)its.sf.LocalStorage.setItem=function(){return iTunes.localStorage.setItem.apply(iTunes.localStorage,arguments)},its.sf.LocalStorage.getItem=function(){return iTunes.localStorage.getItem.apply(iTunes.localStorage,arguments)},its.sf.LocalStorage.removeItem=function(){return iTunes.localStorage.removeItem.apply(iTunes.localStorage,arguments)},its.sf.LocalStorage.clear=function(){return iTunes.localStorage.clear.apply(iTunes.localStorage,arguments)};
else if(!isITunesObjectAvailable&&isITMSObjectAvailable)its.sf.LocalStorage.setItem=function(){return localStorage.setItem.apply(localStorage,arguments)},its.sf.LocalStorage.getItem=function(){return localStorage.getItem.apply(localStorage,arguments)},its.sf.LocalStorage.removeItem=function(){return localStorage.removeItem.apply(localStorage,arguments)},its.sf.LocalStorage.clear=function(){return localStorage.clear.apply(localStorage,arguments)};
else if(isITunesObjectAvailable){var platformCacheMetaTag=document.querySelector("meta[name='platform-cache-id']");
platformCacheMetaTag&&(platformCacheId=Number(platformCacheMetaTag.getAttribute("content")),platformCacheId==13&&(console.error("Spinal Mac: Local Storage is Not Supported"),its.sf.LocalStorage.setItem=function(){console.error("Spinal Mac: Local Storage is Not Supported: setItem is a no-op")},its.sf.LocalStorage.getItem=function(){return console.error("Spinal Mac: Local Storage is Not Supported: getItem always returns null"),null},its.sf.LocalStorage.removeItem=function(){console.error("Spinal Mac: Local Storage is Not Supported: removeItem is a no-op")},its.sf.LocalStorage.clear=function(){console.error("Spinal Mac: Local Storage is Not Supported: clear is a no-op")}))}}SFDelayedImageLoaderController.addSwapSrcAttributeKey=function(t){SFDelayedImageLoaderController.swapSrcAttributeKeys||(SFDelayedImageLoaderController.swapSrcAttributeKeys=[]),SFDelayedImageLoaderController.swapSrcAttributeKeys.push(t)},SFDelayedImageLoaderController.prototype.logDebug=function(t){this._private.logger||(this._private.logger=new ITSLogger("SFDelayedImageLoaderController")),this._private.logger.debug(t)},SFDelayedImageLoaderController.prototype.logDebugUnhideInfo=function(t,n,r){var i=r&&r.length?r[0].getAttribute(its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY):null,s=" +++ "+(i?"firstImage["+its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY+"]="+i:"[empty image list]");
this.logDebug(t+": unhiding delayed images marked: "+n+s)},SFDelayedImageLoaderController.prototype.handleDomReadyImages=function(t){var n=null;
this.swizzleSrcAttribute(),n=document.querySelectorAll(its.ui.Selectors.SRC_SWAP_SELECTOR+"["+its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_IF_NOT_ONSCREEN_MODIFIER_ATTRIBUTE_KEY+"]"),n.each(function(t){var n=null;
its.property("sfdImageIgnoreAutoAfterPageLoadIfNotOnscreen")?(t.setAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY,""),n="ignore"):its.x.element.isOnscreen(t)?(t.setAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY,""),n="onScreen"):(t.setAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY,""),n="offScreen"),its.ui.setDebugAttribute(t,its.ui.Debug.SRC_WAS_AUTO_DELAYED_ATTRIBUTE_KEY,n),t.removeAttribute(its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_IF_NOT_ONSCREEN_MODIFIER_ATTRIBUTE_KEY)});
var r=its.ui.Selectors.SRC_SWAP_SELECTOR;
for(var i in its.ui.Attributes){var s=its.ui.Attributes[i];
s!=its.ui.Attributes.SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY&&s!=its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY&&(r+=":not(["+s+"])")}n=document.querySelectorAll(r),this.logDebugUnhideInfo(t?t:"unknown caller","SRC_LOAD_AUTO_AFTER_DOM_LOAD_MODIFIER_ATTRIBUTE_KEY",n),its.ui.unhideImages(n,this._private.forceUnhide)},SFDelayedImageLoaderController.prototype.handleAfterLoadImages=function(t){this.swizzleSrcAttribute();
var n=document.querySelectorAll(its.ui.Selectors.SRC_SWAP_SELECTOR+"["+its.ui.Attributes.SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY+"]");
t||(t="unknown"),this.logDebugUnhideInfo(t,"SRC_LOAD_AUTO_AFTER_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY",n),its.ui.unhideImages(n,this._private.forceUnhide)},SFDelayedImageLoaderController.prototype.domReady=function(){this._private.domReadyWasCalled||(this._private.domReadyWasCalled=!0,this._private.failsafeUnhide||defer(this,this.failsafeUnhide,3e4),this.handleDomReadyImages("domReady"))},SFDelayedImageLoaderController.prototype.load=function(){if(!this._private.loadWasCalled){this._private.loadWasCalled=!0,this.swizzleSrcAttribute();
var t=document.querySelectorAll(its.ui.Selectors.SRC_SWAP_SELECTOR+"["+its.ui.Attributes.SRC_LOAD_AUTO_AT_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY+"]");
this.logDebugUnhideInfo("load","SRC_LOAD_AUTO_AT_PAGE_LOAD_MODIFIER_ATTRIBUTE_KEY",t),its.ui.unhideImages(t,this._private.forceUnhide)}},SFDelayedImageLoaderController.prototype.afterLoad=function(t){this._private.afterLoadWasCalled||(this._private.afterLoadWasCalled=!0,this.handleAfterLoadImages("afterLoad"))},SFDelayedImageLoaderController.prototype.domInserted=function(t){this.handleDomReadyImages("domInserted")},SFDelayedImageLoaderController.prototype.afterInserted=function(){this.handleAfterLoadImages("afterInserted")},SFDelayedImageLoaderController.prototype.failsafeUnhide=function(){if(!this._private.failsafeUnhide){this._private.failsafeUnhide=!0;
var t=!1;
this._private.forceUnhide=!0,this._private.domReadyWasCalled||(t=!0,this.logDebug("failsafeUnhide: domReady never called... invoking by hand..."),this.domReady()),this._private.loadWasCalled||(t=!0,this.logDebug("failsafeUnhide: load never called... invoking by hand..."),this.load()),this._private.afterLoadWasCalled||(t=!0,this.logDebug("failsafeUnhide: afterLoad never called... invoking by hand..."),this.afterLoad()),t||this.logDebug("failsafeUnhide: no failsafe needed"),this._private.forceUnhide=!1}},SFDelayedImageLoaderController.prototype.swizzleSrcAttribute=function(){SFDelayedImageLoaderController.swapSrcAttributeKeys&&document.querySelectorAll("img["+its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY+"]").each(function(e){var t=null,n=null;
if(SFDelayedImageLoaderController.swapSrcAttributeKeys)for(var r=0;
!n&&r<SFDelayedImageLoaderController.swapSrcAttributeKeys.length;
r++)t=SFDelayedImageLoaderController.swapSrcAttributeKeys[r],n=e.getAttribute(t);
if(n){var i=t?t:its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY;
its.ui.setDebugAttribute(e,its.ui.Debug.SRC_WAS_SWAPPED_ATTRIBUTE_KEY,i),e.setAttribute(its.ui.Attributes.SRC_SWAP_ATTRIBUTE_KEY,n)}})},function(){window.its&&its.kit&&its.kit.createController("SFDelayedImageLoader",{controller:{_private:{domReadyWasCalled:!1,loadWasCalled:!1,afterLoadWasCalled:!1,failsafeUnhide:!1},init:SFDelayedImageLoaderController.prototype.init,domReady:SFDelayedImageLoaderController.prototype.domReady,load:SFDelayedImageLoaderController.prototype.load,afterLoad:SFDelayedImageLoaderController.prototype.afterLoad,domInserted:SFDelayedImageLoaderController.prototype.domInserted},component:{}})}();
if(window.devicePixelRatio>1)SFDelayedImageLoaderController.addSwapSrcAttributeKey("src-swap-high-dpi");
else if(window.matchMedia){var firstMovedToHiDpiScreen=!1;
window.matchMedia("(-webkit-device-pixel-ratio: 1)").addListener(function(){!firstMovedToHiDpiScreen&&window.devicePixelRatio==2&&(firstMovedToHiDpiScreen=!0,console.log("moved to hidpi screen"),document.body.addClassName("hd-device"),document.body.removeClassName("sd-device"),document.querySelectorAll("img[src-swap-high-dpi]").each(function(e){bind(this,function(e){var t=new Image;
t.addEventListener("load",function(t){e.src=e.getAttribute("src-swap-high-dpi")}),t.src=e.getAttribute("src-swap-high-dpi")})(e)}),SFDelayedImageLoaderController.addSwapSrcAttributeKey("src-swap-high-dpi"))})}var iTSInclude={};
iTSInclude.clientSideInclude=function(t,n,r,i,s,o){var u=new Object;
if(t!=null){var a=null;
typeof t=="string"?a=document.getElementById(t):typeof t=="object"&&(a=t),u.element=a}u.url=n,u.timeout=r,u.successCallback=i,u.failureCallback=s,u.timeoutCallback=o,iTSInclude.makeHttpRequest(u)},iTSInclude.makeHttpRequest=function(t){var n=new Date,r=null,i=!1;
t.element!=null?r=t.element:t.elementId!=null&&(r=document.getElementById(t.elementId)),r&&r.getAttribute("ignore-plists")=="true"&&(i=!0);
var s=t.url,o=t.timeout,u=t.successCallback,a=t.failureCallback,f=t.timeoutCallback;
f==null&&(f=a);
var l=t.formParams,c=t.jsonParams,h=t.method,p=t.checkForDialog,d=t.dialogCallbacks,v=t.authDialogCallbacks,m=t.acceptStatus204?{200:"200",204:"204"}:{200:"200"},g;
if(t.useJscBridge==1){if(!iTunes.createXHR)throw"JSC bridge XHR not supported: iTunes.createXHR() is not present";
g=iTunes.createXHR()}else g=new XMLHttpRequest;
var y=!1;
if(!t.dontChangeUrl){var b=its.url.queryParamValue("guid");
b&&(s=its.url.appendUrlParameter(s,"guid",b))}g.onreadystatechange=function(){if(!y&&g.readyState==4)if(!m.hasOwnProperty(g.status))a!=null&&a.call(null,g);
else{if(g.responseXML!=null&&p){if(iTSInclude.handleDialogBox(g.responseXML,d,v,g))return;if(iTSInclude.isOldStyleError(g.responseXML)){a!=null&&a.call(null,g);
return}}var e=its.isXMLResponse(g);
r!=null&&(!i||!e)&&(r.innerHTML=g.responseText),u!=null&&u.call(null,g)}};
if(l!=null){var w=iTSInclude.requestBody(l);
h?g.open(h.toUpperCase(),s,!0):g.open("POST",s,!0),typeof t.contentType!="undefined"?g.setRequestHeader("Content-type",t.contentType):g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.withCredentials&&(g.withCredentials=!0),g.send(w)}else if(c){var E=c;
typeof c=="object"&&(E=JSON.stringify(c)),h?g.open(h.toUpperCase(),s,!0):g.open("POST",s,!0),g.setRequestHeader("Content-type","application/json"),t.withCredentials&&(g.withCredentials=!0),g.send(E)}else h?g.open(h.toUpperCase(),s,!0):g.open("GET",s,!0),t.withCredentials&&(g.withCredentials=!0),g.send();
return o>0&&setTimeout(function(){var e=new Date;
y=!0,g.readyState!=4&&(g.abort(),f!=null&&f.call(null,g))},o),g},iTSInclude.requestBody=function(e){var t=!0,n=new Array;
for(var r in e)t?t=!1:n.push("&"),n.push(encodeURIComponent(r)),n.push("="),n.push(encodeURIComponent(e[r]));
return n.join("")},iTSInclude.handleDialogBox=function(e,t,n,r){var i=iTSInclude.getDialogPlist(e);
return i==null?!1:(its.client.showPlistDialog?its.client.showPlistDialog(i,t,n):typeof iTunes!="undefined"&&iTunes.addProtocol?iTunes.addProtocol(r.responseText):console.log("Client does not support xml plist handling."),!0)},iTSInclude.getDialogPlist=function(e){var t=null,n=e.getElementsByTagName("key");
for(var r=0;
n!=null&&r<n.length;
r++)if(n[r].textContent=="dialog"&&n[r].nextElementSibling!=null&&n[r].nextElementSibling.nodeName=="dict"){t=n[r].nextElementSibling;
break}if(t==null)return null;
t.parentElement.removeChild(t);
var i=document.createElement("plist");
return i.setAttribute("version","1.0"),i.appendChild(t),i},iTSInclude.isOldStyleError=function(e){return its.client.getPlistStringValueForKey(e,"failureType")!=null},iTSInclude.makeRequestAndUpdateFragments=function(e,t,n){iTSInclude.makeHttpRequest({url:e,formParams:t||{},successCallback:function(e){iTSInclude.updateFragments(e.responseText),n&&n(e)},failureCallback:function(t){its.client.error("ajax failure for fragements include request ["+t.status+"] = "+e)}})},iTSInclude.updateFragments=function(e){var t=newElement("div",e),n=t.querySelectorAll("[fragment-replacement]");
n.each(function(e){var t=e.getAttribute("fragment-replacement");
iTSInclude.replaceFragment(t,e)})},iTSInclude.replaceFragment=function(e,t){var n="[fragment-replacement="+e+"]",r=document.querySelectorAll(n);
if(r.length>0){r.length>1&&its.client.info("we found more than 1 fragment with fragment-replacement id "+n+", updating all");
for(var i=0;
i<r.length;
i++){var s=r[i],o=i==0?t:t.cloneNode(!0);
s.parentNode.replaceChild(o,s)}}},iTSInclude.isJsonResponse=function(t){var n=!1;
try{var r=t.getAllResponseHeaders().toLowerCase().indexOf("json");
n=its.isDefinedNonNull(t)&&r!=-1}catch(i){}return n},iTSKitImageLoader.prototype.handleEvent=function(e){this.numImages--,this.images.remove(e.currentTarget),this.goOnReady()},iTSKitImageLoader.prototype.addElements=function(e){if(e==null)return;e.each?e.each(function(e){this.addElements(e)},this):this.addImages(e)},iTSKitImageLoader.prototype.addImages=function(e){this.images.pushEach(e.querySelectorAll("img"))},iTSKitImageLoader.prototype.goOnReady=function(){this.numImages<1&&(clearTimeout(this.timeout),this.callback&&this.callback())},iTSKitImageLoader.prototype.goOnTimeout=function(){var e=this.callback;
this.callback=null,e()},ITSParentalRatingUtil={},ITSParentalRatingUtil.Type={Movie:"rating-movie",Music:"rating-riaa",Podcast:"rating-podcast",Software:"rating-software",Tv:"rating-tv",Book:"rating-book"},ITSParentalRatingUtil.ratingMapFromElement=function(e){var t={};
for(var n in ITSParentalRatingUtil.Type){var r=ITSParentalRatingUtil.Type[n],i=ITSParentalRatingUtil._parseRatingForRatingValue(e.getAttribute(r));
t[r]=i}return t},ITSParentalRatingUtil.ratingMapFromJsonData=function(e){var t={};
for(var n in e){var r=ITSParentalRatingUtil._parseRatingForRatingValue(e[n]);
t[n]=r}return t},ITSParentalRatingUtil._parseRatingForRatingValue=function(e){if(!e)return null;
var t=null,n=null,r=e.indexOf(",");
return r>=0?(t=e.substring(0,r),n=e.substring(r+1)):t=e,new ITSParentalRating(n,t)},window.its||(window.its={}),window.its.client||(window.its.client={}),window.its.client.log||(window.its.client.log=function(e){window.console&&console.log&&console.log(e)}),window.ITSMetrics||(window.ITSMetrics={}),ITSMetrics.decodeMetricsPassThruParams=function(e){if(e==null)return null;
var t=its.string.xmlUnescape(e),n=its.url.parseQueryParams(t);
return its.client.log(n),n},ITSMetrics.encodeMetricsPassThruParams=function(e){if(e==null)return null;
var t="",n=0;
for(var r in e){var i=e[r];
n>0&&(t+="&"),t+=r+="="+encodeURIComponent(i),n++}return its.string.xmlEscape(t)},ITSMetrics.isOmnitureSupportedOnClient=function(){var e=!0;
return window.navigator.userAgent.indexOf("MacAppStore")>=0&&(e=its.string.compareNumerically(iTunes.systemVersion(),"10.9")<0),e},ITSMetrics.omniturePageName=function(){return ITSMetrics.omniture&&ITSMetrics.omniture.pageName?ITSMetrics.omniture.pageName:null},ITSMetrics.omnitureChannel=function(){return ITSMetrics.omniture&&ITSMetrics.omniture.channel?ITSMetrics.omniture.channel:null},ITSMetrics.processQueryParameterInfoInCurrentRequest=function(e){var t=its.url.queryParamsDict();
if(!its.isEmpty(t)){e.campaign=t.v0;
var n={},r=ITSMetrics.decodeMetricsPassThruParams(t["ign-mpt"]);
r&&(n=r);
var i=ITSMetrics.decodeMetricsPassThruParams(t["gc-mpt"]);
for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);
for(var s in n)if(s.length>=1&&s.length<=3){var o=parseInt(s.substr(1),10);
isNaN(o)||(s[0]=="c"?e["prop"+o]=n[s]:s[0]=="v"&&(o===0?e.campaign=n[s]:e["eVar"+o]=n[s]))}var u=t["ign-msr"];
if(u){its.client.log("Found SEO Referrer: "+u);
var a=ITSMetrics._parseHostAndSearchTerm(u);
its.client.log("Referrer domain: "+a.hostname+", search term: "+a.searchTerm),a.hostname&&a.hostname.indexOf("itunes.apple.com")?(console.log("Setting seo referrer cookie: "+u),its.cookies.set("seoReferrer",u,its.cookies.EXPIRE_ONE_DAY,null,"itunes.apple.com"),e.prop23=a.hostname,e.eVar23=a.hostname,e.prop24=a.searchTerm,e.eVar24=a.searchTerm):its.client.log("SEO Referrer's hostname is an SEO Page.  Ignoring")}}},ITSMetrics.userAgentForMetrics=function(){var e=navigator.userAgent;
return e.indexOf("å©")==0&&(e="iTunes Pre 9.2 (Windows Version Unknown)"),e},ITSMetrics.gameCenterUserAgent="GameCenter",ITSMetrics.gameCenterPrefix=ITSMetrics.gameCenterUserAgent+"-",ITSMetrics.isGameCenter=function(e){return e.length>ITSMetrics.gameCenterUserAgent.length&&e.substr(0,ITSMetrics.gameCenterUserAgent.length)==ITSMetrics.gameCenterUserAgent},ITSMetrics._parseHostAndSearchTerm=function(t){var n={},r=its.url.parseHostname(t),i=null,s=null;
return r.indexOf("www.google.")>=0||r.indexOf(".ask.com")>=0||r=="www.bing.com"?i="q":r.indexOf(".yahoo.com")>=0&&(i="p"),i&&(s=its.url.queryParamValue(i,t),s&&(n.searchTerm=s)),n.hostname=r,n},ITSMetrics.metricsId=function(){return its.cookies.get(ITSMetrics.OMNITURE_COOKIE_NAME)},window.ITSMetrics||(window.ITSMetrics={}),ITSMetrics.OMNITURE_HOST="metrics.apple.com",ITSMetrics.OMNITURE_HOST_SECURE="securemetrics.apple.com",ITSMetrics.OMNITURE_COOKIE_NAME="s_vi",ITSMetrics.OMNITURE_COOKIE_DOMAIN=".apple.com",ITSMetrics.Events={},ITSMetrics.Events.PAGE="ITSMetrics.Events.PAGE",ITSMetrics.Events.CLICK="ITSMetrics.Events.CLICK",ITSMetrics.createBaselineOmnitureObject=function(){return ITSMetrics._libraryInstance==null&&(ITSMetrics._libraryInstance=new ITSOmnitureLibrary),ITSMetrics._libraryInstance},ITSOmnitureLibrary=Class.create("",{initialize:function(e){ITSMetrics.reportingSuite&&(this.hier5=ITSMetrics.reportingSuite)},t:function(){var t={};
document.referrer&&document.referrer.length>0&&(t.r=document.referrer),t.ch=this.channel,t.products=this.products,this._emitPing(t,null,!1)},tl:function(t,n,r){var i={};
i.pe="lnk_"+n,i.pev2=r;
var s=typeof t!="boolean"?ITSLocationMetricsUtil.hrefForTargetElement(t):"";
s!==""&&(i.pev1=s),this._emitPing(i,this.linkTrackVars.split(","),!0)},_emitPing:function(t,n,r){var i=new Date,s=i.getYear(),o={};
o.AQB=1,o.ndh=1,o.t=i.getDate()+"/"+i.getMonth()+"/"+(s<1900?s+1900:s)+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+" "+i.getDay()+" "+i.getTimezoneOffset(),o.ce="UTF-8",o.cl=15778463,o.pageName=this.pageName,o.g=window.location.href;
if(t&&Object.keys){var u=Object.keys(t);
for(var a=0;
a<u.length;
a++){var f=u[a];
o[f]=t[f]}}this.campaign&&(o.v0=this.campaign);
var l=this._whitelistArrayToMap(n);
for(var a=0;
a<50;
a++){if(a<=5){var c="hier"+a,h=this[c];
typeof h!="undefined"&&h!==null&&this._shouldIncludeVariable(l,c)&&(o["h"+a]=h)}var p="prop"+a,d=this[p];
typeof d!="undefined"&&d!==null&&this._shouldIncludeVariable(l,p)&&(o["c"+a]=d);
var v="eVar"+a,m=this[v];
typeof m!="undefined"&&m!==null&&this._shouldIncludeVariable(l,v)&&(o["v"+a]=m)}o.s=screen.width+"x"+screen.height,o.c=screen.colorDepth,o.v=navigator.javaEnabled()?"Y":"N",o.k="Y",o.bw=window.innerWidth,o.bh=window.innerHeight,o.AQE=1,o.sfcustom="1";
var g=window.location.protocol=="https:"?"https://securemetrics.apple.com":"http://metrics.apple.com";
g+="/b/ss/applesuperglobal/1/H.20.3/";
var y="s"+Math.floor(i.getTime()/108e5)%10+Math.floor(Math.random()*1e13);
g+=y,g=its.url.appendUrlParameters(g,o);
if("iTunes"in window&&"device"in iTunes&&its.string.compareNumerically(its.client.version(),"6.0")>=0)iTunes.pingURL(g);
else{var b=new Image;
b.src=g}var w=r?ITSMetrics.Events.CLICK:ITSMetrics.Events.PAGE,E=new ITSEvent(w,this);
E.omnitureQueryParams=o,E.pageData=ITSMetrics.pageData,its.notifications.publish(w,E)},_shouldIncludeVariable:function(t,n){return!t||t[n]},_whitelistArrayToMap:function(t){if(!t)return null;
var n={};
for(var r=0;
r<t.length;
r++)n[t[r]]=!0;
return n}}),window.addEventListener("pagehide",function(e){ITSPageMetricsUtil.onPageHidden(e)},!1),ITSPageMetricsUtil.ReferrerPageInfoKey="itsMetricsR",ITSPageMetricsUtil.MetricsStringSeparator="@@",ITSPageMetricsUtil.ADAM_ID="metrics-adamId",ITSPageMetricsUtil.logger=ITSLogger.named("ITSPageMetricsUtil"),ITSPageMetricsUtil.onPageHidden=function(t){var n=ITSPageMetricsUtil.currentPageInfo();
n&&(ITSPageMetricsUtil._saveReferrerPageInfo(n),delete ITSPageMetricsUtil._currentPageInfo)},ITSPageMetricsUtil.currentPageInfo=function(){if(!its.isDefined(ITSPageMetricsUtil._currentPageInfo)){var t=ITSMetrics.omniturePageName(),n=ITSPageMetricsUtil._pageNameExtrasForBuyMetrics(),r=ITSMetrics.omnitureChannel();
t?ITSPageMetricsUtil._currentPageInfo=new ITSMetricsPageInfo(t,n,r):ITSPageMetricsUtil._currentPageInfo=null}return ITSPageMetricsUtil._currentPageInfo},ITSPageMetricsUtil.handleDV6PageEventForPageData=function(e,t,n,r){var i=function(e,t){return typeof e=="boolean"?e:t},s={restoreOnSwoopyClose:i(t,!1),pingOnDidReAppear:i(n,!0),suppressLoadPing:i(r,!1)};
i(its.property("DV6.EnableOmnitureCachedPagePing"),!0)||(s.pingOnDidReAppear=!1),"productData"in e&&(e=e.productData);
var o="omnitureMetrics"in e;
o?ITSPageMetricsUtil._DV6PageHandler=function(t){ITSPageMetricsUtil.handleSF6PageEvent(e,t)}:ITSPageMetricsUtil._DV6PageHandler=function(){},o&&(ITSPageMetricsUtil._DV6PageHandler(s.suppressLoadPing),s.suppressLoadPing&&(ITSPageMetricsUtil._didDisappear=!0));
var u=!1;
return its.sf.Platform?u=its.sf.Platform.iPad():its.client&&(u=its.client.platformIsK2),u&&!ITSPageMetricsUtil._swoopyCloseHandler?(s.restoreOnSwoopyClose&&o?(console.warn("  + enabled swoopy close handler for "+e.omnitureMetrics.pageName),ITSPageMetricsUtil._swoopyCloseHandler=function(){ITSPageMetricsUtil.handleSF6PageEvent(e,!0)}):(console.warn("  - disabled swoopy close handler"),ITSPageMetricsUtil._swoopyCloseHandler=function(){console.warn("_swoopyCloseHandler() disabled")}),its.notifications.subscribe("swoopy:close",ITSPageMetricsUtil._swoopyCloseHandler)):s.restoreOnSwoopyClose&&console.warn("Ignored restoreOnSwoopyClose; _swoopyCloseHandler already exists"),"addEventListener"in iTunes&&"removeEventListener"in iTunes&&(ITSPageMetricsUtil._pageReappearHandler&&!s.pingOnDidReAppear?(iTunes.removeEventListener("didreappear",ITSPageMetricsUtil._pageReappearHandler,!1),delete ITSPageMetricsUtil._pageReappearHandler):!ITSPageMetricsUtil._pageReappearHandler&&s.pingOnDidReAppear&&(ITSPageMetricsUtil._pageReappearHandler=function(){ITSPageMetricsUtil._didDisappear&&(ITSPageMetricsUtil._DV6PageHandler(!1),ITSPageMetricsUtil._didDisappear=!1)},iTunes.addEventListener("didreappear",ITSPageMetricsUtil._pageReappearHandler,!1),iTunes.addEventListener("diddisappear",function(){ITSPageMetricsUtil._didDisappear=!0}))),o},ITSPageMetricsUtil.handleSF6PageEvent=function(e,t){ITSMetrics.pageData=e;
if(e.omnitureMetrics){ITSMetrics.reportingSuite=its.property("SF6.Metrics.ReportingSuite"),ITSMetrics.isClickMetricsEnabled=e.omnitureMetrics.isClickMetricsEnabled,ITSMetrics.isBuyMetricsEnabled=e.omnitureMetrics.isBuyMetricsEnabled;
if("_WARNING"in e.omnitureMetrics){var n=newElement("p",e.omnitureMetrics._WARNING);
n.style["-webkit-user-select"]="text",n.style["background-color"]="red",n.style.width="100%",n.style.margin="10px",n.style["font-size"]="24px",document.body.insertBefore(n,document.body.firstChild)}ITSMetrics.omniture&&ITSMetrics.omniture.pageName!=e.omnitureMetrics.pageName&&ITSPageMetricsUtil.onPageHidden(null),ITSMetrics.omniture=ITSMetrics.createBaselineOmnitureObject(),ITSMetrics.omniture.pageName=e.omnitureMetrics.pageName,ITSMetrics.omniture.products=e.omnitureMetrics.products,ITSMetrics.omniture.prop22=ITSMetrics.omniture.eVar22=e.omnitureMetrics.format,"channel"in e.omnitureMetrics&&(ITSMetrics.omniture.channel=e.omnitureMetrics.channel),"dsid"in e.omnitureMetrics&&(ITSMetrics.omniture.prop28=ITSMetrics.omniture.eVar28=e.omnitureMetrics.dsid);
var r=ITSMetrics.omniture.prop12=ITSMetrics.omniture.eVar12=navigator.userAgent;
ITSMetrics.isGameCenter(r)&&(ITSMetrics.omniture.pageName&&(ITSMetrics.omniture.pageName=ITSMetrics.gameCenterPrefix+ITSMetrics.omniture.pageName),ITSMetrics.omniture.channel&&(ITSMetrics.omniture.channel=ITSMetrics.gameCenterPrefix+ITSMetrics.omniture.channel)),"searchTerm"in e.omnitureMetrics?ITSMetrics.searchTerm=ITSMetrics.omniture.prop2=ITSMetrics.omniture.eVar2=e.omnitureMetrics.searchTerm:(delete ITSMetrics.searchTerm,delete ITSMetrics.omniture.prop2,delete ITSMetrics.omniture.eVar2),ITSMetrics.processQueryParameterInfoInCurrentRequest(ITSMetrics.omniture)}(!document||!document.hidden)&&!t&&e.omnitureMetrics&&e.omnitureMetrics.isPageMetricsEnabled&&ITSMetrics.isOmnitureSupportedOnClient()?ITSMetrics.omniture.t():ITSPageMetricsUtil.logger.warn("ITSMetrics: page ping disabled")};
if("its"in window&&"sf6"in its){var isDesktop=!1;
its.sf.Platform?isDesktop=its.sf.Platform.desktop():its.client&&(isDesktop=its.client.platformIsDesktop),isDesktop&&window.addEventListener("load",function(e){e.target==window.document&&("omnitureMetrics"in its.serverData.pageData||"metrics"in its.serverData.pageData)&&ITSPageMetricsUtil.handleSF6PageEvent(its.serverData.pageData)},!1)}ITSPageMetricsUtil.referrerPageInfo=function(){if(!its.isDefined(ITSPageMetricsUtil._referrerPageInfo)){ITSPageMetricsUtil._referrerPageInfo=null;
var t=its.cookies.get(ITSPageMetricsUtil.ReferrerPageInfoKey);
if(its.isDefinedNonNull(t)){var n=t.split(ITSPageMetricsUtil.MetricsStringSeparator);
if(n.length>=3){var r=n[0],i=n[1],s=n[2],o=n.length==4?n[3]:null;
ITSPageMetricsUtil._referrerPageInfo=new ITSMetricsPageInfo(r,o,i,s)}}}return ITSPageMetricsUtil._referrerPageInfo},ITSPageMetricsUtil.registerClickInCurrentPageInfo=function(t){if(!its.isDefinedNonNull(t))return;var n=ITSPageMetricsUtil.currentPageInfo();
n&&(n.location=t)},ITSPageMetricsUtil._pageNameExtrasForBuyMetrics=function(){var t=null;
return"omniture"in ITSMetrics&&"prop28"in ITSMetrics.omniture&&ITSMetrics.omniturePageName()&&(t=this.prop28),t},ITSPageMetricsUtil._saveReferrerPageInfo=function(t){if(!its.isDefinedNonNull(t))return;var n=[ITSPageMetricsUtil._prepareSerializedInfo(t.pageName),ITSPageMetricsUtil._prepareSerializedInfo(t.channelName),ITSPageMetricsUtil._prepareSerializedInfo(t.location),ITSPageMetricsUtil._prepareSerializedInfo(t.pageNameExtrasForBuyMetrics)],r=n.join(ITSPageMetricsUtil.MetricsStringSeparator);
r?(its.cookies.set(ITSPageMetricsUtil.ReferrerPageInfoKey,r,its.cookies.EXPIRE_SESSION,null,"itunes.apple.com"),ITSPageMetricsUtil.logger.info("referrer page info: saving cookie: "+r)):(its.cookies.remove(ITSPageMetricsUtil.ReferrerPageInfoKey),ITSPageMetricsUtil.logger.info("referrer page info: expiring cookie"))},ITSPageMetricsUtil._prepareSerializedInfo=function(t){return t?t.replace(ITSPageMetricsUtil.MetricsStringSeparator," "):""},ITSPageMetricsUtil.pageMetricsByAppendingPageNameDetails=function(e,t){if(null==t||t.length==0)return e;
if(!e.pageName)return e;
if(null==e||"object"!=typeof e)return e;
var n=e.constructor();
for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);
return n.pageName+="-"+t,n},ITSLocationMetricsUtil.LOCATION_KEY="metrics-loc",ITSLocationMetricsUtil.LOCATION_DETAILS_KEY="metrics-loc-details",ITSLocationMetricsUtil.LOCATION_LEAF_KEY="metrics-leaf",ITSLocationMetricsUtil.LOCATION_HREF_KEY="metrics-href",ITSLocationMetricsUtil.LOCATION_SEPARATOR="|",ITSLocationMetricsUtil._elementOrAncestorByFunction=function(e,t){while(e&&e!=document){if(t(e))return e;
e=e.parentNode}return null},ITSLocationMetricsUtil.isClickMetricsEnabled=function(t){var n=ITSLocationMetricsUtil._elementOrAncestorByFunction(t.parentNode,function(e){return e.hasAttribute("metrics-click")}),r=n?"true"==n.getAttribute("metrics-click"):ITSMetrics&&ITSMetrics.isClickMetricsEnabled;
return r},ITSLocationMetricsUtil.isBuyMetricsEnabled=function(){return ITSMetrics&&ITSMetrics.isBuyMetricsEnabled},ITSLocationMetricsUtil.generateLocationString=function(t,n,r){var i=[],s=null;
for(var o=t;
o;
o=o.parentNode){var u=ITSLocationMetricsUtil._locationForElement(o),a=!1;
u&&(i.push(u),a=!0);
if(s){var f=null;
u?f=u.metricsElement:o.tagName&&o.tagName.toLowerCase()=="body"&&(f=o),f&&ITSLocationMetricsUtil._modifyChildWithDetailsIfNecessary(f,s)}a&&(s=u)}if(i.length===0)return null;
var l="";
for(;
;){var u=i.pop();
if(!u)break;l.length>0&&(l+=ITSLocationMetricsUtil.LOCATION_SEPARATOR),l+=u.metricsString,u.metricsDetails&&(l+=u.metricsDetails)}var c=ITSMetrics.omniturePageName();
return c&&!n&&(l=c+ITSLocationMetricsUtil.LOCATION_SEPARATOR+l),r&&(l=l+ITSLocationMetricsUtil.LOCATION_SEPARATOR+r),l},ITSLocationMetricsUtil.appendBuyMetricsToBuyParams=function(t,n,r){if(!Object.keys||!t||t.length===0)return t;
buyMetrics=ITSLocationMetricsUtil.getBuyMetricsParams(n,r);
var i=Object.keys(buyMetrics);
for(var s=0;
s<i.length;
s++){var o=i[s];
t+="&"+o+"="+encodeURIComponent(buyMetrics[o])}return t},ITSLocationMetricsUtil.getBuyMetricsParams=function(e,t){var n={};
if(!ITSLocationMetricsUtil.isBuyMetricsEnabled())return n;
ITSMetrics.omniturePageName()&&(n.origPage=ITSMetrics.omniturePageName());
var r=ITSPageMetricsUtil._pageNameExtrasForBuyMetrics();
r&&(n.origPageExtras=r),ITSMetrics.omnitureChannel()&&(n.origPageCh=ITSMetrics.omnitureChannel());
var i=ITSLocationMetricsUtil.generateLocationString(e,!0,t);
i&&(n.origPageLocation=i);
var s=ITSPageMetricsUtil.referrerPageInfo();
s&&(s.pageName&&(n.origPage2=s.pageName),s.pageNameExtrasForBuyMetrics&&(n.origPageExtras2=s.pageNameExtrasForBuyMetrics),s.channelName&&(n.origPageCh2=s.channelName),s.location&&(n.origPageLocation2=s.location));
var o=ITSLocationMetricsUtil.getSearchMetrics(e,"B");
return o&&(n.origPageSearch=o),n},ITSLocationMetricsUtil.getSearchMetrics=function(t,n){var r=ITSMetrics.searchTerm;
if(r){var i=ITSLocationMetricsUtil._getAdamId(t);
i===null&&(i="unknownAdamid");
var s=n+"|"+encodeURIComponent(r)+"|"+i;
return s}return null},ITSLocationMetricsUtil.emitCustomClickEvent=function(e,t){var n=ITSLocationMetricsUtil.isClickMetricsEnabled(e);
ITSMetricsClickHandler._performPing(e,t,n)},ITSLocationMetricsUtil.setCustomClickHref=function(e,t){e&&t&&(e[ITSLocationMetricsUtil.LOCATION_HREF_KEY]=t)},ITSLocationMetricsUtil.hrefForTargetElement=function(e){return e.hasOwnProperty(ITSLocationMetricsUtil.LOCATION_HREF_KEY)?e[ITSLocationMetricsUtil.LOCATION_HREF_KEY]:e.hasAttribute&&e.hasAttribute(ITSLocationMetricsUtil.LOCATION_HREF_KEY)?e.getAttribute(ITSLocationMetricsUtil.LOCATION_HREF_KEY):e.tagName&&e.tagName.toLowerCase()=="a"?e.href:""},ITSLocationMetricsUtil.setCustomClickAdamId=function(e,t){e&&t?e[ITSPageMetricsUtil.ADAM_ID]=t:e&&e[ITSPageMetricsUtil.ADAM_ID]&&delete e[ITSPageMetricsUtil.ADAM_ID]},ITSLocationMetricsUtil._getAdamId=function(t){var n=t;
while(n&&n!=document){if(n.hasAttribute&&n.hasAttribute("adam-id"))return n.getAttribute("adam-id");
if(n[ITSPageMetricsUtil.ADAM_ID])return n[ITSPageMetricsUtil.ADAM_ID];
n=n.parentNode}return null},ITSLocationMetricsUtil._locationForElement=function(e){return e.hasAttribute&&e.hasAttribute(ITSLocationMetricsUtil.LOCATION_KEY)?{metricsString:e.getAttribute(ITSLocationMetricsUtil.LOCATION_KEY),metricsElement:e}:null},ITSLocationMetricsUtil._modifyChildWithDetailsIfNecessary=function(e,t){var n=t.metricsString;
if(n.length>0&&n.charAt(n.length-1)=="_"){var r="["+ITSLocationMetricsUtil.LOCATION_KEY+'="'+n+'"]',i=e.querySelectorAll(r);
if(t.metricsElement.hasAttribute(ITSLocationMetricsUtil.LOCATION_DETAILS_KEY))t.metricsDetails=t.metricsElement.getAttribute(ITSLocationMetricsUtil.LOCATION_DETAILS_KEY);
else{var s=-1;
for(var o=0;
o<i.length;
o++)if(i[o]===t.metricsElement){s=o;
break}s>=0&&(t.metricsDetails=s+1)}}},ITSMetricsClickHandler.Events={CLICK:"ITSMetricsClickHandler.Event.CLICK"},ITSMetricsClickHandler.logger=ITSLogger.named("ITSMetricsClickHandler"),ITSMetricsClickHandler.handleClickEvent=function(e){var t=ITSLocationMetricsUtil.isClickMetricsEnabled(e.target);
if(!t)return;if(e.button!=0||e.ctrlKey==1)return;var n=ITSMetricsClickHandler._clickTargetElement(e.target);
if(!n)return;ITSMetricsClickHandler._performPing(n,null,t)},ITSMetricsClickHandler.handleDropDownChangeEvent=function(e){var t=e.target;
if(!ITSLocationMetricsUtil.isClickMetricsEnabled(t))return;if(t.tagName!="SELECT")return;var n=t.options[t.selectedIndex],r=n;
if(!r)return;ITSMetricsClickHandler._performPing(r,null,!0)},ITSMetricsClickHandler._performPing=function(e,t,n){its.notifications.publish(ITSMetricsClickHandler.Events.CLICK,{name:ITSMetricsClickHandler.Events.CLICK,sender:ITSMetricsClickHandler,target:e,subElementLocation:t});
var r=ITSLocationMetricsUtil.generateLocationString(e,!1);
if(!r)return;t!==null&&(r+=ITSLocationMetricsUtil.LOCATION_SEPARATOR+t);
var i=ITSMetrics.createBaselineOmnitureObject();
i.linkTrackVars="hier5";
var s=ITSLocationMetricsUtil.getSearchMetrics(e,"C");
s&&(i.prop19=s,i.eVar19=s,i.linkTrackVars=i.linkTrackVars+",prop19,eVar19");
var o=ITSLocationMetricsUtil._getAdamId(e);
o!==null&&(i.prop29=o,i.eVar29=o,i.linkTrackVars=i.linkTrackVars+",prop29,eVar29");
if(n){ITSMetricsClickHandler.logger.info("Click metrics: "+r);
var u=n?r:"n/a";
i.prop30=u,i.eVar30=u,i.linkTrackVars+=",prop30,eVar30",ITSLocationMetricsUtil.hrefForTargetElement(e)!==""?i.tl(e,"o",u):i.tl(!0,"o",u),ITSPageMetricsUtil.registerClickInCurrentPageInfo(ITSLocationMetricsUtil.generateLocationString(e,!0))}delete i.linkTrackVars,delete i.prop19,delete i.eVar19,delete i.prop29,delete i.eVar29,delete i.prop30,delete i.eVar30},ITSMetricsClickHandler._clickTargetElement=function(e){var t=e;
while(t&&t!=document){if(t.tagName.toLowerCase()=="a"||t.hasAttribute(ITSLocationMetricsUtil.LOCATION_LEAF_KEY))return t;
t=t.parentNode}return null},ITSMetrics.isOmnitureSupportedOnClient()&&(document.addEventListener("mousedown",ITSMetricsClickHandler.handleClickEvent,!0),document.addEventListener("change",ITSMetricsClickHandler.handleDropDownChangeEvent,!0)),window.its||(window.its={}),window.its.sf||(window.its.sf={}),its.sf.Metrics={},its.sf.Metrics._logger=its.Logger.named("its.sf.Metrics"),its.sf.Metrics._TOPIC_MAIN="xp_its_main",its.sf.Metrics.ActionType={ADD:"add",AD_TRANSPARENCY:"ad_transparency",AD_RELEVANT_YES:"ad_relevant_yes",AD_RELEVANT_NO:"ad_relevant_no",BACK:"back",BUY:"buy",BUY_INITIATE:"buyInitiate",DELETE:"delete",DIALOG:"dialog",DISMISS:"dismiss",DOWNLOAD:"download",FOCUS:"focus",NAVIGATE:"navigate",NOTIFY:"notify",OPEN:"open",PAUSE:"pause",PLAY:"play",REVEAL:"reveal",SAMPLE:"sample",SELECT:"select",SHEET:"sheet",SORT:"sort",STOP:"stop",SUBSCRIBE:"subscribe",UPDATE:"update"},its.sf.Metrics._LOCATION_KEY="metrics-loc",its.sf.Metrics._LOCATION_DETAILS_KEY="metrics-loc-details",its.sf.Metrics._LOCATION_LEAF_KEY="metrics-leaf",its.sf.Metrics.EventType={ACCOUNT:"account",BASE:"base",BUY_CONFIRMED:"buyConfirmed",CLICK:"click",PAGE:"page",DIALOG:"dialog",ENTER:"enter",EXIT:"exit",IMPRESSIONS:"impressions",MEDIA:"media",SEARCH:"search",TIME_ADJUSTED:"timeAdjusted"},its.sf.Metrics.itmsAvailable=typeof itms!="undefined",its.sf.Metrics.iTunesAvailable=typeof iTunes!="undefined",its.sf.Metrics.bagMetrics=function(){if(!its.sf.Metrics._bagMetricsCache){its.sf.Metrics._bagMetricsFull=null,its.sf.Metrics._bagMetricsCache={};
var e=null,t=null,n=null;
its.sf.Metrics.itmsAvailable?(t=itms.getBag(),n=typeof Device!="undefined"&&Device.appIdentifier):its.sf.Metrics.iTunesAvailable&&(t=typeof iTunes.getBag=="function"&&iTunes.getBag(),n=typeof iTunes.appBundleName!="undefined"?iTunes.appBundleName:null),t?(its.sf.Metrics._bagMetricsFull=t.metrics,its.sf.Metrics._bagMetricsFull||(e="Bag: metrics section not found")):e="Bag: bag not found",e&&its.sf.Metrics._logger.error(e);
if(its.sf.Metrics._bagMetricsFull){var r=its.sf.Metrics._bagMetricsFull,i=r[n];
its.reflect.copyKeysAndValues(r,its.sf.Metrics._bagMetricsCache),its.reflect.copyKeysAndValues(i,its.sf.Metrics._bagMetricsCache)}}return its.sf.Metrics._bagMetricsCache},its.sf.Metrics.bagMetricsBase=function(){if(!its.sf.Metrics._bagMetricsBaseCache){var e=its.sf.Metrics.bagMetrics().metricsBase;
its.sf.Metrics._bagMetricsBaseCache={},(its.sf14||its.sf.Metrics.itmsAvailable)&&e&&its.reflect.copyKeysAndValues(e,its.sf.Metrics._bagMetricsBaseCache)}return its.sf.Metrics._bagMetricsBaseCache},its.sf.Metrics.recordEvent=function(e,t,n){var r=e.fields;
r&&(t||(t="xp_its_main"),r=its.sf.Metrics.doesEventContainIadData(r),its.sf.Metrics.itmsAvailable&&itms.recordEvent?(r.xpSendMethod="itms",itms.recordEvent(t,r)):its.sf.Metrics.iTunesAvailable&&iTunes.recordEvent?(r.xpSendMethod="itunes",iTunes.recordEvent(t,r)):its.MetricsQueue&&its.MetricsQueue.recordEvent?(r.xpSendMethod="javascript",its.MetricsQueue.recordEvent(t,r,n)):its.sf.Metrics._logger.warn('No native or JavaScript "recordEvent" method found',null,!0))},its.sf.Metrics.doesEventContainIadData=function(e){if(e.iAd||e.iAdId||e.iAdAlgoId||e.iAdMetadata||e.iAdFormat||e.iAdImpressionId)e.hasiAdData=!0;
else if(e.impressions){var t=e.impressions.length;
for(var n=0;
n<t;
n++)if(e.impressions[n].iAdId||e.impressions[n].iAdAlgoId||e.impressions[n].iAdMetadata||e.impressions[n].iAdFormat||e.impressions[n].iAdImpressionId){e.hasiAdData=!0;
break}}return e},its.sf.Metrics.blacklistedEvents=null,its.sf.Metrics.blacklistedEventsMap=function(){return its.sf.Metrics.configFieldMap("blacklistedEvents")},its.sf.Metrics.blacklistedFields=null,its.sf.Metrics.blacklistedFieldsMap=function(){return its.sf.Metrics.configFieldMap("blacklistedFields")},its.sf.Metrics.configFieldMap=function(e){var t={};
if(its.sf.Metrics.config.disabled)its.sf.Metrics[e]={};
else if(!its.sf.Metrics[e]){t=its.arrayToMap(its.sf.Metrics.config[e]);
var n=its.arrayToMap(its.property("metrics."+e));
its.reflect.copyKeysAndValues(n,t);
var r=its.arrayToMap(its.pageData("metrics.config."+e));
its.reflect.copyKeysAndValues(r,t),Object.keys(t).length&&(its.sf.Metrics[e]=t)}else t=its.sf.Metrics[e];
return t},its.sf.Metrics.eventDisabled=function(e){var t=!1;
if(its.sf.Metrics.config.disabled)t=!0;
else{var n=its.sf.Metrics.blacklistedEventsMap();
n[e]&&(t=!0)}return t},its.sf.Metrics.fieldsMappedData=function(e,t){var n={},r=null;
its.sf.Metrics.config.fieldsMap&&(r=its.objectAtPath(t,its.sf.Metrics.config.fieldsMap));
if(r){if(!its.isArray(e)){var i=[];
i.push(e),e=i}for(var s in r){var o=r[s],u=null;
for(var a=0;
a<o.length;
a++){var f=o[a];
for(var l=0;
l<e.length;
l++){var c=e[l];
u=its.objectAtPath(f,c);
if(u){if(s=="id"){var h=u.toString(),p=h.indexOf("."),d="its";
p!=-1&&(d=h.substring(0,p)),n.idType=d+its.sf.Metrics.config.compoundSeparator+f}break}}if(u)break}u&&(n[s]=u)}}else its.sf.Metrics.config.disabled||its.sf.Metrics._logger.error("fieldsMap does not contain a section called: "+t);
return n},its.sf.Metrics.setLocationInfo=function(e,t,n){if(!its.sf.Metrics.config.disabled){e.metrics||(e.metrics={});
var r=its.sf.Metrics.fieldsMappedData(t,"custom.location");
r.locationType=n,e.metrics.locationInfo=r}},its.sf.Metrics.setTargetInfo=function(e,t,n,r,i,s){if(!its.sf.Metrics.config.disabled){e.metrics||(e.metrics={});
var o={};
o.targetId=t,o.targetId==null&&delete o.targetId,o.targetType=n,o.targetType==null&&delete o.targetType,o.targetActionType=r,o.targetActionType==null&&delete o.targetActionType,o.targetActionUrl=i,o.targetActionUrl==null&&delete o.targetActionUrl,o.targetActionDetails=s,o.targetActionDetails==null&&delete o.targetActionDetails,o.target=n+its.sf.Metrics.config.compoundSeparator+t,o.target==null&&delete o.target,e.metrics.targetInfo=o}},its.sf.Metrics.clearTargetInfo=function(e){its.sf.Metrics.setTargetInfo(e,null,null,null,null,null)},its.sf.Metrics.pingMetricsBeforePageUnload=function(e,t,n,r,i,s){its.sf.Metrics.setTargetInfo(e,t,n,r,i,s),ITSLocationMetricsUtil.setCustomClickHref(e,i),ITSLocationMetricsUtil.emitCustomClickEvent(e,null)},its.sf.Metrics._locationForElement=function(e){return e.hasAttribute&&e.hasAttribute(its.sf.Metrics._LOCATION_KEY)?{metricsString:e.getAttribute(its.sf.Metrics._LOCATION_KEY),metricsElement:e}:null},its.sf.Metrics.assignFieldValue=function(e,t,n,r,i,s){if(t&&t.length>=1){s||(s=t);
var o=its.sf.Metrics.blacklistedFieldsMap(),u=i?i+".":"";
if(!o[t]&&!o[u+t])if(!e||!its.isDefined(e[t])){e||(e={});
var a=its.valueOverride(s);
its.isDefined(a)||(r?a=definedValue(its.pageData(r+"."+s),n):a=n),a&&its.isDefined(a)?e[t]=a:delete e[t]}else its.isDefined(e[t])&&!e[t]&&delete e[t]}return e},its.sf.Metrics.assignFieldValues=function(e,t,n,r,i){if(e)for(var s in e)t=its.sf.Metrics.assignFieldValue(t,s,e[s],n,r,i);
return t},its.sf.Metrics.baseDataFields=function(e,t,n){var r=n?n:null;
if(!r){var i=its.sf.Metrics.bagMetricsBase(),s={};
its.reflect.copyKeysAndValues(i,s);
var o=its.property("metrics.metricsBase");
if(o)for(var u in o)s[u]=o[u];
r=s}if(!r.pageContext&&its.sf.Platform.isITML()&&typeof TabBar!="undefined"&&TabBar.selectedTab){var a=its.App&&its.App.StoreSheetData;
a?r.pageContext="Sheet":r.pageContext=its.string.capitalizeString(TabBar.selectedTab.identifier)}var f=its.sf.Metrics.assignFieldValues(r,e,null,t);
return f},its.sf.Metrics.pageDataFields=function(e,t){var n=its.pageData("metricsBase"),r=its.sf.Metrics.assignFieldValues(n,e,null,t);
return r},its.sf.Metrics.environmentFields=function(e,t){var n={};
n.baseVersion=its.sf.Metrics._BASE_VERSION,n.resourceRevNum=its.property("ITSResourceRevNum"),n.timezoneOffset=(new Date).getTimezoneOffset(),n.clientId=its.cookies.get("xp_ci"),its.sf14||its.sf.Metrics.itmsAvailable?(itms.storefront&&(n.storeFrontHeader=itms.storefront),n.app=Device.appIdentifier,n.hostApp=itms.hostApp,n.appVersion=Device.appVersion,n.osVersion=Device.systemVersion,n.dsId=itms.DSID,n.userAgent=itms.userAgent,n.connection=itms.networkConnectionType,n.screenWidth=Settings.Screen.width,n.screenHeight=Settings.Screen.height,n.pixelRatio=Device.pixelRatio,typeof Device!="undefined"&&Device.capacity&&(n.capacitySystem=its.sf.Metrics._deResNumber(Device.capacity("totalSystemCapacity")),n.capacitySystemAvailable=its.sf.Metrics._deResNumber(Device.capacity("totalSystemAvailable")),n.capacityDisk=its.sf.Metrics._deResNumber(Device.capacity("totalDiskCapacity")),n.capacityData=its.sf.Metrics._deResNumber(Device.capacity("totalDataCapacity")),n.capacityDataAvailable=its.sf.Metrics._deResNumber(Device.capacity("totalDataAvailable")))):its.sf.Metrics.iTunesAvailable&&(n.storeFrontHeader=iTunes.storefront,n.app=iTunes.appBundleName,n.appVersion=its.sf.Client.version(),n.osVersion=its.client&&its.client.osVersion&&its.client.osVersion()||iTunes.systemVersion&&iTunes.systemVersion()||its.sf.Metrics._macOsVersion(),n.dsId=its.sf.Client.dsId(),isNaN(n.dsId)&&(n.dsId=null),n.pageUrl=window&&window.location&&window.location.href?window.location.href:null,n.userAgent=navigator.userAgent,n.screenWidth=screen.width,n.screenHeight=screen.height,n.pixelRatio=window.devicePixelRatio,n.windowInnerWidth=window.innerWidth,n.windowInnerHeight=window.innerHeight,n.windowOuterWidth=window.outerWidth,n.windowOuterHeight=window.outerHeight,n.windowOrientation=window.orientation,n.browserEngineType="AppleWebKit",n.browserType="iTunes",n.browserVersion=its.sf.Client.version()),e=its.sf.Metrics.assignFieldValue(e,"xpPostFrequency",its.sf.Metrics.config.postFrequency,"metrics",t,"postFrequency");
for(aField in n)e=its.sf.Metrics.assignFieldValue(e,aField,n[aField],null,t);
return e},its.sf.Metrics._deResNumber=function(t){if(typeof t!="undefined")return Math.floor(Math.floor(t/1024/1024)/100)*100},its.sf.Metrics.requestId=function(){var t="z",n=Date.now(),r=Math.floor(Math.random()*1e5);
return n=n.toString(36).toUpperCase(),r=r.toString(36).toUpperCase(),its.cookies.get("xp_ci")+t+n+t+r},its.sf.Metrics.derivedFields=function(e,t){var n=e,r=null,i=its.property("metrics.fieldsMap");
i||(i=its.sf.Metrics.config.fieldsMap);
if(i){var s=i.cookies;
if(s)for(var o=0;
o<s.length;
o++){var u=s[o],a=its.cookies.get(u);
a&&(r||(r={}),r[u]=a)}}return r&&(n.cookies=r,n=its.sf.Metrics.assignFieldValues(n,e,null,t)),n},its.sf.Metrics.allDerivedFields=function(e,t,n){var r=its.sf.Metrics.baseDataFields(e,t,n);
return r=its.sf.Metrics.pageDataFields(r,t),r=its.sf.Metrics.environmentFields(r,t),r=its.sf.Metrics.derivedFields(r,t),r},its.sf.Metrics._createConfig=function(){var e={};
its.MetricsQueue&&its.MetricsQueue.config.disabled&&(e.disabled=!0);
if(!e.disabled){var t={};
its.reflect.copyKeysAndValues(its.sf.Metrics.bagMetrics(),t);
var n=its.property("metrics");
e=t;
if(n)for(var r in n)e[r]=n[r];
e.metricsBase=null,delete e.metricsBase;
for(var r in e){var i=its.valueOverride("metrics."+r);
i&&(e[r]=i)}e.localStorage=its.sf.LocalStorage,e.postResponseCallback=its.sf.Metrics._postResponseCallback}return e},its.sf.Metrics._postResponseCallback=function(e,t){if(e==200){var n=its.string.evalJson(t);
if(n){n.setSf&&its.sf.Metrics.iTunesAvailable&&iTunes.setStorefront&&iTunes.storefront!=n.setSf&&(iTunes.version&&its.sf.Metrics._logger.warn("iTunes "+iTunes.version+" x-set-apple-storefront="+n.setSf+" failed (old header="+iTunes.storefront+"). Setting by hand...",null,!0),iTunes.setStorefront(n.setSf));
if(n.setCookies)for(var r=0;
r<n.setCookies.length;
r++){var i=n.setCookies[r],s=its.cookies.get(i.name);
s!=i.value&&its.cookies.set(i.name,i.value,i.expiration,i.path,i.domain)}}}},its.sf.Metrics._macOsVersion=function(e){e||(e=navigator.userAgent);
var t=e.match(/Mac.*OS X ([\d_\-\.]+)/);
return t&&t.length>1?t[1]:null},its.sf.Metrics.setConfig=function(e){if(e&&!e.disabled)if(!its.sf.Metrics.config||its.sf.Metrics.config.stubConfig)its.sf.Metrics.config=e;
else for(var t in e)!its.sf.Metrics.config[t]&&e.hasOwnProperty(t)&&its.isDefined(e[t])&&(its.sf.Metrics.config[t]=e[t]);
else its.sf.Metrics.config={},e?its.sf.Metrics.config.disabled=e.disabled:(its.sf.Metrics.config.stubConfig=!0,its.sf.Metrics.config.disabled=!0);
(!its.sf.Metrics.itmsAvailable||!itms.recordEvent)&&(!its.sf.Metrics.iTunesAvailable||!iTunes.recordEvent)&&its.MetricsQueue&&its.MetricsQueue.recordEvent&&its.MetricsQueue&&its.MetricsQueue.setConfig(its.sf.Metrics.config)},its.sf.Metrics.setConfig(its.sf.Metrics._createConfig()),its.kit.createController("iTSClientSideInclude",{binding:"div[client-side-include-url]",component:{init:function(){this.includeURL=this.element.getAttribute("client-side-include-url"),this.performInclude(),this.listen(window,"storecreditchanged")},performInclude:function(){var e=this.element,t=this.includeURL,n=e.getAttribute("client-side-include-timeout")||3e4;
if(!this.validateDSIDRequirements()||!this.validateConnectionsRequirements()){this.showContentOnRequirementsFailure();
return}if(!t)return;iTSInclude.makeHttpRequest({url:t,timeout:n,successCallback:bind(this,"success"),failureCallback:bind(this,"failure"),timeoutCallback:bind(this,"timeout")})},success:function(e){var t=this.element,n=t.getAttribute("fragment-replacement"),r=e.responseText;
its.kit.bindAfter(function(){n?iTSInclude.replaceFragment(n,newElement("div",r)):this.element.innerHTML=r;
var e=t.getAttribute("metrics-event");
e&&this.performMetricsPing(e),this.sendStatusEvent("success"),t.show()},this),window.iTSKit&&iTSKit.refresh()},failure:function(e){this.showContentOnFailure(),this.sendStatusEvent("failed")},timeout:function(e){this.showContentOnFailure(),this.sendStatusEvent("timeout")},showContentOnRequirementsFailure:function(){this.element.getAttribute("show-default-content-when-required-checks-fail")=="true"&&this.element.show()},showContentOnFailure:function(){this.element.getAttribute("show-default-content-on-timeout-or-failure")=="true"&&this.element.show()},validateDSIDRequirements:function(){if(this.element.getAttribute("require-dsid")=="true"&&its.client.isRunning){var e=its.client.getUserDSID();
if(!e)return!1}return!0},validateConnectionsRequirements:function(){var e=this.element;
if(e.getAttribute("require-opted-into-social")=="true"){var t=document.body.getAttribute("cn-cookie-name"),n=its.cookies.get(t);
if(!n||n=="-1")return!1;
if(e.getAttribute("require-is-following")=="true"){var r=document.body.getAttribute("cn-if-cookie-name"),i=its.cookies.get(r);
if(i=="false")return!1}}return!0},performMetricsPing:function(e){var t=ITSMetrics.omniture.pageName||"UnknownPage",n=ITSMetrics.createBaselineOmnitureObject(),r=t+"|"+e;
n.prop4=r,n.eVar4=r,n.linkTrackVars="hier5,prop4,eVar4",n.tl(!0,"o",e)},sendStatusEvent:function(e){this.dispatchCustomEvent(this.element,"iTSClientSideInclude.event.status",{status:e})},storecreditchangedEvent:function(){var e=this.element.getAttribute("reload-after-buy");
e=="true"&&this.performInclude()}}}),iTSDialog=Class.create("",{initialize:function(e){e||(e={}),this._renderTargetElem=e.renderTargetElem,this._renderTargetElem?this._isModal=!1:this._isModal=its.isDefined(e.isModal)?e.isModal:!0,this._isShieldShaded=!1,this._showCloseIcon=its.isDefined(e.showCloseIcon)?e.showCloseIcon:!1,this._customClass=e.className,this._staticContent=e.content,this._contentUrl=e.contentUrl,this.onLoadCb=e.onLoadCb||its.emptyFunction,this.onPreRenderCb=e.onPreRenderCallback,this.onCloseCb=e.onCloseCb||its.emptyFunction,this.onSubmitCb=e.onSubmitCb||its.emptyFunction,this.onFocus=e.onFocus||its.emptyFunction,this._modalShield=null,this._container=null,this._eventListeners=[],this._isOpen=!1,this._submitButton=null,this._closeButton=null,this._shieldClickCloses=!0},open:function(e){var t=this;
e||(e=its.emptyFunction),this._open(),this._staticContent?this._doRender(this._staticContent,e):iTSInclude.makeHttpRequest({url:this._contentUrl,failureCallback:function(e){its.client.showGenericErrorAlert(),t.close()},successCallback:function(n){its.kit.bindAfter(function(){if(t.onPreRenderCb){var r=t.onPreRenderCb(n);
r&&t._doRender(n.responseText,e)}else t._doRender(n.responseText,e)},t)}})},_doRender:function(e,t){this._renderContent(e),t(),this._submitButton=this._container.querySelector("input[submit-handler],button[submit-handler]"),this._closeButton=this._container.querySelector("input[close-handler],button[close-handler]"),this._setupEventHandlers()},isOpen:function(){return this._isOpen},submitButton:function(){return this._submitButton},openUrl:function(e){var t=this;
this._open(),this._setupEventHandlers()},close:function(){this.blur(),this._removeModalShield(),this._removeDialog(),this._removeEventHandlers(),this._isOpen=!1},closeCleanly:function(e){this.close(),this.onCloseCb(e)},focus:function(){var e=this._container;
this._lastActiveElement=document.activeElement,e.setAttribute("role","group"),e.tabIndex=-1,e.focus(),this.onFocus()},blur:function(){var e=this._container,t=this._lastActiveElement,n=this;
e.removeAttribute("role"),e.tabIndex=1,t&&setTimeout(function(){t.tabIndex||(t.tabIndex=-1),t.focus(),n._lastActiveElement=null},500)},containerElement:function(){return this._container},dismissOnShieldClick:function(){return this._shieldClickCloses},setDismissOnShieldClick:function(e){this._shieldClickCloses=e},_open:function(){this._isModal&&this._showModalShield(),this._showDialog()},_renderContent:function(e){var t=this,n=this._container.querySelector(".dialog-content");
its.isString(e)?n.innerHTML=e:n.appendChild(e),this.onLoadCb(),this._renderTargetElem||this._container.center("fixed"),this._container.querySelector(".connections-spinner").remove(),n.style.opacity=1,its.client&&its.client.screenReaderRunning&&its.client.screenReaderRunning()&&setTimeout(function(){t.focus()},500)},renderAck:function(e){var t=this,n=document.querySelector(".dialog-container .dialog-content");
n.innerHTML='<div class="dialog-ack">'+e+"</div>",window.setTimeout(function(){t.close()},2500)},_onSubmitClick:function(e){this.onSubmitCb(e.target)},_onCloseClick:function(e){this.closeCleanly(e)},_showModalShield:function(){var e=this,t=document.createElement("div");
t.addClassName("dialog-modal-shield"),this._isShieldShaded&&t.addClassName("shaded-shield"),document.body.appendChild(t),this._modalShield=t,this._modalShield.addEventListener("click",bind(this,this._onShieldClick),!0)},_removeModalShield:function(){this._modalShield&&(this._modalShield.remove(),this._modalShield=null)},_showDialog:function(){this._renderTargetElem?this._container=this._renderTargetElem:(this._container=document.createElement("div"),this._container.addClassName("dialog-container"),document.body.appendChild(this._container)),this._customClass&&this._container.addClassName(this._customClass);
if(this._showCloseIcon){var e=newElement("a","","close-preview");
this._container.appendChild(e)}var t=newElement("div","","dialog-content"),n=newElement("div","","connections-spinner");
this._container.appendChild(n),this._renderTargetElem||n.center(),this._container.appendChild(t),this._renderTargetElem||(this._isOpen=!0,this._container.center("fixed"))},_removeDialog:function(){this.isOpen()&&(this._container.remove(),this._container=null)},_setupEventHandlers:function(){this._removeEventHandlers();
var e=this._container.querySelector(".close-preview");
this._eventListeners.push([e,"click",bindAsEventListener(this,this._onCloseClick),!0]),this._eventListeners.push([this._closeButton,"click",bindAsEventListener(this,this._onCloseClick),!0]),this._eventListeners.push([this._submitButton,"click",bindAsEventListener(this,this._onSubmitClick),!0]),this._eventListeners.push([document.body,"keydown",bindAsEventListener(this,this._onKeyDownHandler),!1]);
for(var t=0;
t<this._eventListeners.length;
t++){var n=this._eventListeners[t];
n[0]&&n[0].addEventListener(n[1],n[2],n[3])}},_removeEventHandlers:function(){var e=null;
while(e=this._eventListeners.pop())e[0]&&e[0].removeEventListener(e[1],e[2],e[3])},_onKeyDownHandler:function(e){switch(e.keyCode){case 27:this.closeCleanly()}},_onShieldClick:function(e){this.dismissOnShieldClick()&&(this.closeCleanly(),e.stopPropagation(),e.preventDefault())}}),its.kit.createController("iTSMultiButton",{binding:"div.multi-button",controller:{setPopupIndex:function(){this.applyToComponents("setPopupIndex")}},component:{init:function(){var e=this.element;
this.button=e.querySelector("button");
var t=this.popup=e.querySelector("select");
t&&(this.listen(t,"focus",this),this.listen(t,"change",this)),this.element.hasClassName("large")&&its.client.platformIsDT&&(this.setActionTextMaxWidth(),this.scaleButtonText())},setPopupIndex:function(){this.popup&&(this.popup.selectedIndex=-1)},handleEvent:function(e){switch(e.type){case"change":this.change(e);
break;case"focus":its.notifications.publish(iTSMultiButtonEvents.MENU_OPENED,e.target),this.setPopupIndex()}},change:function(e){var t=this.popup,n=t.options[t.selectedIndex];
this.handleClickedItem(n),this.setPopupIndex()},handleClickedItem:function(e){var t=this.popup,n=e.getAttribute("action"),r,i;
if(!n)return;switch(n){case"link":r=e.getAttribute("href"),i=e.getAttribute("target");
if(i=="external"||i=="main"){if(e.getAttribute("twitter")=="true"){(new iTSShareOnTwitter).onClick(e,i);
return}its.url.openExternalUrl(r,i)}else window.location.href=ITSLinkModifier.modifyUrl(r);
break;case"copy-link":its.client.putURLOnPasteboard(e.getAttribute("href"));
break;case"like":its.cn.requiresOptIn(function(){its.cn.likeCall(e,function(t){var n=t.responseText;
n=="success"&&(e.text=e.getAttribute("plus-one")),this.setPopupIndex(),e.disabled=!0})});
break;case"post":this.setPopupIndex(),its.cn.requiresOptIn(function(){its.cn.postCall(e)});
break;case"tell-a-friend":typeof iTSDTTellAFriend!="undefined"?iTSDTTellAFriend.showDialogForElement(e):its.client.error("Unable to open tell a friend dialog. iTSDTTellAFriend JS not loaded.");
break;case"share-service":its.notifications.publish(iTSMultiButtonEvents.SHARE_OPTION_SELECTED,e);
break;default:its.client.error("Unknown buy button menu action: "+n)}},setActionTextMaxWidth:function(){var e=window.getComputedStyle(this.button),t=parseInt(e.paddingLeft,10),n=parseInt(e.paddingRight,10),r=parseInt(e.borderLeftWidth,10),i=parseInt(e.borderLeftWidth,10),s=parseInt(e.width,10),o=this.button.querySelectorAll("span");
s-=t+n+r+i;
if(isNaN(s)||o.length!=2)return;var u=0;
/\S/.test(o[0].innerHTML)&&(u=o[1].offsetLeft-o[0].offsetLeft),o[1].style.maxWidth=s-u+"px"},scaleButtonText:function(){var e=this,t=11,n=this.button,r=n.querySelectorAll("span"),i=function(e,t){return e!==null?parseInt(window.getComputedStyle(e,null)[t],10):0},s=function(t){var r=i(t,"fontSize"),s=i(t,"paddingTop");
n.style.fontSize=r-1+"px",its.client.platformIsWindows()||(n.style.paddingTop=s+1+"px"),e.setActionTextMaxWidth()};
if(r.length!=2)return;var o=i(n,"paddingLeft"),u=/\S/.test(r[0].innerHTML)?r[0]:r[1];
while(i(n,"fontSize")>t){var a=u.offsetLeft-o;
if(a>0)break;s(n)}}}}),iTSMultiButtonEvents={MENU_OPENED:"menuOpened",SHARE_OPTION_SELECTED:"shareOptionSelected"},its.kit.createController("iTSPagination",{binding:"div.paginate",controller:{flushCachesContainingElement:function(e){while(e){if(e.hasClassName("paginate")){this.dispatchCustomEvent(e,iTSPagination.FLUSH_CACHE_EVENT);
break}e=e.parentNode}}},component:{init:function(){var e=this.element;
this.cachedContent={};
var t=e.querySelector("div.select select");
if(t){t.addEventListener("change",this,!0);
for(var n=0,r=t.options.length;
n<r;
n++)t.options[n].hasAttribute("selected")&&(t.selectedIndex=n)}var i=e.querySelectorAll(".pill button");
i.each(function(e){this.listen(e,"click",this)},this);
var s=e.querySelectorAll("div.paginated-content");
s.each(function(e,t){var n=e.getAttribute("sort-key"),r=e.getAttribute("page-number"),i=e.getAttribute("pill-identifier");
this.setContentForCacheKey(e,n,r,i),t>0&&e.parentNode.removeChild(e)},this),this.setup(1),e.addEventListener(iTSPagination.FLUSH_CACHE_EVENT,this,!0)},setup:function(e){var t=this.element,n=t.querySelector("div.paginated-content"),r=n.getAttribute("total-number-of-pages");
this.count=r=r?r.toInt():1,this.currentIndex=0,this.controllerDivs=t.querySelectorAll("div.pagination-controls"),this.letterBucketControls=t.querySelectorAll(".letter-bucket-controls"),this.showLetterBuckets=this.letterBucketControls.length>0&&n.getAttribute("show-letter-buckets")&&this.count>1,this.showLetterBuckets&&(this.letterBucketLinks=this.setupLetterBucketLinks()),this.pageLinks=[];
for(var i=0,s;
i<r;
i++)s=its.loc("Js.Pagination.PageNumberTitle",{num:i+1}),this.pageLinks[i]='<a href="javascript:void(0);" title="'+s+'" class="page-link" index="'+(i+1)+'">'+(i+1)+"</a>";
if(r<=1)this.controllerDivs&&this.controllerDivs.each(function(e){e.innerHTML=""});
else{var o=its.loc("Js.Pagination.PreviousPage"),u=its.loc("Js.Pagination.NextPage"),a=its.loc("Js.Pagination.Back"),f=its.loc("Js.Pagination.Next"),l=its.loc("Js.Pagination.PageNumber",{num:n.getAttribute("page-number")});
this.prevPage='<a href="javascript:void(0);" title="'+o+'" class="back-link" index="0">'+a+"</a>",this.nextPage='<a href="javascript:void(0);" title="'+u+'" class="next-link" index="2">'+f+"</a>",this.spacer='<span class="pagination-spacer">&hellip;</span>',this.pageNumberComponent='<span class="page-number"><span>'+l+"</span></span>",this.generateLinks(e)}},setupLetterBucketLinks:function(){var content=this.element.querySelector("div.paginated-content"),letterBucketMap=eval(content.getAttribute("letter-bucket-data")),links=[],letterEnd,indexEnd,nextLetter,oneIndex,title,link;
for(var i=0,len=letterBucketMap.length;
i<len;
i++)oneIndex=i+1,letterEnd="Z",indexEnd=this.count,oneIndex<len&&(nextLetter=letterBucketMap[oneIndex].letter,letterEnd=String.fromCharCode(nextLetter.charCodeAt(0)-1),indexEnd=letterBucketMap[oneIndex].index-1),title=its.loc("Js.Pagination.PageNumber",{num:letterBucketMap[i].index}),link='<a href="javascript:void(0)" title="'+title+'" class="letter-bucket page-link" '+'index="'+letterBucketMap[i].index+'" index-end="'+indexEnd+'">'+letterBucketMap[i].letter+"&#8211;"+letterEnd+"</a>",links.push(link);
return links.join("\r")},cacheKey:function(e,t,n){return e+"-"+t+"-"+n},getContentForCacheKey:function(e,t,n){return this.cachedContent[this.cacheKey(e,t,n)]},setContentForCacheKey:function(e,t,n,r){this.cachedContent[this.cacheKey(t,n,r)]=e},handleEvent:function(e){e.preventDefault();
var t=e.currentTarget;
switch(e.type){case iTSPagination.FLUSH_CACHE_EVENT:this.flushCaches();
break;case"click":/(^|\s)(page|back|next)-link(\s|$)/.test(t.className)?(this.pageChange(t),this.scrollUpIfScrolledDown()):t.parentNode&&t.parentNode.hasClassName("pill")&&this.pillChange(t);
break;case"change":this.sortChange(t)}},flushCaches:function(){this.cachedContent={}},pageChange:function(e){var t=e.getAttribute("index").toInt();
!e.hasClassName("disabled")&&t>0&&t<=this.count&&t!=this.currentIndex&&this.displayContentWithSortKeyAndPageNumberAndPillIdentifier(null,t,null)},pillChange:function(e){var t=e.parentNode.querySelectorAll(".pill button");
t.each(function(e){e.removeClassName("active")}),e.addClassName("active"),this.displayContentWithSortKeyAndPageNumberAndPillIdentifier(null,1,e.getAttribute("pill-identifier"))},sortChange:function(e){this.displayContentWithSortKeyAndPageNumberAndPillIdentifier(e.value,1,null)},reloadContents:function(){var e=this.element.querySelector("div.paginated-content"),t=e.getAttribute("sort-key"),n=e.getAttribute("page-number");
this.flushCaches(),this.displayContentWithSortKeyAndPageNumberAndPillIdentifier(t,n,null)},displayContentWithSortKeyAndPageNumberAndPillIdentifier:function(e,t,n){var r=this.element;
if(e===null){var i=r.querySelector("div.select select");
if(i)e=i.value;
else{var s=r.querySelector("div.paginated-content");
s&&(e=s.getAttribute("sort-key"))}}t===null&&(t=this.currentIndex+1);
if(n===null){var o=r.querySelector(".pill .active");
n=o?o.getAttribute("pill-identifier"):0}var u=this.getContentForCacheKey(e,t,n);
if(u){this.displayCachedContent(u,t);
return}var a=r.getAttribute("goto-page-href"),f=a.match(/[?]/)?"&":"?",l=r.querySelector("div.paginated-container div.paginated-content"),c=l.getAttribute("goto-page-href-additional-query-params");
c&&(a+=f+c,f="&");
var h=r.getAttributeWithDefault("page-number-parameter","page"),p=r.getAttributeWithDefault("sort-key-parameter","sort"),d=r.getAttributeWithDefault("pill-identifier-parameter","pill");
t&&h&&(a+=f+h+"="+t,f="&"),e&&p&&(a+=f+p+"="+e,f="&"),n&&d&&(a+=f+d+"="+n),this.loadUrlForSortKeyAndPageNumberAndPillIdentifier(a,e,t,n)},displayCachedContent:function(e,t){var n=this.element,r=n.querySelector("div.paginated-container"),i=r.querySelector(".paginated-content");
this._paginatedContentHeight||(this._paginatedContentHeight=i.style.height,this._paginatedContentOverflow=i.style.overflow);
while(r.firstChild)r.removeChild(r.firstChild);
i.hasClassName("elastic-lockups")&&e.addClassName("elastic-lockups"),r.appendChild(e),e.style.height=this._paginatedContentHeight,e.style.overflow=this._paginatedContentOverflow,this.setup(t);
var s=e.getAttribute("pagination-description"),o=n.querySelector("div.title > a.see-all > span");
if(!o){var u=n.querySelector("div.title > span.pagination-description");
u&&(u.innerHTML=s)}this.checkAndHandleSeeAllUrlOverride(e),its.kit.sendToController("iTSMultiButtonController","setPopupIndex"),this.dispatchCustomEvent(this.element,"iTSDTPagination.Event.LockupContainerSort")},loadUrlForSortKeyAndPageNumberAndPillIdentifier:function(e,t,n,r){var i=bindAsEventListener(this,"pageLoadCompleted",t,n,r),s=bindAsEventListener(this,"pageLoadFailed",t,n,r);
its.client.startProgressSpinner(),iTSInclude.makeHttpRequest({url:e,successCallback:i,failureCallback:s})},pageLoadCompleted:function(e,t,n,r){its.client.stopProgressSpinner();
var i=document.createElement("div");
i.innerHTML=e.responseText;
var s=i.querySelectorAll("div.paginated-content"),o=!1;
s.each(function(e){var i=e.getAttribute("sort-key"),s=e.getAttribute("page-number"),u=e.getAttribute("pill-identifier");
this.setContentForCacheKey(e,i,s,u),t==i&&n==s&&r==u&&(o=!0)},this),o?this.displayContentWithSortKeyAndPageNumberAndPillIdentifier(t,n,r):its.client.error("response did not contain content for sort-key="+t+", page-number="+n+", pill-identifier="+r)},pageLoadFailed:function(e,t,n,r){its.client.stopProgressSpinner()},checkAndHandleSeeAllUrlOverride:function(e){var t=e.getAttribute("see-all-url-override"),n=this.element.querySelector(".title .see-all");
t&&n&&(n.href=t)},linkArrayForPageIndex:function(e){e=parseInt(e,10);
var t=null,n=this.pageLinks;
return this.count<=1?null:(n.length<=7?t=n.slice(0,n.length):e<5&&e<n.length-3?(t=n.slice(0,5),t.push(this.spacer,this.pageLinks[n.length-1])):e>=n.length-3?(t=n.slice(n.length-5),t.unshift(n[0],this.spacer)):(t=n.slice(e-2,e+1),t.unshift(n[0],this.spacer),t.push(this.spacer,n[n.length-1])),t.unshift(this.prevPage),t.push(this.nextPage),this.element.getAttribute("display-page-number-separately")=="true"&&t.unshift(this.pageNumberComponent),t)},generateLinks:function(e){if(e===0||e==this.currentIndex)return;this.currentIndex=parseInt(e,10);
var t=this.linkArrayForPageIndex(this.currentIndex);
if(t==null){this.controllerDivs.each(function(e){e.innerHTML=""});
return}var n=its.loc("Js.Pagination.PreviousPage"),r=its.loc("Js.Pagination.NextPage"),i=its.loc("Js.Pagination.DisabledButtonText",{button_text:n}),s=its.loc("Js.Pagination.DisabledButtonText",{button_text:r});
this.controllerDivs.each(function(e){e.innerHTML=t.join("\r");
var n=e.querySelector("a.back-link"),r=e.querySelector("a.next-link");
e.querySelectorAll("a.page-link").each(function(e){this.setupPageLink(e)},this),n.setAttribute("index",this.currentIndex-1),r.setAttribute("index",this.currentIndex+1),this.listen(n,"click",this),this.listen(r,"click",this),this.currentIndex==1?(n.addClassName("disabled"),n.setAttribute("title",i)):n.removeClassName("disabled"),this.currentIndex==this.pageLinks.length?(r.addClassName("disabled"),r.setAttribute("title",s)):r.removeClassName("disabled")},this),this.letterBucketControls.each(function(e){this.showLetterBuckets?(e.innerHTML=this.letterBucketLinks,e.querySelectorAll("a.page-link").each(function(e){this.setupPageLink(e)},this)):e.innerHTML=""},this)},setupPageLink:function(e){e.removeClassName("active"),e.removeClassName("disabled"),this.listen(e,"click",this);
var t=e.getAttribute("index"),n=e.getAttribute("index-end");
e.hasClassName("letter-bucket")&&this.currentIndex>=t&&this.currentIndex<=n?(e.addClassName("active"),e.addClassName("disabled")):t==this.currentIndex&&(e.addClassName("active"),e.addClassName("disabled"))},scrollUpIfScrolledDown:function(e){var t=this.element.getPosition(),n=document.body.scrollTop;
n>t.top&&(document.body.scrollTop=t.top)}}}),iTSPagination.FLUSH_CACHE_EVENT="flushCache",its.kit.createController("iTSDTTellAFriend",{binding:"a.taf-link",component:{init:function(){this.listen("click")},clickEvent:function(e){e.preventDefault(),this.initiateShowDialog()},initiateShowDialog:function(){this.verifySignIn(bind(this,"showDialog"))},verifySignIn:function(e){var t=its.client.getUserDSID(),n=its.loc("Js.TellAFriend.SigninTitle"),r=its.loc("Js.TellAFriend.SigninMessage");
t?e():its.client.authenticate(e,n,r)},canShowDialog:function(){var e=its.client.getUserDSID();
return e?document.querySelector(".taf-dialog")===null:!1},showDialog:function(){if(!this.canShowDialog())return;var e=this,t={className:"taf-dialog",contentUrl:this.element.getAttribute("taf-body-url"),onPreRenderCallback:function(t){if(its.isXMLResponse(t)){e.dialog&&(e.dialog.close(),e.dialog=null);
if(/authorization/.test(t.responseText)){var n=its.loc("Js.TellAFriend.SigninTitle"),r=its.loc("Js.TellAFriend.SigninMessage");
its.client.authenticate(bind(e,"initiateShowDialog"),n,r)}else its.client.showPlistErrorDialog(t);
return!1}return!0},onLoadCb:function(){e.form=document.querySelector(".taf-form"),e.form&&(e.toInput=e.form.querySelector(".taf-recipients"),e.bindForm()),e.dialog.focus()},onFocus:function(){e.toInput&&e.toInput.focus()}};
its.kit.sendToController("iTSQuickViewController","hideQuickView"),this.dialog=new iTSDialog(t),this.dialog.open()},unbindForm:function(){this.form&&(this.formListener.remove(),this.form=this.formListener=null)},emptyEvent:function(e){return e.preventDefault(),!1},closeDialog:function(e){e.preventDefault(),this.dialog.close()},bindForm:function(){this.form=document.querySelector(".taf-form");
if(this.form){this.formListener=this.listen(this.form,"submit","processSubmit");
function e(e){e.preventDefault()}this.form.querySelectorAll(".lockup a").each(function(t){t.href="javascript:void(0)",t.oncontextmenu=e})}this.close&&(this.closeListener.remove(),this.close=this.closeListener=null),this.close=document.querySelector(".taf-body .close-handler"),this.close&&(this.closeListener=this.listen(this.close,"click","closeDialog"))},processSubmit:function(e){e.preventDefault();
var t=this.form,n=t.querySelector(".submit-handler");
n&&(n.disabled=!0),iTSInclude.makeHttpRequest({url:t.getAttribute("submit-url"),successCallback:bind(this,"successHandler"),failureCallback:bind(this,"failureHandler"),timeout:3e4,formParams:{recipients:t.querySelector(".taf-recipients").value,fromName:t.querySelector(".taf-from-name-field").value,message:t.querySelector(".taf-content").value}},!0)},successHandler:function(e){if(its.isXMLResponse(e)){this.failureHandler(e);
return}var t=document.querySelector(".taf-body");
t&&(t.innerHTML=e.responseText,this.bindForm())},failureHandler:function(e){var t=document.querySelector(".taf-form"),n=t.querySelector(".submit-handler");
n&&(n.disabled=!1),its.client.showGenericErrorAlert()}}}),iTSDTTellAFriend.showDialogForElement=function(e){var t=new iTSDTTellAFriend;
t.element=e,t.initiateShowDialog()},its.kit.createController("ITSLinkModifier",{binding:function(){return'a[href*="'+ITSLinkModifier.FINANCE_HOST+'"]'},component:{init:function(){this.capture("mousedown")},mousedownEvent:function(e){if(e.button!=0||e.ctrlKey==1)return;var t=e.currentTarget.getAttribute("href"),n=ITSLinkModifier.modifyUrl(t);
n!=t&&(e.currentTarget.setAttribute("href",n),console.log("Modifying url: "+t+" to "+n))}}}),ITSLinkModifier.FINANCE_HOST="buy.itunes.apple.com",ITSLinkModifier.modifyUrl=function(t){if(!t)return t;
var n=its.client.getUserDSID();
if(n){var r=ITSLinkModifier.FINANCE_HOST,i=t.indexOf("://"+r);
if(i>=0){var s=its.client.getBag().modifyAccount;
if(s){var o=s.split("/")[2];
return t.substr(0,i+3)+o+t.substr(i+3+r.length)}}}return t},its.kit.createController("iTSBuyButton",{binding:"div.multi-button button",controller:{domReady:function(){its.client.isRunning&&(iTunes.addEventListener("userchanged",bind(this,"handleUserchangedEvent"),!1),this.fetchPersonalizedData())},recalcAdoptState:function(){this.applyToComponents(function(){if(!(this.isInstallationsButton||this.installed||this.isBuyInProgress)){var e=its.client.appIsEligibleForAdoption(this.bundleId);
this.isAdoptButton!=e&&(this.isAdoptButton=e,this.setState(this.isAdoptButton?iTSBuyButton.ADOPT:iTSBuyButton.DEFAULT))}}),this.fetchPersonalizedData()},handleUserchangedEvent:function(){var e=this.dsid,t=its.client.getUserDSID();
if(e==t)return;this.fetchPersonalizedData()},fetchPersonalizedData:function(){this.dsid=its.client.getUserDSID(),this.didPersonalize&&(this.applyToComponents("reset"),this.didPersonalize=!1);
if(!this.dsid)return;var e=document.body.getAttribute("buy-button-metadata-url");
if(!e)return;var t=[];
this.applyToComponents(function(){this.shouldPersonalize()&&t.push(this.adamId+":mac-software")});
if(!t.length)return;iTSInclude.makeHttpRequest({url:e,formParams:{ids:t.join(","),version:"2"},successCallback:bind(this,"processPersonalizedData")})},processPersonalizedData:function(e){if(e.responseText!="{}"){var t=its.string.evalJson(e.responseText);
this.didPersonalize=!0,this.applyToComponents(function(){var e=t[this.adamId];
e&&this.shouldPersonalize()&&(this.element.setAttribute("redownload-buy-params",e),this.canRedownload=!0,this.isPreorder?(this.alreadyPreordered=!0,this.preorderLabel&&this.preorderLabel.classList.add("preorder-label-hidden"),document.body.classList.contains("product")?this.setText(its.loc("DABuyButtonPreOrdered")):this.setText(its.loc("DABuyButtonPreOrderedAllCaps")),this.setAriaLabel("DABuyButton.aria.preOrdered"),this.element.disabled=!0):this.setState(iTSBuyButton.DEFAULT))})}}},component:{init:function(){var e=this.element;
this.adamId=e.getAttribute("adam-id"),this.bundleId=e.getAttribute("bundle-id"),this.versionString=e.getAttribute("version-string"),this.originalDefaultText=e.getAttribute("original-price"),this.isFree=e.getAttribute("is-free-download")=="1",this.isRestoreButton=!!e.parentByClassName("restore"),this.isInstallationsButton=e.getAttribute("is-install-button")=="1",this.isAdoptButton=!1,this.isGratisButton=!1,this.isOpenButton=!1,this.awaitingConfirmation=!1,this.confirmed=!1,this.installed=!1,this.canRedownload=!1,this.isBuyInProgress=!1,this.hasInAppPurchases=e.getAttribute("hasinapppurchases")==1,this.spaceReservedForProgressBarAndIAPDisclosure=!1,this.IAPDisclosureAdded=!1,this.progressBarRendered=!1,this.isProductPage=document.body.classList.contains("product"),this.wasAdoptedFirst=!1,this.isPreorder=e.getAttribute("is-pre-order")==1,this.isPreorder&&this.setupPreorder(),this.isInstallAssistant=its.string.startsWith(this.bundleId,"com.apple.InstallAssistant."),this.isDownloadButton=this.isInstallAssistant,this.isRestoreButton||this.listen("click"),defer(this,"setup")},setupPreorder:function(){var e="10.13.2",t=iTunes.systemVersion();
this.element.parentElement.classList.add("preorder-multi-button"),its.string.compareNumerically(t,e)<0&&(this.element.disabled=!0,this.isProductPage&&this._addPreorderPlacard()),this.preorderLabel=document.createElement("span"),this.preorderLabel.classList.add("preorder-label"),this.preorderLabel.innerText=its.loc("DAPreorderLabel"),this.element.parentElement.parentElement.insertBefore(this.preorderLabel,this.element.parentElement)},_addPreorderPlacard:function(){var e=document.createElement("div");
e.classList.add("preorder-placard"),e.innerText=its.loc("DAPreordersNotAvailableOnYourOS");
var t=document.body.classList.contains("uber")?".product-review":"#wrapper",n=document.querySelector(t);
n.insertBefore(e,n.firstChild)},setup:function(){if(!this.isInstallationsButton){var e=its.client.isRunning?iTunes:window;
this.listen(e,"downloadstatuschanged","handleDownloadStatusChangedEvent"),this.listen(e,"installstatuschanged","handleInstallStatusChangedEvent"),this.listen(e,"osupdatescanstatuschanged","handleOSUpdateScanStatusChangedEvent")}if(!its.client.isRunning||!this.bundleId)return;iTSBuyButton.logger.info("Performing check if installed for "+this.bundleId);
var t=iTunes.softwareApplicationWithBundleIdentifier(this.bundleId);
this.setupCommon(t)},setupCommon:function(e){this.spaceReservedForProgressBarAndIAPDisclosure||this.reserveSpaceForIAPDisclosureAndProgressBar(),this.hasInAppPurchases&&!this.IAPDisclosureAdded&&document.body.getAttribute("toolbar-selection")!="updates"&&document.body.getAttribute("toolbar-selection")!="purchased"&&(this.addIAPDisclosure(),this.isPreorder&&(this.expectedReleaseDate=document.querySelector(".expected-release-date"),this.expectedReleaseDate&&(this.expectedReleaseDateParentUl=this.expectedReleaseDate.parentElement,this.expectedReleaseDateParentUl.parentElement.removeChild(this.expectedReleaseDateParentUl),this.inAppPurchaseDisclosure.appendChild(this.expectedReleaseDateParentUl)))),iTunes.primaryAccount&&iTunes.primaryAccount.isManagedStudent&&(this.element.parentElement.style.opacity=".5",this.element.parentElement.classList.add("student-disabled"),this.element.addEventListener("click",function(e){e.preventDefault(),its.client.showAlert(its.loc("MZCommerce.PurchaseBlockedForSpecialEdu_message"))},!0));
if(this.isInstallAssistant){if(e){this.isDownloadButton=!1,this.setState(iTSBuyButton.INSTALLED);
return}this.isDownloadButton=!0}else if(e&&!its.client.appIsEligibleForAdoption(this.bundleId)){iTSBuyButton.logger.info("Found installed software: "+ITSLogger.stringify({adamId:e.adamID,bundleId:this.bundleId,bundleVersion:e.bundleVersion}));
var t=its.string.compareNumerically(this.versionString,e.bundleVersion)>0;
this.isDownloadButton&&t==0;
var n=!t;
e.adamID?this.isUpdate=t:its.client.isClientGreaterThanOrEqualToSpecifiedVersion("1.0.1")&&(n=!1);
if(n){this.setState(iTSBuyButton.INSTALLED);
return}}else{var r=iTSBuyButton.activeDownloads(!1)[this.adamId];
if(r){this._modifyBuyButtonForDownloadState(r.downloadStatus.state,!1);
return}if(its.client.appIsEligibleForAdoption(this.bundleId)){this.setState(iTSBuyButton.ADOPT);
return}if(its.client.appIsEligibleForGratis(parseInt(this.adamId))){this.setState(iTSBuyButton.GRATIS);
return}}this.setState(iTSBuyButton.DEFAULT)},reserveSpaceForIAPDisclosureAndProgressBar:function(){if(this.isProductPage){this.IAPDisclosureAndProgressBar=document.createElement("div"),this.IAPDisclosureAndProgressBar.classList.add("iap-disclosure-and-progress-bar");
var e=this.element.parentByClassName("lockup");
e.appendChild(this.IAPDisclosureAndProgressBar),this.spaceReservedForProgressBarAndIAPDisclosure=!0}},addIAPDisclosure:function(){if(this.element.parentByClassName("lockup-container")){var e=this.element.parentByClassName("lockup-container"),t=this.element.parentByClassName("list");
this.inAppPurchaseDisclosure=document.createElement("li"),this.inAppPurchaseDisclosure.innerText=its.loc("InAppPurchases"),this.inAppPurchaseDisclosure.classList.add("in-app-purchase-disclosure"),t.appendChild(this.inAppPurchaseDisclosure)}else if(this.element.parentByClassName("sidebar")){var n=this.element.parentByClassName("multi-button"),r=this.element.parentByClassName("chart"),i=this.element.parentByClassName("lockup-info");
i.classList.add("has-iap-disclosure");
var s=n.parentElement.querySelector(".index");
r.classList.add("in-app-purchase-spacing"),n.classList.add("in-app-purchase-spacing"),this.inAppPurchaseDisclosure=document.createElement("div"),this.inAppPurchaseDisclosure.classList.add("in-app-purchase-chart-disclosure"),n.parentElement.insertBefore(this.inAppPurchaseDisclosure,s),this.inAppPurchaseDisclosure.innerText=its.loc("InAppPurchases")}else if(this.isProductPage){var n=this.element.parentByClassName("multi-button");
n.classList.add("in-app-purchase-spacing"),this.inAppPurchaseDisclosure=document.createElement("div"),this.inAppPurchaseDisclosure.classList.add("in-app-purchase-disclosure"),this.IAPDisclosureAndProgressBar.appendChild(this.inAppPurchaseDisclosure),this.inAppPurchaseDisclosure.innerText=its.loc("Software.HasAddOns")}this.IAPDisclosureAdded=!0},reset:function(){this.canRedownload&&!this.isBuyInProgress&&(this.canRedownload=!1,this.setState(iTSBuyButton.DEFAULT))},isRedownload:function(){return this.canRedownload||this.element.getAttribute("state")==="download"},handleInstallStatusChangedEvent:function(e){var t=e.application;
if(t.bundleID!=this.bundleId)return;if(this.isInstallationsButton||this.isBuyInProgress)return;iTSBuyButton.logger.info("Handle install status changed: "+JSON.stringify({bundleID:t.bundleID,name:t.name})),this.installed=!1,this.isUpdate=!1,this.element.disabled=!1,t.installed||(t=null),this.setupCommon(t)},setState:function(e){if(this.isInstallationsButton)return;var t="_set"+e+"State";
if(its.isFunction(this[t])){this._lastState=this._currentState,this._currentState=e;
var n=this[t]();
typeof n=="undefined"&&(n=e),n?(this.element.setAttribute("data-button-state",n),this.element.addClassName("uppercase")):(this.element.removeAttribute("data-button-state"),this.element.removeClassName("uppercase"))}else iTSBuyButton.logger.info("setState: unknown state "+e)},_setDefaultState:function(){this.isOpenButton=!1,defer(this,function(){this.element.parentNode.removeClassName("confirm")}),its.notifications.publish("enforceParentalControls"),this.awaitingConfirmation=!1,this.mousedownListener&&this.mousedownListener.remove();
var e,t,n;
this.canRedownload||this.isUpdate?(this.isDownloadButton?(e=its.loc("MHJavascriptLocalizations.DIBuyButtonDownload"),t="DIBuyButtonRedownloadAria"):this.isUpdate?(e=its.loc("MHJavascriptLocalizations.DIBuyButtonUpdate"),t="DIBuyButtonUpdateAria"):this.isPreorder&&this.alreadyPreordered?(e=this.isProductPage?its.loc("DABuyButtonPreOrdered"):its.loc("DABuyButtonPreOrderedAllCaps"),t="DABuyButton.aria.preOrdered"):(e=its.loc("Js.DA.BuyButton.Install"),t="DABuyButton.aria.install"),n="Default"):(this.isDownloadButton&&its.string.compareNumerically(iTunes.systemVersion(),"10.11")>=0?e=its.loc("MHJavascriptLocalizations.DIBuyButtonDownload"):e=this.originalDefaultText,t=this.isFree?"DABuyButton.aria.install":"DABuyButton.aria.buy",n=null),this.setText(e),this.setAriaLabel(t);
if(this._lastState&&this._lastState!=iTSBuyButton.DEFAULT){var r=this.element.parentByClassName("lockup");
r&&r.removeClassName("show"),defer(this,function(){this.shrinkButton(e)})}return n},_setConfirmState:function(){var e,t;
this.isPreorder?(e="DABuyButtonPreOrder",t=this.isFree?"DABuyButton.aria.preOrder.free":"DABuyButton.aria.preOrder.buy"):this.isFree?(e="DABuyButtonInstall",t="DABuyButton.aria.confirm.install"):(e="DABuyButtonBuyNow",t="DABuyButton.aria.confirm.buy");
var n=its.loc(e);
this.setAriaLabel(t),defer(this,function(){this.element.parentNode.addClassName("confirm")});
if(this._lastState==iTSBuyButton.DEFAULT){var r=this.element.parentByClassName("lockup");
r&&r.addClassName("show"),defer(this,function(){this.setOuterText(n),this.expandButton(n)})}else this.setText(n)},_setInstallingState:function(){this.element.parentNode.removeClassName("confirm"),this.element.disabled=!0,this.isDownloadButton?(this.setText(its.loc("MHJavascriptLocalizations.DIBuyButtonDownloading")),this.setAriaLabel("DIBuyButtonDownloadingAria")):(this.setText(its.loc("Js.DA.BuyButton.Installing")),this.setAriaLabel("DABuyButton.aria.installing"))},_setInstalledState:function(){this.element.parentNode.removeClassName("confirm"),this.installed=!0,this.element.disabled=!0,this.isDownloadButton?(this.setText(its.loc("MHJavascriptLocalizations.DIBuyButtonDownloaded")),this.setAriaLabel("DIBuyButtonDownloadedAria")):this.isAdoptButton||(its.string.compareNumerically(navigator.appVersion,"2.0")>=0?(this.element.disabled=!1,this._setOpenState()):(this.setText(its.loc("Js.DA.BuyButton.Installed")),this.setAriaLabel("DABuyButton.aria.installed")))},_setAdoptState:function(){this.isAdoptButton=!0,this.setText(its.loc("DTHBuyInfo.actionText.Accept")),this.setAriaLabel("DABuyButton.aria.accept")},_setGratisState:function(){this.isGratisButton=!0,this.setText(its.loc("DTHBuyInfo.actionText.Gratis")),this.setAriaLabel("DABuyButton.aria.accept")},_setOpenState:function(){this.isOpenButton=!0,this.isDownloadButton?(this.setText(its.loc("Js.DA.BuyButton.Install")),this.setAriaLabel("DABuyButton.aria.install")):(this.setText(its.loc("Js.DA.BuyButton.Open")),this.setAriaLabel("DABuyButton.aria.open"))},shouldPersonalize:function(){return!(this.isRestoreButton||this.isInstallationsButton||this.installed||this.isBuyInProgress||this.isAdoptButton||this.isGratisButton)},needsConfirmation:function(){return!(this.isInstallationsButton||this.canRedownload||this.isUpdate||this.isDownloadButton)},setText:function(e){this.setOuterText(e),this.setInnerText(e)},setOuterText:function(e){var t=this.element.querySelector(".price");
t&&(t.textContent=e)},setInnerText:function(e){var t=this.element.querySelector("div.inner span");
t&&(t.textContent=e)},setAriaLabel:function(e){var t=its.loc(e,{name:this.element.getAttribute("item-name"),price:this.originalDefaultText});
this.element.setAttribute("aria-label",t)},expandButton:function(e){function l(){var t=document.createElement("span");
t.className="text-swap",this.element.parentNode.hasClassName("small")&&(t.className+=" small"),t.innerHTML=e,document.body.appendChild(t);
var n=t!==null?its.string.toInt(window.getComputedStyle(t).width):0;
return document.body.removeChild(t),n}var t=this.element.querySelector("div.inner"),n=this.element!==null?its.string.toInt(window.getComputedStyle(this.element).width)*-1:0,r=t!==null?its.string.toInt(window.getComputedStyle(t).width):0,i=t.marginWidth(),s=l.call(this);
this.isProductPage&&(s+=15);
var o=s+n,u=(s+6)/(r+i),a=-o,f=this.element.parentNode;
f.hasClassName("large")?a=-Math.round(o/2):f.hasClassName("detailed")&&(a=0),t.style.width=r+"px",this.transitionButton({width:s+"px",push:o,scale:u,shift:a,overflow:"visible"})},shrinkButton:function(){var e=this.element.querySelector("div.inner");
e.style.width="",this.transitionButton({width:"",push:0,scale:1,shift:0,overflow:"hidden"})},transitionButton:function(e){var t=this.element,n=t.parentNode,r=t.querySelector(".price"),i=t.querySelector("div.inner"),s=t.querySelector("span.right-cap"),o=n.querySelector("select"),u=n.querySelector("span.arrow"),a=parseInt(e.width);
n.addClassName("animating");
var f=this.listen(n,"webkitTransitionEnd",function(){n.removeClassName("animating"),f.remove()});
r.style.width=e.width,r.style.left=-Math.round(e.push/2)+"px",r.style.webkitTransform="translateX("+Math.round(e.push/2)+"px)",i.style.webkitTransform="scaleX("+e.scale+")",o.style.webkitTransform="translateX("+(e.push-2)+"px)",s.style.webkitTransform="translateX("+(e.push-2)+"px)",u.style.webkitTransform="translateX("+e.push+"px)",n.style.overflow=e.overflow,n.style.webkitTransform="translateX("+e.shift+"px)"},markBuyPathStart:function(){if(this.isBuyInProgress)return;this.isBuyInProgress=!0,this.element.disabled=!0,its.client.startProgressSpinner()},markBuyPathEnd:function(e){this.isBuyInProgress=!1,its.client.stopProgressSpinner(),e||(this.element.disabled=!1,this.confirmed=!1,this.setState(iTSBuyButton.DEFAULT))},clickEvent:function(e){if(e.currentTarget!=this.element)return;if(e.detail>2)return;if(iTunes.primaryAccount&&iTunes.primaryAccount.isManagedStudent)return;if(this.isBuyInProgress)return;if(this.isAdoptButton){this.performAdopt(bind(this,this.handleAdoptActionFinished));
return}if(this.isGratisButton){this.performClaim();
return}if(this.isOpenButton||this.element.shouldOpen){this.launchApp();
return}this.handleNormalBuy()},handleNormalBuy:function(){if(this.element.hasAttribute("buy-params")){if(this.needsConfirmation()){if(!this.awaitingConfirmation){this.awaitingConfirmation=!0,this.setState(iTSBuyButton.CONFIRM),this.mousedownListener=this.listen(window,"mousedown");
return}this.awaitingConfirmation=!1,this.confirmed=!0}this.validateBuyAction()&&(this.element.disabled=!0,its.client.appIsEligibleForAdoption(this.bundleId)&&!its.client.adoptionCompleted(this.bundleId)?(this.wasAdoptedFirst=!0,this.performAdopt(bind(this,this.performBuyPreflightStage))):this.performBuyPreflightStage())}else{var e="goto-url";
if(!this.element.hasAttribute(e))return;var t=this.element.getAttribute(e);
iTSBuyButton.logger.info("goto: "+t);
if(this.element.hasAttribute("target")){var n=this.element.getAttribute("target"),r=document.createElement("a");
r.setAttribute("href",t),r.setAttribute("target",n);
var i=document.createEvent("MouseEvents");
i.initMouseEvent("click",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(i)}else window.location=t}},performAdopt:function(e){this.markBuyPathStart();
var t=[{itemId:this.adamid,bundleId:this.bundleId}];
its.client.adopt(t,e)},performClaim:function(){this.markBuyPathStart(),its.client.claimAllEligibleApps(bind(this,this.handleClaimActionFinished))},launchApp:function(){var e=iTunes.softwareApplicationWithBundleIdentifier(this.bundleId);
e&&e.launch()},handleAdoptActionFinished:function(e){this.markBuyPathEnd(!0),this.controller.recalcAdoptState(),e.success||iTSBuyButton.logger.info("adopt failed! errorCode: "+e.errorCode+" errorReason: "+e.errorReason)},handleClaimActionFinished:function(e){this.markBuyPathEnd(!0),e.success||iTSBuyButton.logger.info("claim failed! errorCode: "+e.errorCode+" errorReason: "+e.errorReason)},validateBuyAction:function(){if(!its.client.isRunning||this.isInstallationsButton||this.isDownloadButton)return!0;
if(this.bundleId=="com.apple.dt.Xcode")return!0;
var e=iTunes.softwareApplicationWithBundleIdentifier(this.bundleId);
if(!e||e.adamID)return!0;
var t,n,r={installedname:e.name?e.name:this.element.getAttribute("item-name"),installedversion:e.bundleVersion,name:this.element.getAttribute("item-name"),version:this.versionString},i=its.string.compareNumerically(e.bundleVersion,this.versionString);
if(i>0)return t=its.loc("DABuyButtonNewerVersionAlreadyInstalledMessage",r),n=its.loc("DABuyButtonNewerVersionAlreadyInstalledExplanation",r),its.client.showAlert(t,n),!1;
var s=!0;
if(its.client.isClientGreaterThanOrEqualToSpecifiedVersion("1.0.1")){if(this.element.getAttribute("dont-ask-same-minor-version-installed")){var o=its.string.toInt(e.bundleVersion),u=its.string.toInt(this.versionString);
o==u&&(s=!1)}}else s=!1;
if(s){if(i===0)t=its.loc("DABuyButtonAlreadyInstalledMessage",r),n=its.loc("DABuyButtonSameVersionAlreadyInstalledExplanation",r);
else{var a="DABuyButtonAlreadyInstalledMessage";
e.bundleVersion||(a="DABuyButtonAlreadyInstalledNoVersionMessage"),t=its.loc(a,r),n=its.loc("DABuyButtonAlreadyInstalledExplanation",r)}var f={okButtonAction:bind(this,this.confirmedBuy)},l={okButtonString:its.loc("Buy"),cancelButtonString:its.loc("Cancel"),defaultButton:"cancel",message:t,explanation:n,callbacks:f};
return its.client.showDialog(l,f),!1}return!0},confirmedBuy:function(){this.confirmed=!0,this.performBuyPreflightStage()},handleOSXServerCheckFinished:function(e){iTSBuyButton.logger.info("isOSXServer.pfpkg callback: "+ITSLogger.stringify(e.localizedErrorDescription)),this.isOSXServer=e.localizedErrorDescription=="SnowLeopard Server - DO NOT LOCALIZE",this.performBuyPreflightStage()},performBuyPreflightStage:function(){this.wasAdoptedFirst||this.markBuyPathStart();
var e=this.adamId,t=this.element.getAttribute("check-is-osx-server");
if(t&&this.isOSXServer===undefined){if(!iTunes.isOSXServer){iTSBuyButton.logger.info("Invoking isOSXServer.pfpkg "+ITSLogger.stringify(t)),iTunes.checkInstallRequirements(e,t,bind(this,this.handleOSXServerCheckFinished));
return}this.isOSXServer=iTunes.isOSXServer()}var n=this.element.getAttribute("large-icon");
n&&its.client.isRunning&&iTunes.setLargeIconUrlForAdamId(e,n);
if(this.shouldSupressPreflightCheck())iTSBuyButton.logger.info("Suppressing preflight check"),this.handlePreflightCheckFinished({success:!0});
else{var r=this.element.getAttribute("preflight");
if(r){var i=bind(this,this.handlePreflightCheckFinished);
iTSBuyButton.logger.info("Invoking client preflight check "+ITSLogger.stringify(r,i)),its.client.isRunning&&iTunes.checkInstallRequirements(e,r,i)}else iTSBuyButton.logger.info("No preflight package url"),its.client.showGenericErrorAlert(),this.markBuyPathEnd()}},shouldSupressPreflightCheck:function(){if(its.string.compareNumerically(iTunes.systemVersion(),"10.8")>=0){var e=its.serverData.properties.vendLastSupportedVersionMacOs;
if(e&&(this.isRedownload()||this.isUpdate)){var t=this.element.getAttribute("minimumOSVersion");
if(its.string.compareNumerically(iTunes.systemVersion(),t)<0)return!0}}return!1},handlePreflightCheckFinished:function(e){iTSBuyButton.logger.info("Check install requirements callback data: "+ITSLogger.stringify(e,e.success));
var t,n;
if(e.success)if((e.localizedErrorDescription||e.localizedErrorRecoverySuggestion)&&its.client.isClientGreaterThanOrEqualToSpecifiedVersion("1.0.1")){var r=bind(this,function(e){this.performBuy()}),i=bind(this,function(e){this.markBuyPathEnd()});
t=its.loc("Js.PreflightCheckWarning.Title"),n=e.localizedErrorDescription?e.localizedErrorDescription:"",e.localizedErrorRecoverySuggestion&&(n+=" "+e.localizedErrorRecoverySuggestion);
var s=its.loc("Js.PreflightCheckWarning.Continue"),o=its.loc("Cancel");
its.client.showConfirm(t,n,i,r,o,s)}else this.performBuy();
else{this.markBuyPathEnd(),iTSBuyButton.logger.info("Preflight check did not pass, showing dialog"),this.isUpdate?t=its.loc("Js.PreflightCheckFailedError.UpdateTitle"):t=its.loc("Js.PreflightCheckFailedError.Title"),n=its.loc("Js.PreflightCheckFailedError.Message");
if(e.localizedErrorDescription||e.localizedErrorRecoverySuggestion)n=e.localizedErrorDescription?e.localizedErrorDescription:"",e.localizedErrorRecoverySuggestion&&(n+=" "+e.localizedErrorRecoverySuggestion);
var u={message:t,explanation:n,defaultButton:"ok",okButtonString:its.loc("OK")},a;
this.isInstallAssistant&&(u.cancelButtonString=its.loc("DABuyButtonLearnMore"),a={cancelButtonAction:bind(this,this.openLearnMoreOSX)});
if(its.string.compareNumerically(iTunes.systemVersion(),"10.12")>=0&&e.errorCode===8)return;its.client.showDialog(u,a)}},openLearnMoreOSX:function(){var e="DABuyButtonLearnMoreURL.Yosemite";
its.string.compareNumerically(iTunes.systemVersion(),"10.10")>=0?e="DABuyButtonLearnMoreURL.Yosemite":its.string.compareNumerically(iTunes.systemVersion(),"10.9")>=0?e="DABuyButtonLearnMoreURL.Mavericks":its.string.compareNumerically(iTunes.systemVersion(),"10.8")>=0?e="DABuyButtonLearnMoreURL.MtnLion":its.string.compareNumerically(iTunes.systemVersion(),"10.7")>=0&&(e="DABuyButtonLearnMoreURL.Lion"),iTunes.openURL(its.loc(e))},getActionAttributes:function(){var e=this.adamId,t=this.element.getAttribute("item-name"),n,r=!1;
this.isUpdate?n=this.element.getAttribute("update-buy-params"):this.canRedownload?(n=this.element.getAttribute("redownload-buy-params"),r=!0):(n=this.element.getAttribute("buy-params"),this.element.getAttribute("state")==="download"&&(r=!0)),n=ITSLocationMetricsUtil.appendBuyMetricsToBuyParams(n,this.element);
var i=iTunes.softwareApplicationWithBundleIdentifier(this.bundleId);
i&&!i.adamID&&(n+="&installed-name="+encodeURIComponent(i.name),n+="&installed-version="+encodeURIComponent(i.bundleVersion)),this.confirmed&&(n+="&macappinstalledconfirmed=1"),this.isOSXServer&&(n+="&isOSXServer=1");
var s={itemId:e,itemType:"software",actionParams:n,title:t,freeDownload:this.isFree,update:this.isUpdate,bundleId:this.bundleId,preflight:this.element.getAttribute("preflight"),artworkURL:this.element.getAttribute("large-icon"),animationElement:this.elementToAnimateFlying()};
return this.isInstallAssistant&&(s.sutags=["SUBUNDLE:"+this.bundleId,"CUSTOMER"]),r&&(s.noAuth=!0),this.isInstallationsButton&&document.body.getAttribute("toolbar-selection")=="updates"&&(s.willNotPerformAnimation=!0),s},performBuy:function(){var e=this.getActionAttributes(),t=bind(this,this.handleBuyActionFinished);
iTSBuyButton.logger.info("iTunes Buy: "+e.actionParams+ITSLogger.stringify(t)),iTSBuyButton.logger.info(e),its.client.isRunning&&iTunes.buy(e,t)},handleBuyActionFinished:function(e){iTSBuyButton.logger.info("Buy callback data: "+ITSLogger.stringify(e,e.success)),this.markBuyPathEnd(e.success);
if(e.success){var t=this.adamId,n=this.elementToAnimateFlying(),r=document.body.getAttribute("toolbar-selection")=="updates",i=!r&&!this.isPreorder;
i&&(iTSBuyButton.logger.info("Performing animation for adam id "+t+ITSLogger.stringify(n)),its.client.isRunning&&iTunes.performPurchaseAnimation(t,n,{title:this.element.getAttribute("item-name"),bundleId:this.bundleId})),this.isPreorder&&(this.element.disabled=!0,this.setState(iTSBuyButton.DEFAULT),this.isProductPage?this.setText(its.loc("DABuyButtonPreOrdered")):this.setText(its.loc("DABuyButtonPreOrderedAllCaps")),this.preorderLabel.classList.add("preorder-label-hidden")),this.dispatchCustomEvent(this.element,iTSBuyButton.Events.BUY_SUCCEEDED,{adamId:t})}else e.errorCode!=-128&&(iTSBuyButton.logger.info("Error in buy: client code "+e.errorCode),its.client.showGenericErrorAlertWithErrorCode(e.errorCode));
iTSBuyButton.logger.info("Buy Complete")},elementToAnimateFlying:function(){if(!this.elementToBeAnimated){this.elementToBeAnimated=null;
var e=this.element.parentByClassName("lockup");
e||(e=this.element.parentByClassName("installation")),e&&(this.elementToBeAnimated=e.querySelector("img.artwork"))}return iTSBuyButton.logger.info("Element to be animated: "+ITSLogger.stringify(this.elementToBeAnimated)),this.elementToBeAnimated},handleDownloadStatusChangedEvent:function(e){var t=e.application;
if(t.bundleID!=this.bundleId)return;iTSBuyButton.logger.info("Handle download status changed: "+JSON.stringify({adamID:t.adamID,iconURL:t.iconURL,name:t.name,size:t.size,downloadStatus:{state:t.downloadStatus.state,phasePercentComplete:t.downloadStatus.phasePercentComplete,timeRemaining:t.downloadStatus.timeRemaining}})),this._modifyBuyButtonForDownloadState(t.downloadStatus,!0)},handleOSUpdateScanStatusChangedEvent:function(e){if(e.tags){var t=e.tags,n="SUBUNDLE:"+this.bundleId;
if(t.indexOf(n)>-1){var r={state:2,percentComplete:0,phasePercentComplete:0,timeRemaining:-1},i={bundleID:this.bundleId,adamID:this.adamId,size:0,downloadStatus:r},s={application:i};
this.handleDownloadStatusChangedEvent(s)}}},_modifyBuyButtonForDownloadState:function(e,t){switch(e.state){case 1:case 2:this.renderProgressBar(e);
case 3:this.setState(iTSBuyButton.INSTALLING),this.renderProgressBar(e);
break;case 4:this.setState(iTSBuyButton.INSTALLED),this.progressBarRendered&&this.removeProgressBar();
break;case 5:case 6:this.progressBarRendered&&this.removeProgressBar();
case-1:this.progressBarRendered&&this.removeProgressBar();
default:t&&this.setState(iTSBuyButton.DEFAULT)}},renderProgressBar:function(e){if(this.isProductPage)if(this.progressBarRendered)this.updateProgressBar(e);
else{this.IAPDisclosureAdded&&(this.IAPDisclosureAndProgressBar.removeChild(this.inAppPurchaseDisclosure),this.IAPDisclosureAdded=!1),this.progressBar=document.createElement("div"),this.progressBar.classList.add("progress"),this.progressBar.setAttribute("max",100),this.progressBar.style.width=this.element.clientWidth+16+"px",this.progressBarValue=document.createElement("span"),this.progressBarValue.classList.add("progress-value"),this.timeRemainingDiv=document.createElement("div"),this.timeRemainingDiv.classList.add("time-remaining");
var t=this.bundleId;
(t==="com.apple.InstallAssistant.HighSierra"||t.indexOf("com.apple.InstallAssistant.Seed.macOS1013")!==-1)&&this.timeRemainingDiv.classList.add("high-sierra-time-remaining"),this.updateProgressBar(e),this.progressBar.appendChild(this.progressBarValue),this.IAPDisclosureAndProgressBar.appendChild(this.progressBar),this.IAPDisclosureAndProgressBar.appendChild(this.timeRemainingDiv),this.progressBarRendered=!0}},updateProgressBar:function(e){var t=Math.floor(e.percentComplete*100);
this.progressBar.setAttribute("value",t),this.progressBar.setAttribute("aria-label",t+"%"),this.progressBarValue.style.width=t+"%",this.progressBarValue.innerText=t+"%",this.timeRemainingDiv.innerText=this.timeRemaining(e.timeRemaining)},timeRemaining:function(e){function t(e,t){return its.loc("DAHSoftwareInstall.Status.EstimatedTime."+e,t)}var n,r,i,s;
return e>=86400?(r=Math.floor(e/86400),i=Math.floor(e%86400/3600),n=t("DaysLeft",{days:r,hours:i?i:"",dayUnit:r==1?t("day"):t("days"),hourUnit:i==1?t("hour"):i?t("hours"):""})):e>=3600?(i=Math.floor(e/3600),s=Math.floor(e%3600/60),n=t("HoursLeft",{hours:i,minutes:s?s:"",hourUnit:i==1?t("hour"):t("hours"),minuteUnit:s==1?t("minute"):s?t("minutes"):""})):e>=60?(s=Math.floor(e/60),n=t("MinutesLeft",{minutes:s,minuteUnit:s==1?t("minute"):t("minutes")})):e>=0?n=t("LessThanAMinute"):n=t("Calculating"),n},removeProgressBar:function(){this.IAPDisclosureAndProgressBar.removeChild(this.progressBar),this.IAPDisclosureAndProgressBar.removeChild(this.timeRemainingDiv),this.progressBarRendered=!1,this.hasInAppPurchases&&!this.IAPDisclosureAdded&&(this.IAPDisclosureAndProgressBar.appendChild(this.inAppPurchaseDisclosure),this.IAPDisclosureAdded=!0)},mousedownEvent:function(e){var t=this.element,n=t.parentNode,r=n.querySelector("select");
this.awaitingConfirmation&&!t.containsElement(e.target)&&!r.containsElement(e.target)&&(this.setState(iTSBuyButton.DEFAULT),this.mousedownListener.remove(),this.awaitingConfirmation=!1)}}}),its.kit.util.extend(iTSBuyButton,{logger:new ITSLogger("iTSBuyButton"),Events:{BUY_SUCCEEDED:"buySucceeded"},DEFAULT:"Default",CONFIRM:"Confirm",INSTALLING:"Installing",INSTALLED:"Installed",ADOPT:"Adopt",GRATIS:"Gratis",activeDownloads:function(e){e&&(iTSBuyButton._activeDownloads=null);
if(!iTSBuyButton._activeDownloads){iTSBuyButton._activeDownloads={};
var t=iTunes.activeDownloads.downloads;
if(t)for(var n=0;
n<t.length;
n++){var r=t[n].adamID;
iTSBuyButton._activeDownloads[r]=t[n]}}return iTSBuyButton._activeDownloads}}),its.kit.createController("iTSBuyButtonHide",{controller:{blacklist:["1073263501","1105079240","1105079245","1073243506","1073244135","1073262947","1073262952","1073262957","1073262965","1073263491","1073263495","1105076822","1105076828","1105079232"],domReady:function(){var e=document.querySelector(".product-detail .multi-button button");
if(e){var t=e.getAttribute("adam-id");
this.blacklist.includes(t)&&(e.parentNode.style.visibility="hidden")}}}}),its.kit.createController("iTSDADisableHistory",{controller:{preload:function(){if(!its.client.isRunning)return;var e=document.body.getBooleanAttribute("disable-history-and-navigation"),t=document.body.getBooleanAttribute("disable-navigation"),n=document.body.getBooleanAttribute("disable-history");
(e||t)&&iTunes.setHistoryNavigationEnabled(!1),(e||n)&&iTunes.getHistory().removeCurrentPage()}}}),its.kit.createController("iTSDAPageOptions",{controller:{domReady:function(){its.client.screenReaderRunning()&&document.body.addClassName("screen-reader");
var e=document.body.classList.contains("uber");
if(e){var t=document.querySelector("div.background");
if(!t||t.init)return;t.init=!0;
var n=document.querySelector("div#content"),r=n.getComputedStyleProperty("min-width").toInt(),i=n.getComputedStyleProperty("padding-bottom").toInt(),s,o,u=function(){s=window.outerHeight-i<document.height?15:0,o=Math.max(r,window.innerWidth-t.getPosition().left-s),t.style.width=o+"px"};
u(),window.addEventListener("resize",u,!1)}else window.removeEventListener("resize",u,!1)}}}),its.kit.onPreload(function(){window.devicePixelRatio>1?document.body.addClassName("hd-device"):document.body.addClassName("sd-device"),its.string.compareNumerically(iTunes.systemVersion(),"10.12")>=0&&document.body.addClassName("sierra-or-later")}),its.kit.onPreload(function(){if(its.client.isRunning){var e=document.getElementById("protocol");
e&&iTunes.addProtocol(e.textContent)}}),its.kit.createController("DARatingThreshold",{binding:"*[parental-rating]",component:{init:function(){its=its||{},its.sf=its.sf||{};
if(!its.client.isRunning)return;this.listen(window,"restrictionschange",bind(this,"enforceParentalControls",!0,{restrictionschange:!0})),its.notifications.subscribe("enforceParentalControls",bind(this,"enforceParentalControls",!0)),this.enforceParentalControls(!1)},enforceParentalControls:function(e,t){t=t||{};
var n=this.element,r=!1,i=ITSParentalRatingUtil.ratingMapFromElement(n)[ITSParentalRatingUtil.Type.Software],s="rating-disabled",o,u;
(t.restrictionschange||!its.sf.clientMaxRating)&&iTunes.getMaxRatingForRatingSystem&&(its.sf.clientMaxRating=iTunes.getMaxRatingForRatingSystem("rating-software")),i!==null&&its.sf.clientMaxRating&&(r=i.ratingValue>its.sf.clientMaxRating),r?(n.addClassName(s),u=n.querySelectorAll("button:not([disabled]), select:not([disabled])"),u.each(function(e){e.disabled=!0,e.setAttribute("disabled-by-rating",!0)})):e&&(n.removeClassName(s),u=n.querySelectorAll("button[disabled-by-rating], select[disabled-by-rating]"),u.each(function(e){e.disabled=null,e.removeAttribute("disabled-by-rating")}))}}}),its.kit.createController("ITSDAToolbar",{controller:{preload:function(){if(!its.client.isRunning)return;if(document.body&&document.body.hasAttribute("toolbar-selection")){var e=document.body.getAttribute("toolbar-selection");
e&&iTunes.selectToolbarItem(e)}else iTunes.selectToolbarItem(null)}}}),its.kit.createController("ITSATBBanner",{controller:{logger:new ITSLogger("ITSATBBanner"),domReady:function(){window.addEventListener("buy-did-complete",bind(this,"handleBuyDidComplete"))},handleBuyDidComplete:function(e){if(e["failure-type"]&&e["failure-type"]==3705){this.productInfo=e["buy-info"],this.banner=document.createElement("div"),this.banner.classList.add("banner");
var t=document.createElement("h2");
t.classList.add("banner-title");
var n;
this.productInfo.price===0?n='<span class="link-alt">'+its.loc("SF.AskToBuy.PermissionBannerText.Free.bannerLinkText")+"</span>":n='<span class="link-alt">'+its.loc("SF.AskToBuy.PermissionBannerText.bannerLinkText")+"</span>",t.innerHTML=its.loc("SF.AskToBuy.PermissionBannerText",{bannerLinkText:n}),this.banner.appendChild(t);
var r=document.body.querySelector("div.showcase");
r&&r.addClassName("detached");
var i=this.banner.querySelector(".link-alt");
i&&i.addEventListener("click",bind(this,"handleBannerLinkClick")),document.body.insertBefore(this.banner,document.body.firstChild)}},handleBannerLinkClick:function(e){iTunes.approveInPerson(this.productInfo.salableAdamId,bind(this,function(e){e.status=="success"&&this.banner.remove()}))}}}),its.kit.createController("ItsDaLockupContainer",{binding:"div.lockup-container",component:{init:function(){this.isGrouping=document.body.hasClassName("grouping");
var e=this.element.parentByClassName("columns");
this.hasSidebar=e?e.querySelector(".sidebar"):!1,this.minColumns=this.hasSidebar?3:4,this.maxColumns=this.hasSidebar?4:5,this.currentColumns=this.element.getAttribute("data-columns-current"),this.widthThreshold=this.hasSidebar?910:1157,this.initBackfill(),this.reflow(),this.listen(window,"resize","reflow"),this.listen("iTSDTPagination.Event.LockupContainerSort","sortedEvent")},reflow:function(e){if(e&&window.innerWidth%4!==0)return;this.element.offsetWidth>this.widthThreshold?this.element.setAttribute("data-columns-current",this.maxColumns):this.element.setAttribute("data-columns-current",this.minColumns),this.backfill(),this.setCount();
var t=document.querySelector(".lockup-container .lockup");
if(t){var n=t.offsetWidth,r=document.getElementsByClassName("lockup-container");
for(var i=0;
i<r.length;
i++){var s=r[i].className;
s=s.replace(/ shorten-review/g,""),n<272&&(s+=" shorten-review"),r[i].className=s}}},initBackfill:function(){this.contentElement=this.element.querySelector(".paginated-content"),this.contentElement||(this.contentElement=this.element.querySelector(".content-and-controls"));
if(!this.contentElement)return;this.lockups=this.contentElement.querySelectorAll(".lockup"),this.numLockups=this.lockups.length,this.currentBackfill=0},backfill:function(e){if(document.body.hasClassName("all-reviews-for-reviewer"))return;if(!this.contentElement)return;var t,n=this.element.getAttribute("data-columns-current");
backfill=n-this.numLockups%n,backfill==n&&(backfill=0);
if(this.currentBackfill!=backfill||e&&e.type=="iTSDTPagination.Event.LockupContainerSort"){this.contentElement.querySelectorAll("div.lockup.backfill").each(function(e){e.remove()});
for(t=0;
t<backfill;
t++){var r=newElement("div","","lockup backfill");
r.setAttribute("aria-hidden","true"),this.contentElement.appendChild(r)}this.currentBackfill=backfill,this.contentElement&&(this.contentElement.style.display="none",this.contentElement.offsetHeight,this.contentElement.style.display="")}},sortedEvent:function(e){this.initBackfill(),this.backfill()},setCount:function(){var e=this.element.getAttribute("data-columns-current"),t=4,n=e*t;
if(this.isGrouping)for(var r=0;
r<this.numLockups;
r++)r<n?this.lockups[r].setAttribute("aria-hidden","false"):this.lockups[r].setAttribute("aria-hidden","true")}}}),its.kit.createController("iTSQuickLinks",{binding:"div.quick-links",component:{init:function(){this.listen(document,iTSBuyButton.Events.BUY_SUCCEEDED,"updateAccountInfo");
var e=navigator.userAgent.substring(0,navigator.userAgent.indexOf("/")),t="Featured";
its.client.isRunning&&iTunes.addEventListener("userchanged",bind(this,"updateAccountInfo"),!1),this.signInText=this.element.getAttribute("data-sign-in-text"),this.welcomeText=this.element.getAttribute("data-welcome-text"),this.accountText=this.element.getAttribute("data-account-text"),this.welcome=this.element.querySelector("li.welcome a"),this.listen(this.welcome,"click","welcomeClicked"),this.accountItem=this.element.querySelector("li.account"),this.account=this.accountItem.querySelector("a"),this.listen(this.account,"click","accountClicked"),this.redeem=this.element.querySelector("li.redeem a"),this.redeem.href=this.redeem.href+(this.redeem.href.indexOf("?")>0?"&":"?")+"pg="+encodeURIComponent(t)+"&cl="+encodeURIComponent(e),this.updateAccountInfo()},welcomeClicked:function(e){e.preventDefault(),its.client.getUserDSID()?iTunes.viewAccount():iTunes.signIn()},accountClicked:function(e){e.preventDefault(),iTunes.viewAccount()},updateUi:function(e,t,n){this.welcome.innerText=e,this.account.innerText=t;
var r=this.accountItem.querySelector("span.badge");
n?r?r.innerText=n:this.accountItem.appendChild(newElement("span",n,"badge")):r&&r.remove()},setSignedOutAccountInfo:function(){this.updateUi(this.signInText,this.accountText,null)},updateAccountInfo:function(){if(its.client.getUserDSID()){var e=this.element.getAttribute("data-account-info-url");
e?iTSInclude.makeHttpRequest({url:e,successCallback:bind(this,"updateAccountInfoLoaded"),failureCallback:bind(this,"updateAccountInfoFailed")}):this.updateAccountInfoFailed()}else this.setSignedOutAccountInfo()},updateAccountInfoFailed:function(){this.updateUi(this.welcomeText,this.accountText,null)},updateAccountInfoLoaded:function(e){var t=JSON.parse(e.responseText);
this.updateUi(t.welcomeMessage,this.accountText,t.creditBalance)}}}),iTSQuickLinks.logger=new ITSLogger("iTSQuickLinks"),its.kit.createController("iTSLinksPopup",{binding:"div.select.links select",component:{init:function(){this.popup=this.element,this.initialIndex=this.popup.selectedIndex,this.listen(this.popup,"change","itemSelected")},itemSelected:function(e){var t=this.popup.options[this.popup.selectedIndex],n=t.getAttribute("value");
this.popup.selectedIndex=this.initialIndex,window.location.href=n}}}),its.kit.createController("iTSBrickRow",{binding:"div.bricks",component:{init:function(){this.bricks=this.element.children;
if(!this.valid())return;this.element.hasClassName("fobricks")?this.brickWidth=208:this.brickWidth=135,this.minBrickSpacing=15,this.brickSpacingWidth=this.brickWidth+this.minBrickSpacing,this.resize(),this.listen(window,"resize","resize"),new iTSKitImageLoader("ready",this,this.element)},valid:function(){return this.bricks.length>0},ready:function(){this.element.style.zIndex="4",this.listen("webkitTransitionEnd"),this.element.addClassName("ready")},resize:function(){this.brickRowWidth=this.element.offsetWidth,this.bricksToShow=Math.floor(this.brickRowWidth/this.brickSpacingWidth),this.brickLeftOffset=this.brickWidth+(this.brickRowWidth-this.bricksToShow*this.brickWidth)/(this.bricksToShow-1),this.bricks.each(function(e,t){e.style.display=t>=this.bricksToShow?"none":"",e.style.left=this.brickLeftOffset*t+"px"},this)},webkitTransitionEndEvent:function(){this.element.style.zIndex="auto"}}}),its.kit.createController("iTSShowcase",{binding:"div.showcase",controller:{domReady:function(){window.setTimeout(bind(this,"afterLoad"),3e4);
var e=iTunes&&iTunes.hasOwnProperty("appIsFrontmost")?iTunes.appIsFrontmost:!0;
e||this.blur(),iTunes&&iTunes.hasOwnProperty("appIsFrontmost")?iTunes.addEventListener("appisfrontmostchanged",bind(this,function(){iTunes.appIsFrontmost?this.focus():this.blur()}),!1):(window.addEventListener("blur",bind(this,"blur"),!1),window.addEventListener("focus",bind(this,"focus"),!1))},afterLoad:function(){this.alreadyApplied||(this.alreadyApplied=!0,this.applyToComponents("beginAnimation"))},blur:function(){this.applyToComponents("blur"),this.pause()},focus:function(){this.applyToComponents("focus"),this.resume()},pause:function(){this.applyToComponents("stopShowTimer"),this.applyToComponents("wasPaused")},resume:function(){this.applyToComponents("startShowTimer"),this.applyToComponents("wasResumed")}},component:{init:function(){var e=this.props={onStageDuration:6e3,initialStartDelay:2e3,backstageSlideOutDuration:750,manualBackstageSlideOutDuration:400,backstageSlideOutCurve:"ease-out",stageFadeInDuration:750,manualStageFadeInDuration:400,stageFadeInCurve:"ease-out"};
e.onStageDuration+=Math.max(e.backstageSlideOutDuration,e.stageFadeInDuration),this.isInAnimation=!1,this.isInStageAnimation=!1,this.isInBackStageAnimation=!1,this.showIsRunning=!1,this.stage=this.element.querySelector("div.stage"),this.actors=this.stage.querySelectorAll("div"),this.backstage=this.element.querySelector("div.backstage > div"),this.thumbnails=this.backstage.querySelectorAll("a");
if(this.canAnimate()){var t=this.fastForwardButton=document.createElement("button");
t.addClassName("fast-forward"),t.setAttribute("aria-label",its.loc("Js.Showcase.Next")),this.actors.addEventListeners("webkitTransitionEnd",this,!1),this.listen(this.backstage,"webkitTransitionEnd",this),this.listen(t,"click",this),this.listen(t,"mouseover",this),this.listen(t,"mouseout",this),this.listen(t,"mousemove",this)}its.client.screenReaderRunning()&&(this.actors.hide(),this.actors.first().show(),this.thumbnails.hide(),this.thumbnails[1].show(),this.thumbnails[1].style.top="100px",this.thumbnails[2].show(),this.thumbnails[2].style.top="200px",this.thumbnails[3].show(),this.thumbnails[3].style.top="300px"),this.prepShow()},handleEvent:function(e){switch(e.type){case"webkitTransitionEnd":this.actors.includes(e.target)?this.afterIntroduceNextActor(e.target):this.backstage===e.target&&this.afterSlideOutThumbnail();
break;case"mouseover":this.fastForwardButton===e.currentTarget&&this.stopShowTimer();
break;case"mouseout":this.fastForwardButton===e.currentTarget&&this.startShowTimer();
break;case"click":this.fastForwardButton===e.currentTarget&&!this.isInBackStageAnimation&&(this.timesLooped=0,this.showLoop(1,!1))}},prepShow:function(){new iTSKitImageLoader("curtains",this,[this.actors.first(),this.thumbnails.first(),this.thumbnails[1],this.thumbnails[2],this.thumbnails[3]])},curtains:function(){this.setBackStage(),this.element.addClassName("ready")},beginAnimation:function(){new iTSKitImageLoader("showtime",this,this.element)},showtime:function(){setTimeout(bind(this,"showtimeStart"),this.props.initialStartDelay)},showtimeStart:function(){this.canAnimate()&&!this.showIsRunning&&(this.backstage.insertAfter(this.fastForwardButton),this.runShow())},canAnimate:function(){return this.thumbnails.length>4&&!its.client.screenReaderRunning()},setBackStage:function(){this.element.hasClassName("focase")?this.thumbnailHeight=90:this.thumbnailHeight=100,this.actors.each(function(e,t){e.showcaseIndex=t}),this.currentIndex=this.actors.first().showcaseIndex-1,this.maxIndex=this.actors.last().showcaseIndex,this.timesLooped=0,this.thumbnails.each(function(e,t){e.showcaseIndex=t,e.style.bottomInPx((t-1)*this.thumbnailHeight),this.setMetricsLocationDetails(e,t,1)},this),this.thumbnails.first().style.bottomInPx(this.thumbnailHeight*(this.thumbnails.length-1)),this.thumbnails.first().hide()},runShow:function(){this.showIsRunning=!0,this.showTimer&&this.showLoop(1,!0),document.hidden&&!this.visibilitychangeListener?(this.visibilitychangeListener=bind(this,"handleVisibilityChange"),document.addEventListener("visibilitychange",this.visibilitychangeListener,!1)):this.startShowTimer()},handleVisibilityChange:function(){document.hidden||(document.removeEventListener("visibilitychange",this.visibilitychangeListener),this.visibilitychangeListener=null,this.afterSlideOutThumbnail(),this.startShowTimer())},showLoop:function(e,t){this.nextCurrentIndex(e),this.startingShowLoop(),this.updatePointers(),this.introduceNextActor(t),this.slideOutThumbnail(t)},startShowTimer:function(){this.blurred||(clearTimeout(this.showTimer),this.timesLooped<3&&(this.showTimer=setTimeout(bind(this,"runShow"),this.props.onStageDuration)))},stopShowTimer:function(){clearTimeout(this.showTimer)},blur:function(){this.blurred=!0},focus:function(){this.blurred=!1},wasPaused:function(){this.element.addClassName("paused")},wasResumed:function(){this.blurred||this.element.removeClassName("paused")},startingShowLoop:function(){this.isInAnimation=!0},finishedShowLoopPart:function(){this.finishedShowLoop()},finishedShowLoop:function(){this.isInAnimation=!0},nextCurrentIndex:function(e){this.previousIndex=this.currentIndex,this.currentIndex=this.roundToIndex(this.currentIndex+e)},roundToIndex:function(e){var t=e%(this.maxIndex+1);
return t>=0?t:this.maxIndex+t+1},loopingIndex:function(e,t){return this.roundToIndex(this.currentIndex+t)},updatePointers:function(){this.currentActorIndex=this.loopingIndex(this.currentActorIndex,0),this.currentActor=this.stage.children[this.currentActorIndex],this.nextActorIndex=this.loopingIndex(this.nextActorIndex,1),this.nextActorIndex>=this.maxIndex&&this.timesLooped++,this.nextActor=this.stage.children[this.nextActorIndex],this.lastActorThumbnailIndex=this.loopingIndex(this.lastActorThumbnailIndex,0),this.lastActorThumbnail=this.backstage.children[this.lastActorThumbnailIndex],this.currentActorThumbnailIndex=this.loopingIndex(this.currentActorThumbnailIndex,1),this.currentActorThumbnail=this.backstage.children[this.currentActorThumbnailIndex],this.currentThumbnailIndex=this.loopingIndex(this.currentThumbnailIndex,2),this.currentThumbnail=this.backstage.children[this.currentThumbnailIndex]},introduceNextActor:function(e){this.isInStageAnimation=!0;
var t=e?this.props.stageFadeInDuration:this.props.manualStageFadeInDuration,n=this.props.stageFadeInCurve;
this.actors.except(this.currentActor,function(e){e.style.opacity=0}),this.actors.each(function(e){e.style.clear_animation_transition("opacity"),e.style.zIndex="99",e.style.pointerEvents="none"}),this.nextActor.style.zIndex="100",this.nextActor.style.animation_transition("opacity",t,n),this.nextActor.style.opacity=1,this.nextActor.style.pointerEvents="auto"},afterIntroduceNextActor:function(){this.isInStageAnimation=!1},direction:function(){var e=this.currentIndex-this.previousIndex;
return e<-1&&(e=1),e>1&&(e=-1),e},slideOutThumbnail:function(e){this.isInBackStageAnimation=!0;
var t=e?this.props.backstageSlideOutDuration:this.props.manualBackstageSlideOutDuration;
this.backstage.style.animation_transition("transform",t,this.props.backstageSlideOutCurve),this.direction()<0&&(this.currentThumbnail.show(),this.element.hasClassName("focase")?this.currentThumbnail.style.topInPx(90):this.currentThumbnail.style.topInPx(100)),this.backstage.style.animation_translateY(this.direction()*this.thumbnailHeight+"px")},afterSlideOutThumbnail:function(){this.backstage.style.clear_animation_transition("transform"),this.backstage.style.animation_translateY("0"),this.thumbnails.each(function(e,t){var n=t-this.currentThumbnailIndex;
n<0&&(n=this.maxIndex-Math.abs(n)+1),e.style.bottomInPx(this.thumbnailHeight*n),this.setMetricsLocationDetails(e,t,this.currentThumbnailIndex)},this),this.lastActorThumbnail.show(),this.currentActorThumbnail.hide(),this.isInBackStageAnimation=!1,this.finishedShowLoopPart()},setMetricsLocationDetails:function(e,t,n){var r=t-n+1;
r>=1&&r<=3&&e.setAttribute("metrics-loc-details","L"+r+"R"+(t+1))}}}),its.kit.createController("iTSPlacardController",{binding:"div[client-side-include-url]",initAfter:"iTSClientSideInclude",component:{init:function(){var e=this.element.getAttribute("client-side-include-url");
e.indexOf("tyCard")>0&&(this.attempts=0,this.placardLoaded=!1,this.listen("iTSClientSideInclude.event.status","includeCompletedEvent"),this.listen("orientationchange","updatePlacardHeight"),this.includeCompletedEvent())},includeCompletedEvent:function(e){var t=document.body.getComputedStyleProperty("background-image")!=="";
if(t){if(this.element.innerHTML===""&&this.attempts<5)this.attempts+=1,defer(this,"includeCompletedEvent",50);
else if(this.element.innerHTML!==""){this.placard=this.element.querySelector(".typ-container"),this.attempts=0;
var n=this.element.querySelector(".typ-artwork-container");
n?this.checkImage():this.placardLoaded=!0,this.updatePlacardHeight()}var r=this.element.ownerDocument.querySelector("div.showcase");
r&&r.addClassName("detached")}},checkImage:function(){var e=this.element.querySelector("img.artwork");
e&&e.height==0&&!this.placardLoaded?(this.imageCheckCount+=1,e.addEventListener("load",bind(this,this.checkImage),!1),e.addEventListener("error",bind(this,this.checkImage),!1)):(this.placardLoaded=!0,this.updatePlacardHeight())},updatePlacardHeight:function(){var e=document.body.getAttribute("style");
e!=null&&e.length>0&&e.lastIndexOf(";")!=e.length+1?e+=";":e="",this.placard||(this.placard=this.element.querySelector(".typ-container"));
var t=this.placard.offsetHeight+"px";
e+="background-position: 0px "+t+" !important;",document.body.setAttribute("style",e)}}}),its.kit.createController("iTSDAPopover",{binding:".has-popover",component:{init:function(){this.whichPopover=this.element.getAttribute("data-popover-class"),this.popover=document.querySelector("."+this.whichPopover),this.contentDiv=document.querySelector("#content"),this.closeDiv=newElement("div","","close-popover"),document.body.appendChild(this.closeDiv),this.closeDiv.appendChild(this.popover),this.popover.addEventListener("click",bind(this,"showPopover"),!1),this.element.addEventListener("click",bind(this,"showPopover"),!1),this.closeDiv.addEventListener("click",bind(this,"dismissPopover"),!0),document.body.addEventListener("keydown",bind(this,"dismissPopoverFromEscape"),!1)},showPopover:function(e){e.preventDefault(),this.popover.style.display="block",this.closeDiv.style.display="block"},dismissPopover:function(){this.popover.style.display="none",this.closeDiv.style.display="none"},dismissPopoverFromEscape:function(e){e.keyCode==27&&(this.popover.style.display="none",this.closeDiv.style.display="none")}}})